
[Data]
life = 1050
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 60
airjuggle = 15
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 0

IntPersistIndex = 60
FloatPersistIndex = 40

[Size]
xscale = 1           ;Horizontal scaling factor.
yscale = 1          ;Vertical scaling factor.
ground.back = 25     ;Player width (back, ground)
ground.front = 26    ;Player width (front, ground)
air.back = 12        ;Player width (back, air)
air.front = 12       ;Player width (front, air)
height = 60          ;Height of player (for opponent to jump over)
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too
head.pos = -15, -115   ;Approximate position of head
mid.pos = -5, -75    ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y). Recommended 0,0

[Velocity]
walk.fwd  = 3      ;Walk forward
walk.back = -2.7    ;Walk backward
run.fwd  = 4.6, 0    ;Run forward (x, y)
run.back = -5.5,-3.8 ;Hop backward (x, y)
jump.neu = 0,-10.5    ;Neutral jumping velocity (x, y)
jump.back = -3    ;Jump back Speed (x, y)
jump.fwd = 3       ;Jump forward Speed (x, y)
runjump.back = -2.55,-8.1 ;Running jump speeds (opt)
runjump.fwd = 4,-8.1      ;.
airjump.neu = 0,-10.1      ;.
airjump.back = -3      ;Air jump speeds (opt)
airjump.fwd = 3         ;.
air.gethit.groundrecover = -.15,-3.5  ;Velocity for ground recovery state (x, y) **MUGEN 1.0**
air.gethit.airrecover.mul = .5,.2     ;Multiplier for air recovery velocity (x, y) **MUGEN 1.0**
air.gethit.airrecover.add = 0,-4.5    ;Velocity offset for air recovery (x, y) **MUGEN 1.0**
air.gethit.airrecover.back = -1       ;Extra x-velocity for holding back during air recovery **MUGEN 1.0**
air.gethit.airrecover.fwd = 0         ;Extra x-velocity for holding forward during air recovery **MUGEN 1.0**
air.gethit.airrecover.up = -2         ;Extra y-velocity for holding up during air recovery **MUGEN 1.0**
air.gethit.airrecover.down = 1.5      ;Extra y-velocity for holding down during air recovery **MUGEN 1.0**

[Movement]
airjump.num = 0       ;Number of air jumps allowed (opt)
airjump.height = 35   ;Minimum distance from ground before you can air jump (opt)
yaccel = .44          ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching
stand.friction.threshold = 2          ;If player's speed drops below this threshold while standing, stop his movement **MUGEN 1.0**
crouch.friction.threshold = .05       ;If player's speed drops below this threshold while crouching, stop his movement **MUGEN 1.0**
air.gethit.groundlevel = 25           ;Y-position at which a falling player is considered to hit the ground **MUGEN 1.0**
air.gethit.groundrecover.ground.threshold = -20 ;Y-position below which falling player can use the recovery command **MUGEN 1.0**
air.gethit.groundrecover.groundlevel = 10   ;Y-position at which player in the ground recovery state touches the ground **MUGEN 1.0**
air.gethit.airrecover.threshold = -1  ;Y-velocity above which player may use the air recovery command **MUGEN 1.0**
air.gethit.airrecover.yaccel = .35    ;Vertical acceleration for player in the air recovery state **MUGEN 1.0**
air.gethit.trip.groundlevel = 15      ;Y-position at which player in the tripped state touches the ground **MUGEN 1.0**
down.bounce.offset = 0, 20            ;Offset for player bouncing off the ground (x, y) **MUGEN 1.0**
down.bounce.yaccel = .4               ;Vertical acceleration for player bouncing off the ground **MUGEN 1.0**
down.bounce.groundlevel = 12          ;Y-position at which player bouncing off the ground touches the ground again **MUGEN 1.0**
down.friction.threshold = .05         ;If the player's speed drops below this threshold while lying down, stop his movement **MUGEN 1.0**

;---------------------------------------------------------------------------

[Quotes]
victory1 = "You will have to train much more to be at my level..."
victory2 = "Next this time I'm gonna finish you off for good!"
victory3 = "Stop daydreaming! Come on!"
victory4 = "What do you think you're doing? Why don't you stop whining like a baby and fight like a man?"
victory5 = "Well, as long as I'm stuck in this dump, I might as well get in some target practice. Heh heh heh heh."
victory6 = "You morons. Shut up and fight." 
victory7 = "Haaa!" 

;---------------------------------------------------------------------------
;FORWARD DASH PART 1
 [Statedef 100]
type    = A
physics = N
ctrl = 0
anim =  100
velset = 0,0

[State 52, Effect]
type = PlaySnd
trigger1 = ANIMELEM = 2
value = 90,87

[State 0, Dust]
type = Explod
trigger1 = animelem = 1
anim = 3005
pos = 0,0
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 24
scale = 1,1

[State 105, 1]
type = VelSet
trigger1 = AnimElem = 2
x = 12.76;-const(velocity.run.back.x)

[State 105, 1]
type = VelMul
trigger1 = AnimElemTime(2) > 0
x = .98

[State 0, Fly Fx]
type = Explod
trigger1 = animelem = 2
anim = 102
pos = -5,-50
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 15
scale = .85,.85
bindtime = 1
vel = 2.5,0

[State 240, 4]
type = ChangeState
trigger1 = COMMAND = "x"
TRIGGER1 = P2BODYDIST X < 50
value = 200
ctrl = 1

[State 240, 4]
type = ChangeState
trigger1 = COMMAND = "y"
TRIGGER1 = P2BODYDIST X < 100
value = 210
ctrl = 1

[State 240, 4]
type = ChangeState
trigger1 = COMMAND = "b"
TRIGGER1 = P2BODYDIST X < 30
value = 250
ctrl = 1

[State 240, 4]
type = ChangeState
trigger1 = COMMAND = "a"
TRIGGER1 = P2BODYDIST X < 70
value = 430
ctrl = 1

[State 105, 3]
type = ChangeState
trigger1 = animtime = 0
value = 101
ctrl = 0

;---------------------------------------------------------------------------
;FORWARD DASH PART 2 LAND
[Statedef 101]
type    = S
physics = S
ctrl = 1
anim = 101
velset = 0,0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Air FORWARD DASH 
[Statedef 110]
type    = A
physics = A
ctrl = 0
anim = 110
sprpriority = 1

[State 52, Effect]
type = PlaySnd
trigger1 = ANIMELEM = 2
value = 90,87

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = 10

[State 105, 1]
type = VelSet
trigger1 = Time = 0
y = -.2

[State 105, 2]
type = CtrlSet
trigger1 = Time = 2
value = 1

[State 105, 3]
type = ChangeState
trigger1 = command = "y"
value = 610

[State 0, Fly Fx]
type = Explod
trigger1 = animelem = 2
anim = 102
pos = -5,-50
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 15
scale = .85,.85
bindtime = 1
vel = 2.5,0

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
;Air Back DASH 
[Statedef 111]
type    = A
physics = A
ctrl = 0
anim = 111
sprpriority = 1

[State 52, Effect]
type = PlaySnd
trigger1 = ANIMELEM = 2
value = 90,87

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = -8

[State 105, 1]
type = VelSet
trigger1 = Time = 0
y = -.1

[State 105, 2]
type = CtrlSet
trigger1 = Time = 2
value = 1

[State 0, Fly Fx]
type = Explod
trigger1 = animelem = 2
anim = 102
pos = -5,-50
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 15
scale = .85,.85
bindtime = 1
vel = 2.5,0

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Lose by Time Over
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 181

;---------------------------------------------------------------------------
; Win pose 1 
[Statedef 181]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 3000, 1]
type = PlaySnd
trigger1 = time = 1
value = 90,86

[State 3000, 1]
type = PlaySnd
trigger1 = time = 60
trigger2 = time = 120
trigger3 = time = 260
value = 90,61

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Introduction
; CNS difficulty: basic
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 191, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 200, 2]
type = PlaySnd
trigger1 = animelem = 2
value = 90, 30
channel = 0

[State 200, 2]
type = PlaySnd
trigger1 = animelem = 5
value = 90, 26

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 200, 2]
type = PlaySnd
trigger1 = Time = 6
value = 90,93

[State 195, 1]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Light Punch
[Statedef 200]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 400                      ;Change animation (Def: no change)
poweradd = 0                   ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
hitdefpersist = 1

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 90, 40
channel = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 25, 0                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
pausetime = 6, 6                ;Time attacker pauses, time opponent shakes
sparkno = s6000
guard.sparkno = S6030                     ;Spark anim no (Def: set above)
sparkxy = -12, -80               ;X-offset for the "hit spark" rel. to p2,
hitsound = s90, 5                  ;Sound to play on hit
guardsound = s6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15            ;Time opponent is in hit state
ground.velocity = -7             ;Velocity at which opponent is pushed
airguard.velocity = -2,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
air.hittime = 15                 ;Time before opponent regains control in air
poweradd = 50

[State 200, 2]
type = PlaySnd
trigger1 = Time = 5
value = 900, 2

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong punch
[Statedef 205]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 2
hitdefpersist = 1

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 90, 41
channel = 0

[State 200, 2]
type = PlaySnd
trigger1 = Time = 4
value = 900, 3

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = 15

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = 7

[State 210, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage    = 57
guardflag = MA
pausetime = 12,12
sparkno = s6010
guard.sparkno = S6030 
sparkxy = -20,-100
hitsound = s90, 6                  ;Sound to play on hit
guardsound = s6, 0  
GETPOWER = 100
ground.type = High
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -12
air.velocity = -3.5,-3.5
forcenofall = 1

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing faward claws
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 410
sprpriority = -1

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 90, 44
channel = 0

[State 210, Width]
type = Width
trigger1 = (AnimElemTime (9) >= 0) && (AnimElemTime (21) < 0)
value = 100,0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2 
x = 6.5

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 900, 4

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Medium
damage    = 57
guardflag = MA
pausetime = 12,12
sparkno = s6020
guard.sparkno = S6030 
sparkxy = enemy,const(size.mid.pos.x),enemy,const(size.mid.pos.y)
hitsound = s90, 16                 ;Sound to play on hit
guardsound = s6, 0  
ground.type = High
ground.slidetime = 12
ground.hittime  = 16
ground.velocity = -15
air.velocity = -6.5,-3.5
forcenofall = 1
poweradd = 125

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing light kick
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 230, 1]
type = PlaySnd
trigger1 = Time = 2
value = 900, 1

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 26
guardflag = MA
pausetime = 12,12
sparkno = s6000
guard.sparkno = S6030 
sparkxy = -20,-90
hitsound = s90, 5                  ;Sound to play on hit
guardsound = s6, 0 
ground.type = Low
ground.slidetime = 10
ground.hittime  = 14
poweradd = 45
ground.velocity = -6
air.velocity = -2.5,-3.5

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong kick
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 0
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 90, 43
channel = 0

[State 240, 1]
type = PlaySnd
trigger1 = Time = 5
value = 900, 3

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
damage    = 63
guardflag = MA
pausetime = 12,12
sparkno = s6010
guard.sparkno = S6030 
sparkxy = -25,-120
hitsound = s90, 7                 ;Sound to play on hit
guardsound = s6, 0 
ground.type = Low
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = -12
GUARD.VELOCITY = -15
air.velocity = -5.2,-3.2
poweradd = 110

[State 240, 3]
type = PosAdd
trigger1 = AnimElem = 7
x = 12

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Air Luancher
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 0
ctrl = 0
velset = 0,0
anim = 245
sprpriority = 2

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 90, 46
channel = 0

[State 240, 1]
type = PlaySnd
trigger1 = Time = 2
value = 900, 4

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = UP
damage    = 70
guardflag = MA
pausetime = 12,12
sparkno = s6020
guard.sparkno = S6030 
sparkxy = -10,-120
hitsound = s90, 17                  ;Sound to play on hit
guardsound = s6, 0 
ground.type = Low
ground.slidetime = 12
ground.hittime  = 35
air.hittime = 35
ground.velocity = -.5,-10
GUARD.VELOCITY = -5
air.velocity = -1,-10
GETPOWER = 250

[State 0, smoke]
type = Explod
trigger1 = movehit
anim = 1231
pos = 100,10
postype = p1  ;p2,front,back,left,right
scale = .75,.75
sprpriority = 3

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Foward Thrust Kick
[Statedef 260]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 260                     ;Change animation (Def: no change)
poweradd = 0                   ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 90, 41
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 1.5

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 4

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 3

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 6
x = -15

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 75, 0                   ;Damage that move inflicts, guard damage
animtype = Med                ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
pausetime = 12, 10                ;Time attacker pauses, time opponent shakes
sparkno = s6010
guard.sparkno = S6030                     ;Spark anim no (Def: set above)
sparkxy = -12, -80               ;X-offset for the "hit spark" rel. to p2,
hitsound = s90, 6                  ;Sound to play on hit
guardsound = s6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 8             ;Time opponent is in hit state
ground.velocity = -17 
GUARD.VELOCITY = -10           ;Velocity at which opponent is pushed
airguard.velocity = -4,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
air.hittime = 8                 ;Time before opponent regains control in air
poweradd = 110

[State 200, 2]
type = PlaySnd
trigger1 = Time = 10
value = 900, 3

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light punch
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 0
ctrl = 0
anim = 401
sprpriority = 2

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 900, 2

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 23
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 10,11
sparkno = s6000
guard.sparkno = S6030 
sparkxy = -10,-60
hitsound = s90, 5                  ;Sound to play on hit
guardsound = s6, 0 
ground.type = Low
ground.slidetime = 4
ground.hittime  = 9
ground.velocity = -4
air.velocity = -2.5,-3
poweradd = 45

[State 400, 3]
type = CtrlSet
trigger1 = Time = 6
value = 1

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
;Crouching strong punch
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 25
ctrl = 0
anim = 445
sprpriority = 2

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 90, 43
channel = 0

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 900,4

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = 5

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = 5

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = -10

[State 410, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage    = 37
animtype  = Medium
hitflag = MAF
guardflag = M
pausetime = 12,12
sparkno = s6010
guard.sparkno = S6030 
sparkxy = -25,-130
hitsound = s90, 15                  ;Sound to play on hit
guardsound = s6, 0 
ground.type = Low
ground.slidetime = 12
ground.hittime  = 25
ground.velocity = -2,-10
air.velocity = -1.5,-7
poweradd = 150

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light kick
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 0
ctrl = 0
anim = 430
sprpriority = 2

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 90, 40
channel = 0

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 900,2

[State 430, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 28
animtype  = Light
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = s6000
guard.sparkno = S6030 
sparkxy = -15,-30
hitsound = s90, 5                  ;Sound to play on hit
guardsound = s6, 0 
ground.type = Low
ground.slidetime = 6
ground.hittime  = 12
ground.velocity = -5
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 22
poweradd = 55

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Strong Kick
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 35
ctrl = 0
anim = 440
sprpriority = 2

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 90, 46
channel = 0

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 900,5

[State 440, 3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 72
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = s6010
guard.sparkno = S6030 
sparkxy = -5,-10
hitsound = s90, 8                  ;Sound to play on hit
guardsound = s6, 0 
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 17
ground.velocity = -1.5,-2
air.velocity = -1.2,-3
guard.velocity = -5
fall = 1
poweradd = 125

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Jump Light Punch
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 0
ctrl = 0
anim = 605
sprpriority = 2

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 90, 40
channel = 0

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 900, 0

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 20
guardflag = HA
priority = 3
pausetime = 7,8
sparkno = s6000
guard.sparkno = S6030 
sparkxy = -10,-58
hitsound = s90, 5                  ;Sound to play on hit
guardsound = s6, 0 
ground.type = High
ground.slidetime = 5
ground.hittime  = 8
ground.velocity = -4
air.velocity = -1.3,-3
air.hittime = 14
poweradd = 50

[State 600, 3]
type = CtrlSet
trigger1 = Time = 20
value = 1

;---------------------------------------------------------------------------
;Jump Strong Punch
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 0
ctrl = 0
anim = 601
sprpriority = 2

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 90, 45
channel = 0

[State 610, 2]
type = PlaySnd
trigger1 = Time = 2
value = 900, 3

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 80
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = s6020
guard.sparkno = S6030 
sparkxy = -30,-85
hitsound = s90, 9                  ;Sound to play on hit
guardsound = s6, 0 
animtype = Med
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -7
air.velocity = -4,4
poweradd = 125

;---------------------------------------------------------------------------
;Jump Light Kick
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 0
ctrl = 0
anim = 200
sprpriority = 2

[State 630, 1]
type = PlaySnd
trigger1 = Time = 1
value = 900, 2

[State 630, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 26
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = s6000
guard.sparkno = S6030 
sparkxy = -10,-45
hitsound = s90, 5                  ;Sound to play on hit
guardsound = s6, 0 
ground.type = High
ground.slidetime = 6
ground.hittime  = 10
ground.velocity = -4
air.velocity = -2,-3
air.hittime = 14
poweradd = 50

[State 600, 3]
type = CtrlSet
trigger1 = Time = 13
value = 1

;---------------------------------------------------------------------------
;Jump Strong Kick
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 30
ctrl = 0
anim = 640
sprpriority = 2

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 90, 46
channel = 0

[State 640, 2]
type = PlaySnd
trigger1 = Time = 2
value = 900, 5

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 70
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = s6010
guard.sparkno = S6030 
sparkxy = -35,-90
hitsound = s90, 7                  ;Sound to play on hit
guardsound = s6, 0 
animtype = hard
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -10,-2
poweradd = 95
air.hittime = 25

;---------------------------------------------------------------------------
;Throw start
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
p1sprpriority = 1     ;Draw p1's sprite in front of p2
                      ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
p1stateno = 810       ;On success, KFM changes to state 810
p2stateno = 820       ;If hit, p2 changes to state 820 in KFM's cns
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1      

[State 80, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Throw p1
[Statedef 810]
type = S
movetype= A
physics = N
anim = 810
poweradd = 60

[State 200, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 90, 46
channel = 0

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 900,104

[State 400, 1]
type = PlaySnd
trigger1 = Time = 15
value = 900,69

[State 0, Grab Spark]
type = Explod
trigger1 = animelem = 1
anim = 6001
ID = 6002
pos = 70,-100
postype = p1  ;p2,front,back,left,right
sprpriority = 3 

[State 0, P2 throw wind fx]
type = Explod
trigger1 = animelem = 3
anim = 102
ID = 102
pos = 20,-70
postype = p2  ;p2,front,back,left,right
sprpriority = 2 
removetime = 20
vel = -4,0

[State 810, Holding fwd?]
type = VarSet
trigger1 = Time = 0
var(2) = command = "holdfwd"

[State 90, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 75, 0

[State 90, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2
pos = 63, 1.3333333333333

[State 90, Bind 3]
type = TargetBind
trigger1 = AnimElem = 3
pos = 51, -6.6666666666667

[State 90, Bind 4]
type = TargetBind
trigger1 = AnimElem = 4
pos = 101.66666666667, 5.3333333333333

[State 90, Bind 5]
type = TargetBind
trigger1 = AnimElem = 5
pos = 188.33333333333, -8

[State 90, Bind 6]
type = TargetBind
trigger1 = AnimElem = 6
pos = 248.33333333333, -37.333333333333

[State 90, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 6
value = -125

[State 810, Throw 11]
type = TargetState
trigger1 = AnimElem = 6
value = 821

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Throw p2
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

;---------------------------------------------------------------------------
;Throw p2 in air
[Statedef 821]
type = A
movetype = H
physics = N
velset = -10.5,-3
poweradd = 40

[State 101, 1] ;Gravity
type = VelAdd
trigger1 = 1
y = .4

[State 101, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

;---------------------------------------------------------------------------
; Fireball Lights
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 150
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 900, 12

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 90, 84
channel = 0

[State 1000, DUST FOLLOW FIREBALL]
type = Explod
trigger1 = AnimElem = 5
anim = 1008
pos = 80,-10
postype = p1
vel = 3,0
removetime = -1
ownpal = 1
id = 1008
sprpriority = 3

[State 88888, 1]
type = Projectile
trigger1 = AnimElem =3 ;--------animation execute fireball
projanim = 1006   ;---------------fireball animation
projhitanim = 1007  ;----------fireball hit animation
projpriority = 3  ;----------add this to cancel with other projectile
projsprpriority =3;----------add this to cancel with other projectile
projheightbound = -240, 100
projedgebound = 100
projscreenbound = 100
projshadow = -1
projhits = 1;-------------------how any time it hits
projscale = 1,1;-------------------projectile size
offset = 62,-120;-----------position where the projectile comes out (use rule)
velocity = 3;--------------how fast and angel of the projectile
attr = S, SP
damage   = 75,5
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 15,12
hitsound   = s900,56
sparkxy = 500,500
guardsound = S6,0
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -10
guard.cornerpush.veloff = -10
airguard.cornerpush.veloff = -7
GROUND.cornerpush.veloff = -12
air.animtype = Back
air.velocity = -4,-6
air.juggle = 3
air.fall = 1
down.velocity = -4,-6
down.hittime = 30
down.bounce = 0
fall.recover = 0
GETPOWER = 100

[State 0, Dust]
type = Explod
trigger1 = animelem = 3
anim = 3005
pos = 0,0
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 18
scale = .85,.85

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Fireball Strong
[Statedef 1010]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 175
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 900, 12

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 90, 84
channel = 0

[State 1000, DUST FOLLOW FIREBALL]
type = Explod
trigger1 = AnimElem = 5
anim = 1008
pos = 80,-10
postype = p1
vel = 3,0
removetime = -1
ownpal = 1
id = 1008
sprpriority = 3

[State 88888, 1]
type = Projectile
trigger1 = AnimElem =3 ;--------animation execute fireball
projanim = 1006   ;---------------fireball animation
projhitanim = 1007 ;----------fireball hit animation
projpriority = 3  ;----------add this to cancel with other projectile
projsprpriority =3;----------add this to cancel with other projectile
projheightbound = -240, 100
projedgebound = 100
projscreenbound = 100
projshadow = -1
projhits = 1;-------------------how any time it hits
projscale = 1,1;-------------------projectile size
offset = 62,-120;-----------position where the projectile comes out (use rule)
velocity = 5,0;--------------how fast and angel of the projectile
attr = S, SP
damage   = 75,5
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 15,12
hitsound   = s900,56
sparkxy = 500,500
guardsound = S6,0
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -15
air.animtype = Back
air.velocity = -4,-6
air.juggle = 3
air.fall = 1
down.velocity = -4,-6
down.hittime = 30
down.bounce = 0
fall.recover = 0
GETPOWER = 100
ownpal = 1

[State 0, Dust]
type = Explod
trigger1 = animelem = 3
anim = 3005
pos = 0,0
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 18
scale = .85,.85

[State 1010, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; EX Flame
[Statedef 1020]
type    = S
movetype= A
physics = N
juggle  = 6
poweradd= -500
velset = 0,0
anim = 1020
ctrl = 0
sprpriority = 2

[State 1020, Friction]
type = VelMul
trigger1 = 1
x = .85 * ifelse (AnimElemTime(6) < 0, 1, .8)

[State 1020, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1020, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 0
time = 2

[State 1020, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1020, 1]
type = PlaySnd
trigger1 = Time = 2
value = 900, 90

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 90, 70
channel = 0

[State 1020, 4]
type = PosAdd
trigger1 = AnimElem = 3
x = -10

[State 88888, 1]
type = Projectile
trigger1 = AnimElem =3 ;--------animation execute fireball
projanim = 1023 ;---------------fireball animation
projhitanim = -1  ;----------fireball hit animation
projpriority = 3  ;----------add this to cancel with other projectile
projsprpriority =3;----------add this to cancel with other projectile
projheightbound = -240, 100
projremovetime = 40
projhitanim = 10241
removeanim = 10241
projid = 1023
projedgebound = 100
projremove = 0
projshadow = -1
projhits = 3;-------------------how any time it hits
projscale = 1,1;-------------------projectile size
offset = 25,-108;-----------position where the projectile comes out (use rule)
velocity =0,0;--------------how fast and angel of the projectile
attr = S, SP
damage   = 30,5
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 10,10
hitsound   = s900,13
sparkxy = 500,500
guardsound = S6,0
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -16
air.animtype = Back
air.velocity = -4,-6
air.juggle = 3
air.fall = 1
down.velocity = -4,-6
down.hittime = 30
down.bounce = 0
fall.recover = 0
getpower = 0
palfx.time = 50
palfx.add = 32,0,0
palfx.mul = 400,192,192

[State 0, Dust]
type = Explod
trigger1 = animelem = 3
anim = 30050
pos = 0,0
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 40
scale = 1,1

[State 1020, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;                        Custome Bounce Hit Wall
;---------------------------------------------------------------------------
; Hit by Fast Kung Fu Palm - shaking from the hit
; (a custom gethit state)
[Statedef 1025]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1025, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = 1
value = 1025

[State 1025, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 1026

;------------------
; Hit by Fast Kung Fu Palm - flying through the air
; (a custom gethit state)
[Statedef 1026]
type    = A
movetype= H
physics = N

[State 1026, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1026, Gravity]
type = VelAdd
trigger1 = 1
y = .45

[State 1026, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1027

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; Hit by Fast Kung Fu Palm - hit wall
; (a custom gethit state)
[Statedef 1027]
type    = A
movetype= H
physics = N

[State 1027, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1027, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = 507
pos = 25, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1027, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 1027

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 1027, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 1028

;------------------
; Hit by Fast Kung Fu Palm - bounce off wall
; (a custom gethit state)
[Statedef 1028]
type    = A
movetype= H
physics = N

[State 1028, 1]
type = NotHitBy
trigger1 = 1
value = , NA, NP

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -8

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;Sliding Retort Kick Light
[Statedef 1050]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 150
velset = 0,0
anim = 1050
ctrl = 0
sprpriority = 2

[State 0, Dust]
type = Explod
trigger1 = animelem = 1
anim = 3005
pos = 0,0
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 24
scale = .85,.85

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 900,88

[State 1050, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 2

[State 1050, 2]
type = null;PosAdd
trigger1 = AnimElem = 2
x = 15

[State 1050, 3]
type = PosAdd
trigger1 = AnimElem = 4
x = 20

[State 1050, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1051

;---------------------------------------------------------------------------
;Sliding Retort Kick Light Up
[Statedef 1051]
type    = A
movetype= A
physics = N
velset = 8,-4
anim = 1051
hitdefpersist = 1 ;Keep the HitDef from previous state active
poweradd = 0

[State 1050, 4]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = diagup
damage    = 80, 4
priority  = 5
guardflag = L
pausetime = 12,12
sparkno = s6010
guard.sparkno = S6031
sparkxy = -10,-10
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -3.5,-7
guard.velocity = -7
air.velocity = -3.5,-7
fall = 1
getpower = 125

[State 1051, 1] ;Gravity
type = VelAdd
trigger1 = 1
y = .45

[State 1051, 3] ;Change state when KFM is close to ground
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1052

;---------------------------------------------------------------------------
;Sliding Retort Kick Light Land
[Statedef 1052]
type    = S
movetype= I
physics = S
anim = 1052
sprpriority = 1
velset = 0,0

[State 1052, 1] ;Reset y-position to ground level
type = PosSet
trigger1 = Time = 0
y = 0

[State 1052, 2] ;Play a sound for landing
type = PlaySnd
trigger1 = Time = 0
value = 40, 0

[State 1052, 3] ;Give KFM back control early
type = CtrlSet
trigger1 = AnimElem = 3, -1
value = 1

[State 1052, 4] ;Move KFM back a little
type = PosAdd
trigger1 = AnimElem = 4
x = -15

[State 1052, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Sliding Retort Kick Strong
[Statedef 1060]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 150
velset = 0,0
anim = 1050
ctrl = 0
sprpriority = 2

[State 0, Dust]
type = Explod
trigger1 = animelem = 1
anim = 3005
pos = 0,0
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 24
scale = .85,.85

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 900,88

[State 1060, 2]
type = PosAdd
trigger1 = AnimElem = 2
x = 6

[State 1060, 3]
type = PosAdd
trigger1 = AnimElem = 4
x = 21

[State 1060, 4]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = up
damage    = 90, 5
priority  = 5
guardflag = L
pausetime = 12,12
sparkno = s6020
guard.sparkno = S6031
sparkxy = -10,-70
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -3.5,-3.5
guard.velocity = -7
air.velocity = -3.5,-3.5
fall = 1
poweradd = 125

[State 1060, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1061
ctrl = 0
;---------------------------------------------------------------------------
;Sliding Retort Kick - jump
[Statedef 1061]
type    = A
movetype= A
physics = N
velset = 8,-5.5
anim = 1051
hitdefpersist = 1 ;Keep the HitDef from previous state active
poweradd = 0
CTRL = 0

[State 1060, 4]
type = HitDef
trigger1 = animelem = 1 || animelem = 2
attr = A, SA
animtype  = hard
damage    = 45, 5
priority  = 5
guardflag = L
pausetime = 12,12
sparkno = s6020
guard.sparkno = S6031 
sparkxy = -10,-10
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -2.5,1.5
guard.velocity = -10
air.velocity = -2.5,1.5
fall = 1
fall.recover = 0
poweradd = 85

[State 1061, 1]
type = VelAdd
trigger1 = 1
y = .45

[State 1061, 3]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1052
ctrl = 0

;---------------------------------------------------------------------------
;Sliding Retort Kick EX
[Statedef 1070]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= -500
velset = 0,0
anim = 1070
ctrl = 0
sprpriority = 2

[State 1070, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1070, Afterimage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(35) < 0
value = SCA,NA,SP
time = 1

[State 1070, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 25
add = 32,16,0
sinadd = 64,32,5,3

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 900,88

[State 0, VelSet]
type = VelSet
trigger1 = ANIMELEM = 1
x = -1

[State 0, VelSet]
type = VelSet
trigger1 = ANIMELEM = 2
x = 3.5

[State 0, VelSet]
type = VelSet
trigger1 = ANIMELEM = 3
x = 10

[State 0, VelSet]
type = VelSet
trigger1 = ANIMELEM = 4
x = 20

[State 1070, 4]
type = HitDef
trigger1 =  ANIMELEM = 4
attr = S, SA
animtype  = Medium
getpower  = 0
damage    = 50, 10
priority  = 5
hitflag   = MA
guardflag = MA
pausetime = 8,7
sparkno = s6010
guard.sparkno = S6031 
sparkxy = -10,-60
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -2,-6
guard.velocity = -7
air.velocity = -2,-6
fall = 1
fall.animtype = Med
fall.recovertime = 30
GETPOWER = 0
FALL.RECOVER = 0

[State 1052, 5]
type = ChangeState
trigger1 = movehit 
value = 1071
ctrl = 0

[State 1052, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Sliding Retort Kick2-HIt Success
[Statedef 1071]
type    = A
movetype= A
physics = N
velset = 4,-8
anim = 1071
ctrl = 0

[State 1200, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 90, 46
channel = 0

[State 1071, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 18
add = 32,16,0
sinadd = 64,32,5,3

[State 1071, Afterimage]
type = AfterImageTime
trigger1 = Vel Y < 0
time = 2

[State 1051, 1] ;Gravity
type = VelAdd
trigger1 = 1
y = .45

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,NP
time = 1

[State 400, 2]
type = HitDef
trigger1 = time = 0
attr = C, NA
damage    = 120, 20
priority  = 3
hit = 2
animtype  = hard
hitflag = MAF
guardflag = L
pausetime = 20,15
sparkno = s6010
guard.sparkno = S6030 
sparkxy = -10,-50
hitsound = s90, 7                  ;Sound to play on hit
guardsound = s6, 0 
ground.type = Low
ground.slidetime = 4
ground.hittime  = 9
ground.velocity = -12
air.velocity = -8.5,-3
GETPOWER = 0
ground.cornerpush.veloff = -20
air.cornerpush.veloff = -20
FALL.RECOVER = 0

[State 1071, 5]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1072
ctrl = 0

;---------------------------------------------------------------------------
;Sliding Retort Kick EX land
[Statedef 1072]
type    = S
movetype= I
physics = S
anim = 1072
sprpriority = 1
velset = 0,0
ctrl = 0
poweradd =0

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 3109
pos = 0,0
postype = p1  ;p2,front,back,left,right
scale = .85,.85
sprpriority = 2

[State 1052, 1] ;Reset y-position to ground level
type = PosSet
trigger1 = Time = 0
y = 0

[State 1052, 2] ;Play a sound for landing
type = PlaySnd
trigger1 = Time = 0
value = 40, 0

[State 1052, 3] ;Give KFM back control early
type = CtrlSet
trigger1 = AnimElem = 1, -1
value = 1

[State 1052, 4] ;Move KFM back a little
type = PosAdd
trigger1 = AnimElem = 1
x = -20

[State 1052, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Light Arm Grab
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 75
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

[State 0, Dust]
type = Explod
trigger1 = animelem = 1
anim = 3005
pos = 0,0
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 24
scale = .8,1

[State 1200, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 900, 5

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 90, 20
channel = 0

[State 1200, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 65, 5
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-100
sparkno = s6010
guard.sparkno = S6031 
hitsound   = s900,104
guardsound = s6,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 20
ground.velocity = -10
ground.cornerpush.veloff = -12 ;To push far away when p2 is in corner
guard.velocity = -12
air.velocity = -3.5,-4.5
airguard.velocity = -3.5,-4.5
p1stateno = 1201
p2stateno = 1202
envshake.time = 16
envshake.ampl = -4
envshake.freq = 90
GETPOWER = 150

[State 1200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;p1 hit success
[Statedef 1201]
type = S
movetype = A
physics = S
anim = 1201
poweradd = 0
ctrl = 0

[State 1200, 3]
type = ChangeState
trigger1 = p2stateno = 1202
trigger1 = time > 5
;trigger1 = p2bodydist x <20
trigger1 = command = "3hit"
value = 1230
ctrl = 1

[State 1200, 3]
type = ChangeState
trigger1 = p2stateno = 1202
trigger1 = time > 5
;trigger1 = p2bodydist x <20
trigger1 = command = "3hitp"
value = 1240
ctrl = 1

[State 2601, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------
; Grab 3-hit combo
[Statedef 1230]
type = S
movetype = A
physics = S
anim = 1230
poweradd = 0
ctrl = 0

[State 0, smoke]
type = Explod
trigger1 = animelem = 8
anim = 1231
pos = 0,10
postype = p1  ;p2,front,back,left,right
scale = .75,.75
sprpriority = 3

[State 0,land smoke]
type = Explod
trigger1 = animelem = 1
anim = 1233
ID = 1233
pos = -50,7
postype = p1 ;p2,front,back,left,right
sprpriority = 3
removetime = 10
scale = 1,1

[State 1200, 1]
type = PlaySnd
trigger1 = AnimElem = 1 || animelem = 3 
value = 90, 45
channel = 0

[State 1200, 1]
type = PlaySnd
trigger1 = AnimElem = 1 || animelem = 3 
value = 900, 2

[State 1200, 1]
type = PlaySnd
trigger1 =  animelem = 8
value = 900, 3

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 8
value = 90, 37
channel = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 1 
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 25, 5                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = s6001 
guard.sparkno = S6031                    ;Spark anim no (Def: set above)
sparkxy = -10, -120               ;X-offset for the "hit spark" rel. to p2,
hitsound = s90, 7                  ;Sound to play on hit
guardsound = s6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 11             ;Time opponent is in hit state
ground.velocity = -2,-4            ;Velocity at which opponent is pushed
airguard.velocity = -2.5,-4    ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
air.hittime = 15 
GETPOWER = 50

[State 200, 1]
type = HitDef
trigger1 =  animelem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 25, 5                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = s6001  
guard.sparkno = S6030                   ;Spark anim no (Def: set above)
sparkxy = -10, -76               ;X-offset for the "hit spark" rel. to p2,
hitsound = s90, 8                 ;Sound to play on hit
guardsound = s6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 11             ;Time opponent is in hit state
ground.velocity = -2,-4            ;Velocity at which opponent is pushed
airguard.velocity = -2.5,-4    ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
air.hittime = 15 
envshake.time = 16
envshake.ampl = -4
envshake.freq = 90
GETPOWER = 50

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 7
x = 10

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 8
x = 15

[State 2601, 1]
type = HitDef
trigger1 =  animelem = 8
attr = S, SA
damage = 60,5
animtype = Hard
guardflag = M
hitflag = MAF
getpower = 30,0
pausetime = 46,46
sparkno = s6010
guard.sparkno = S6031
sparkxy = -38, -129
hitsound = s90, 9                  ;Sound to play on hit
guardsound = s6, 0  
ground.type = Low
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -1,-14
air.velocity = -1,-14
fall = 1
yaccel = .5
fall.yvelocity = 0
envshake.time = 16
envshake.ampl = -4
envshake.freq = 90
FALL.RECOVER = 0
poweradd = 85

[State 1200, 3]
type = ChangeState
trigger1 = command = "Arm_Fake"
TRIGGER1 = MOVEHIT>4
TRIGGER1 = P2STATETYPE = A 
TRIGGER1 = TIME > 30
value = 1250

[State 1200, 3]
type = ChangeState
TRIGGER1 = TIME = [46,55]
trigger1 = command = "holdup"
value = 40

[State 1200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 1231
ctrl = 0

;---------------------------------------------------------------------------
; Light Arm Grab Fake (prevent from repeating same arm grab combo)
[Statedef 1231]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1231
ctrl = 0
sprpriority = 2

[State 1200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Light Arm Grab Fake (prevent from repeating same arm grab combo)
[Statedef 1250]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

[State 1200, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 900, 5

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 90, 20
channel = 0

[State 1200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Multi Punch Light (P2 HIT)
[Statedef 1202]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 0, PosSet]
type = PosSet
trigger1 = time =1
y=0

[State 1560, 2]
type = ChangeAnim2
trigger1 = Time = 0
value = 1202

[State 1560, 2]
type = velset
trigger1 = Time = [1,30]
x = 4

[State 1200, 3]
type = selfstate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Strong Arm Grab
[Statedef 1210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 85
velset = 0,0
anim = 1210
ctrl = 0
sprpriority = 2

[State 0, Dust]
type = Explod
trigger1 = animelem = 1
anim = 3005
pos = 0,0
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 24
scale = .8,1

[State 1200, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 900, 5

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 90, 20
channel = 0

[State 1210, Width 1]
type = Width
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
value = 10,0

[State 1210, Width 2]
type = Width
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(9) < 0
value = 20,0

[State 1210, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 75, 5
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-100
sparkno = s6010
guard.sparkno = S6031
hitsound = s900, 104                  ;Sound to play on hit
guardsound = s6, 0  
ground.type = Low
ground.slidetime = 18
ground.hittime  = 22
ground.velocity = -10
ground.cornerpush.veloff = -15 ;To push far away when p2 is in corner
guard.velocity = -8
air.velocity = -4,-4.5
airguard.velocity = -4,-4.5
p2stateno = 1212
p1stateno = 1211
envshake.time = 16
envshake.ampl = -4
envshake.freq = 90
poweradd = 175

[State 1210, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;p1 hit success
[Statedef 1211]
type = S
movetype = A
physics = S
anim = 1211
poweradd = 0

[State 0, P2 throw wind fx]
type = Explod
trigger1 = animelem = 1
anim = 102
ID = 102
pos = 20,-70
postype = p2  ;p2,front,back,left,right
sprpriority = 2 
removetime = 20
vel = -4,0

[State 1200, 3]
type = ChangeState
trigger1 = p2stateno = 1212
trigger1 = time > 10
;trigger1 = p2bodydist x <20
trigger1 = command = "3hit"
value = 1230
ctrl = 1

[State 1200, 3]
type = ChangeState
trigger1 = p2stateno = 1212
trigger1 = time > 10
;trigger1 = p2bodydist x <20
trigger1 = command = "3hitp"
value = 1240
ctrl = 1

[State 2601, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Multi Punch Hard (P2 HIT)
[Statedef 1212]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 0, PosSet]
type = PosSet
trigger1 = time =1
y=0


[State 1560, 2]
type = ChangeAnim2
trigger1 = Time = 0
value = 1212

[State 1560, 2]
type = velset
trigger1 = Time = [1,42]
x = 6

[State 1200, 3]
type = selfstate
trigger1 = animtime = 0
value = 5100
ctrl = 1
;----------------------------------------------------------------
;4-Hit Combo Claw
[Statedef 1240]
type = S
movetype = A
physics = S
anim = 1241
poweradd = 150
ctrl = 0

[State 0, P2 throw wind fx]
type = Explod
trigger1 = animelem = 1
anim = 1232
ID = 1232
pos = 20,0
postype = p1 ;p2,front,back,left,right
sprpriority = 2 
removetime = 20

[State 0, P2 throw wind fx]
type = Explod
trigger1 = animelem = 19
anim = 1234
ID = 1234
pos = 40,7
postype = p1 ;p2,front,back,left,right
sprpriority = 3
removetime = 10
scale = .85,1


[State 1200, 1]
type = PlaySnd
trigger1 = AnimElem = 1 || animelem = 6
value = 900, 2

[State 1200, 1]
type = PlaySnd
trigger1 =  animelem = 9|| animelem = 13 || animelem = 16
value = 900, 4

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 18
value = 90, 45
channel = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2 
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 35, 5                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = s6001 
guard.sparkno = S6031                   ;Spark anim no (Def: set above)
sparkxy = -40, -20               ;X-offset for the "hit spark" rel. to p2,
hitsound = s90, 7                  ;Sound to play on hit
guardsound = s6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 20           ;Time opponent is in hit state
ground.velocity = -1.5,-5            ;Velocity at which opponent is pushed
airguard.velocity = -1.5,-5    ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
air.hittime = 15 
poweradd = 65

[State 200, 1]
type = HitDef
trigger1 =  animelem = 4
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 35, 5                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = s6001 
guard.sparkno = S6031                    ;Spark anim no (Def: set above)
sparkxy = -40, -110             ;X-offset for the "hit spark" rel. to p2,
hitsound = s90, 8                 ;Sound to play on hit
guardsound = s6, 0                 ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 30             ;Time opponent is in hit state
ground.velocity = -1.5,-8           ;Velocity at which opponent is pushed
airguard.velocity = -1.5,-8    ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -4,-3           ;X-velocity at which opponent is pushed,
air.hittime = 30 
poweradd = 50

[State 200, 1]
type = HitDef
trigger1 =  animelem = 11 || animelem = 12
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 35, 5                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = s6010 
guard.sparkno = S6031                    ;Spark anim no (Def: set above)
sparkxy = -20, -150              ;X-offset for the "hit spark" rel. to p2,
hitsound = s90, 8                 ;Sound to play on hit
guardsound = s6, 0                 ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 25            ;Time opponent is in hit state
ground.velocity = -5,-7            ;Velocity at which opponent is pushed
airguard.velocity = -5,-7    ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -4,-3           ;X-velocity at which opponent is pushed,
air.hittime = 30 
poweradd = 45

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
trigger2 = animelem = 9
x = 3.5

[State 0, VelSet]
type = VelSet
trigger1 =  animelem =11
x = 8

[State 0, VelSet]
type = VelSet
trigger1 =  animelem = 14
x = 6

[State 2601, 1]
type = HitDef
trigger1 =  animelem = 17
attr = S, SA
damage = 13,5
animtype = Hard
guardflag = M
hitflag = MAF
getpower = 30,0
pausetime = 46,46
sparkno = s6020 
guard.sparkno = S6031                    ;Spark anim no (Def: set above)
sparkxy = -20, -85 
hitsound = s90, 9                ;Sound to play on hit
guardsound = s6, 0  
ground.type = Low
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -10,-4
air.velocity = -10,-4
fall = 1
yaccel = .5
fall.yvelocity = 0
envshake.time = 16
envshake.ampl = -4
envshake.freq = 90
FALL.RECOVER = 0
envshake.time = 16
envshake.ampl = -4
envshake.freq = 90
poweradd = 90

[State 1200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Knee Attack Light Start
[Statedef 1400]
type    = S
movetype= A
physics = N
juggle  = 4
poweradd= 200
velset = 0,0
anim = 1400
ctrl = 0
sprpriority = 2

[State 0, Dust]
type = Explod
trigger1 = animelem = 1
anim = 1233
pos = 0,0
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 15
scale = .8,1

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 900,76

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 90, 73
channel = 0

[State 1050, 2]
type = null;PosAdd
trigger1 = AnimElem = 2
x = 15

[State 1050, 3]
type = PosAdd
trigger1 = AnimElem = 4
x = 20

[State 1050, 4]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 125, 5
priority  = 5
guardflag = MA
pausetime = 12,12
sparkno = s6020
guard.sparkno = S6031 
sparkxy = -10,-70
hitsound = s90, 8                 ;Sound to play on hit
guardsound = s6, 0  
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -3.5,-7
guard.velocity = -7
air.velocity = -3.5,-7
fall = 1
ground.cornerpush.veloff = -17
getpower = 110
FALL.RECOVER = 0

[State 1400, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 1401
ctrl = 0

;---------------------------------------------------------------------------
; Knee Attack Light Air
[Statedef 1401]
type    = A
movetype= A
physics = N
velset = 4,-4
anim = 1401
hitdefpersist = 1 ;Keep the HitDef from previous state active

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,NP
time = 1

[State 1051, 1] ;Gravity
type = VelAdd
trigger1 = 1
y = .45

[State 1051, 3] ;Change state when KFM is close to ground
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1402

;---------------------------------------------------------------------------
; Knee Attack Light Land
[Statedef 1402]
type    = S
movetype= I
physics = S
anim = 1402
sprpriority = 1
velset = 0,0

[State 1052, 1] ;Reset y-position to ground level
type = PosSet
trigger1 = Time = 0
y = 0

[State 1052, 2] ;Play a sound for landing
type = PlaySnd
trigger1 = Time = 0
value = 40, 0

[State 1052, 3] ;Give KFM back control early
type = CtrlSet
trigger1 = AnimElem = 3, -1
value = 1

[State 1052, 4] ;Move KFM back a little
type = PosAdd
trigger1 = AnimElem = 4
x = -10

[State 1052, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Knee Attack Strong Start
[Statedef 1410]
type    = S
movetype= A
physics = N
juggle  = 4
poweradd= 225
velset = 0,0
anim = 1400
ctrl = 0
sprpriority = 2

[State 0, Dust]
type = Explod
trigger1 = animelem = 1
anim = 1233
pos = 0,0
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 15
scale = 1,1

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 900,76

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 90, 73
channel = 0

[State 1050, 2]
type = null;PosAdd
trigger1 = AnimElem = 2
x = 15

[State 1050, 3]
type = PosAdd
trigger1 = AnimElem = 4
x = 20

[State 1050, 4]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 125, 5
priority  = 5
guardflag = MA
pausetime = 12,12
sparkno = s6020
guard.sparkno = S6031
sparkxy = -10,-70
hitsound = s90, 8                 ;Sound to play on hit
guardsound = s6, 0  
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -3.5,-7
guard.velocity = -7
air.velocity = -3.5,-7
fall = 1
ground.cornerpush.veloff = -10
poweradd 150

[State 1400, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 1411
ctrl = 0

;---------------------------------------------------------------------------
; Knee Attack Strong Air
[Statedef 1411]
type    = A
movetype= A
physics = N
velset = 5,-6.5
anim = 1401
hitdefpersist = 1 ;Keep the HitDef from previous state active
poweradd = 0
ctrl = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,NP
time = 1

[State 1050, 4]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Hard
damage    = 45, 5
priority  = 5
guardflag = MA
pausetime = 12,12
sparkno = s6020
guard.sparkno = S6031 
sparkxy = -10,-70
hitsound = s90, 8                 ;Sound to play on hit
guardsound = s6, 0  
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -3.5,-7
guard.velocity = -7
air.velocity = -3.5,-7
fall = 1
ground.cornerpush.veloff = -20
poweradd = 85
FALL.RECOVER = 0

[State 1051, 1] ;Gravity
type = VelAdd
trigger1 = 1
y = .45

[State 1051, 3] ;Change state when KFM is close to ground
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1402

;---------------------------------------------------------------------------
;Air Multi-Kick Light
[Statedef 1500]
type    = A                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                    ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:                 ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 1500                   ;Change animation (Def: no change)
poweradd = 100                    ;Power to add (Def: 0)
sprpriority = 2 

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 900,6

[state 670, 0]
type = velset
trigger1 = time <= 10
x = 0
y = 0

[State 670, 1]
type = VelSet
trigger1 = animelem = 5
x = 8
y = 12                 ;Set p1's sprite layering priority to 2 (in front)

[State 670, hit]
type = Hitdef
trigger1 = AnimElem = 5
attr = A, SA
hitflag = MAF
guardflag = HA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 50, 5
pausetime = 2,6
guard.pausetime = 2,13
sparkno = -1
guard.sparkno = S6031 
sparkxy = 30, -60
hitsound = s90, 5                 ;Sound to play on hit
guardsound = s6, 0  
ground.type = High
air.type = High
ground.slidetime = 21
ground.hittime = 21
air.hittime = 21
guard.ctrltime = 21
persistent = 0
fall = 0
air.fall = 1
fall.recover = 0
yaccel = .5
kill = 0
guard.kill = 0
p2facing = 1
snap = 35
GETPOWER = 75

[State 670, 4]
type = ChangeState
trigger1 = Movehit
value = 1501

[State 670, 4]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1503

;---------------------------------------------------------------------------
;P1 Multi Kick Success
[Statedef 1501]
type = A
movetype = A
physics = N
anim = 1501
juggle = 0
ctrl = 0
velset = 0,0
POWERADD = 0

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 1 || animelem = 4 || animelem = 7
value = 90, 73
channel = 0

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 2 || animelem = 5 || animelem = 8
value = 900, 5

[State 671, hit1]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
trigger5 = animelem = 6
trigger6 = animelem = 7
attr = A, SA
damage = 10,5
animtype = hard
hitflag = MAF
guardflag = HA
ground.velocity = -5,0
sparkno = S6001
guard.sparkno = S6030 
sparkxy = -60,-60
hitsound = s90, 7                ;Sound to play on hit
guardsound = s6, 0  
pausetime = 2,4
guard.pausetime = 2,14
ground.hittime = 17
ground.type = high
ground.slidetime = 17
yaccel = .5
p2stateno = 1504
kill = 0
guard.kill = 0
poweradd = 100

[State 671, 3]
type = HitDef
trigger1 = animelem = 9
attr = A, SA
damage = 75,5
animtype = diagup;hard
hitflag = MAF
guardflag = HA
sparkno = S6020
guard.sparkno = S6030 
sparkxy = -60,-60
hitsound = s90, 9                 ;Sound to play on hit
guardsound = s6, 0  
pausetime = 14,12
ground.hittime = 17
ground.type = high
ground.slidetime = 17
ground.velocity = -5,-6
air.velocity = -5,-6
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .5
envshake.time = 20
envshake.ampl = 8
envshake.freq = 120
poweradd = 85

[State 671, change]
type = ChangeState
trigger1 = Animtime = 0
trigger2 = p2movetype != H
value = 1502

;---------------------------------------------------------------------------
;P1 In Air
[Statedef 1502]
type = A
movetype = A
physics = N
anim = 1502
ctrl = 0

[State 675, vel1]
type = Velset
trigger1 = 1
x = -3.25

[State 675, vel2]
type = Velset
trigger1 = time < 2
y = -7

[State 675, vel3]
type = Veladd
trigger1 = time > 1
y = .5

[State 675, 4]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1503

;---------------------------------------------------------------------------
;P1 land
[Statedef 1503]
type = S
physics = S
anim = 1503
ctrl = 0

[State 676, 1]
type = VelSet
trigger1 = Time = 0
y = 0
x = 0

[State 676, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 676, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------
; P2 hit
[Statedef 1504]
type = S
movetype = H
physics = S
anim = 5002
ctrl = 0
facep2 = 1
velset = 0,0

[State 685, anim]
type = changeanim
trigger1 = time = 5
value = 5007

[State 685 state]
type = selfstate
trigger1 = time = 30
value = 5030

;---------------------------------------------------------------------------
; Reversal Start
[Statedef 1600]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 1610                   ;Change animation (Def: no change)
poweradd = 150                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 900,43

[State 55555, ReversalDef]
type = ReversalDef
trigger1 = animelem = 2
reversal.attr = SCA,NA,NP,SA         ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
pausetime = 0,30
sparkno = 2
hitsound = S1000,0
p1stateno = 1620

[State 0, Lighting FX]
type = Explod
trigger1 = animelem = 2
anim = 1622
id = 1622
pos = 0,25
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 25
scale = .75,.98
bindtime = 25

[State 0, Lighting FX]
type = Explod
trigger1 = animelem = 2
anim = 1623
id = 1623
pos = 0,25
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 30
scale = .75,.98

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Reversal Success Hit!
[Statedef 1620]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1620
sprpriority = 2

[State 200, 2]
type = PlaySnd
trigger1 = Time = 2
value = 900, 44

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 1 
value = 90, 70
channel = 0

[State 0, Lighting FX]
type = Explod
trigger1 = animelem = 1
anim = 1621
pos = 0,10
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 30
scale = 1,1

[State 210, 2]
type = HitDef
trigger1 = time = 2
attr = S, NA
animtype  = Hard
damage    = 150
guardflag = MA
pausetime = 12,12
sparkno = s6020
guard.sparkno = S6031 
sparkxy = -10,-95
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 13
ground.velocity = -13.5,-5
air.velocity = -10.5,-3
p2stateno = 1027
ground.cornerpush.veloff = 1
fall.recover = 0
fall = 1
GETPOWER = 250

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Air Fireball
[Statedef 1700]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 85
velset = 0,0
anim =  1700
ctrl = 0
sprpriority = 2

[State 200, 2]
type = PlaySnd
trigger1 = animelem = 2
value = 90, 21
channel = 0

[State 200, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 900, 9

[State 1110, VelSet]
type = VelSet
trigger1 = time = 0
x = vel x / 4
y = vel y / 4

[State 1110, VelAdd]
type = VelAdd
trigger1 = animelem = 4,< 0
y = .019

[State 1110, PosSet]
type = PosSet
trigger1 = animelem = 4,< 0
trigger1 = pos y > -20
y = -20

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
name = "Fireball"
ID = 1701
stateno = 1701
pos = 60,-120
postype = p1
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 1.5
size.yscale = 1.5


[State 1100, CtrlSet]
type = CtrlSet
trigger1 = animelem = 5
trigger1 = var(1)
value = 1

[State 1100, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
physics = A

[State 1200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 42
ctrl = 1

;---------------------------------------------------------------------------------
;Fireball Helper Code
[Statedef 1701]
type    = A        ;AIR
movetype= A        ; ATTACK
physics = N        ; NONE
anim = 1704
sprpriority = 4
velset = 2,3

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = A, SP
damage = 90,5
animtype = Light
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 6, 6
sparkno =  s1705
guard.sparkno = S4300
sparkxy = 0,0  ; NO HIT SPARK
hitsound = S90, 50
guardsound = s6, 0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -10.5
airguard.velocity = -7.9,.8
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -5.4,-3           ;X-velocity at which opponent is pushed,
air.hittime = 12                 ;Time before opponent regains control in air
GUARD.VELOCITY = -10
palfx.time = 20 
Palfx.add = -0,-100,-0 
Palfx.sinadd = 40,80,40,10 
Palfx.color = 0 
Palfx.invertall = 1 
Palfx.color = 0 
palfx.invertall = 1 
GETPOWER = 100

[State 1210, Explod]
type = Explod
trigger1 = Movehit
ignorehitpause = 1
anim = 1706
pos =enemy,const(size.mid.pos.x),enemy,const(size.head.pos.y)
postype = p2
sprpriority = 12
persistent = 0
facing = 1
ownpal = 1
ontop = 1

[State 1210, Explod]
type = Explod
trigger1 = Movehit
ignorehitpause = 1
anim = 1706
pos =enemy,const(size.mid.pos.x)-30,enemy,const(size.mid.pos.y)+20
postype = p2
sprpriority = 12
persistent = 0
facing = 1
ownpal = 1
ontop = 1

[State 1210, Explod]
type = Explod
trigger1 = Moveguarded
ignorehitpause = 1
anim = 6030
pos =enemy,const(size.mid.pos.x),enemy,const(size.head.pos.y)
postype = p2
sprpriority = 20
persistent = 0
facing = 1
ownpal = 1
ontop = 1

[State 1210, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA, NA, SA, HA, NT, ST, HT
time = 1

[State 1210, HitBy]
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP
time = 1

[State 1210, HitOverride]
type = HitOverride
trigger1 = Time <= 0
time = -1
attr = SCA, NP, SP, HP
slot = 0
stateno = 1702

[State 9001, DestroySelf]              ;The finale. It destroys the helper in specific circumstances
type = DestroySelf
trigger1 = MoveContact             ;First condition. It destroys when the projectile hits.
trigger2 = FrontEdgeBodyDist < -30 ;Second condition. It destroys when the x distance from the front*
ignorehitpause = 1

[State 9001, PlayerPush] ;This disables the clsn2's pushing effect.
type = PlayerPush
trigger1 = 1
value = 0

[State 9001, ScreenBound];I totally forgot to include this code, sorry for that
type = ScreenBound;This will prevent the projectiles to collide with thew edge of the level
trigger1 = 1
value = 0
movecamera = 0,0

[State 200, 7]
type = ChangeState
trigger1 = movecontact
trigger2 = Vel Y > 0 && Pos Y >= -10
value = 1702

;---------------------------------------------------------------------------------
;Explode (DestroySelf CODE)
[Statedef 1702]
type    = A        ;AIR
movetype= A        ; ATTACK
physics = N                    ;Set velocity (x,y) (Def: no change)                        ;Set ctrl (Def: no change)
anim = 1705             ;Change animation (Def: no change)                   ;Power to add (Def: 0)
sprpriority = 6
velset = 0,0

[State 200, 2]
type = PlaySnd
trigger1 = time = 0
value = 90, 1

[State 1100, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = s7,30
channel = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
; Light Shock
[Statedef 1800]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 1800                   ;Change animation (Def: no change)
poweradd = -250                  ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 200, 2]
type = PlaySnd
trigger1 = Time = 2
value = 900, 44
channel = 0

[State 88888, 1]
type = Projectile
trigger1 = AnimElem =3 ;--------animation execute fireball
projanim = 1801  ;---------------fireball animation
projhitanim = -1 ;----------fireball hit animation
projpriority = 3  ;----------add this to cancel with other projectile
projsprpriority =3;----------add this to cancel with other projectile
projheightbound = -240, 100
projedgebound = 100
projremove = 0
guard.sparkno = S6031
PROJID = 1801
projremovetime = 18
projscreenbound = 100
projshadow = -1
projhits = 3;-------------------how any time it hits
projscale = 1,1;-------------------projectile size
offset = 59,-110;-----------position where the projectile comes out (use rule)
velocity = 0,0;--------------how fast and angel of the projectile
attr = S, SP
damage   = 25,10
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 6,6
hitsound   = s900,42
sparkxy = 500,500
guardsound = S6,0
ground.type = Low
ground.slidetime = 25
ground.hittime  = 15
ground.velocity = -15
air.animtype = Back
air.velocity = -4,-6
air.juggle = 3
air.fall = 1
down.velocity = -4,-6
down.hittime = 30
down.bounce = 0
fall.recover = 0
palfx.time = 40 
palfx.add = 0,50,240 
palfx.mul = 120,224,150 
palfx.sinadd = 85,55,110,10 
Palfx.color = 0 
palfx.invertall = 1 
getpower = 0
ground.cornerpush.veloff = -17

[State 0, Dust]
type = Explod
trigger1 = MOVEGUARDED
anim = 6030
pos =enemy,const(size.HEAD.pos.x),enemy,const(size.HEAD.pos.y)
postype = p2  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 24
scale = 1,1

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Strong Shock
[Statedef 1810]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 1810                   ;Change animation (Def: no change)
poweradd = -350              ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 200, 2]
type = PlaySnd
trigger1 = Time = 2
value = 900, 44

[State 88888, 1]
type = Projectile
trigger1 = AnimElem =3 ;--------animation execute fireball
projanim = 1811  ;---------------fireball animation
projhitanim = 1812  ;----------fireball hit animation
projpriority = 3  ;----------add this to cancel with other projectile
projsprpriority =3;----------add this to cancel with other projectile
projheightbound = -240, 100
projedgebound = 100
projremove = 0
PROJID = 1811
projremovetime = 18
projscreenbound = 100
projshadow = -1
projhits = 5;-------------------how any time it hits
projscale = 1,1;-------------------projectile size
offset = 59,-110;-----------position where the projectile comes out (use rule)
velocity = 0,0;--------------how fast and angel of the projectile
attr = S, SP
damage   = 35,10
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 6,6
hitsound   = s900,42
sparkxy = 500,500
guardsound = S6,0
ground.type = Low
ground.slidetime = 25
ground.hittime  = 15
ground.velocity = -25
air.animtype = Back
air.velocity = -4,-6
air.juggle = 3
air.fall = 1
down.velocity = -4,-6
down.hittime = 30
down.bounce = 0
fall.recover = 0
palfx.time = 40 
palfx.add = 0,50,240 
palfx.mul = 120,224,150 
palfx.sinadd = 85,55,110,10 
Palfx.color = 0 
palfx.invertall = 1 
getpower = 0
ground.cornerpush.veloff = -17

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Power Charge Start
[STATEDEF 9000]
TYPE = S
movetype= I
PHYSICS = S
VELSET = 0,0
CTRL = 0
anim = 9000

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S90,92

[State 4500, charge]
type = Helper
trigger1 = Time = 0
id = 9002
name = "Charge"
pos = 4,0
postype = P1
stateno = 9002
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1.15
size.yscale = 1.15

[State 0, PowerAdd]
type = PowerAdd
TRIGGERALL = COMMAND = "hold_c" 
trigger1 = POWER < POWERMAX
value = time/7.5

[State 200, 7]
type = ChangeState
trigger1 = power>=powermax
trigger2 = command!="hold_c" 
value = 9001
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = COMMAND != "hold_c" 
trigger2 = power = powermax
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Power Charge End
[STATEDEF 9001]
TYPE = S
PHYSICS = S
VELSET = 0,0
ANIM = 9001
CTRL = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S90,91

[State 0, Explod]
type = Explod
trigger1 =time =1
anim = 9003
pos = 0,0
postype = p1  ;p2,front,back,left,right
scale = 1.1,1.1

[State 9001, 1]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------------------
;Power charge Helper code
[Statedef 9002]
type = A
movetype = I
physics = N
ctrl = 0
anim = 9002
velset = 0,0
sprpriority = 0

[State 4502, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 4502, BindToParent1]
type = BindToParent
trigger1 = anim = 9002
pos = 4,0

[State 4502, BindToParent2]
type = BindToParent
trigger1 = anim = 9003
pos = 4,3

[State 4502, Anim]
type = ChangeAnim
triggerall = anim = 9002
trigger1 = root,anim = 9001
trigger2 = root,movetype = H
value = 9003

[State 4502, DestroySelf]
type = DestroySelf
trigger1 = anim = 9000 && Root,StateNo != 9002
trigger2 = anim = 9003 && animtime = 0
trigger3 = Root,stateno = [5000,5090]

;---------------------------------------------------------------------------
;                               Super Move
;---------------------------------------------------------------------------
;Specail Beam Cannon 
[Statedef 3000]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 2
poweradd = -1500

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(13) >= 0 && AnimElemTime(64) < 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 3050, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 900, 32

[State 3050, 1]
type = PlaySnd
trigger1 = AnimElem = 7
value = 900, 33

[State 3000, Super B]
type = AfterImage
trigger1 = AnimElem = 2, 1
time = 2

[State 3000, Super C]
type = AfterImageTime
trigger1 = AnimElemTime(2) >= 1 && Time < 60
time = 2

[State 0, Blue Charge FX]
type = Explod
trigger1 = animelem = 2
anim = 3004
pos = -5,-95
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 20
scale = .75,.75

[State 0, SuperPause]
type = SuperPause
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(5) < 0
time = 28
movetime = 28
pos = 0,0
movetime = 0
darken = 1
unhittable = 1
anim = -1

[State 1000, 1]
type = PlaySnd
trigger1 =  animelem = 5
value = 90, 64
channel = 0

[State 0, Helper]  ;---------helper summoning code
type = Helper
trigger1 = animelem = 7   ;--------p1 executed frame projectile
name = "Beamcannon"
ID = 3001
stateno = 3001
pos = 85,-107
postype = p1    ;p2,front,back,left,right
ownpal = 1
supermovetime = 27 ; if p2 use super if you put 90 it will move for 90 tick
pausemovetime = 1
sprpriority = 5
ignorehitpause =1


[State 0, Dust]
type = Explod
trigger1 = animelem = 7
anim = 3005
pos = 0,0
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 24
scale = 1,1

[State 3000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Fireball HELPER CODE
[Statedef 3001]
type    = A        ;AIR
movetype= A        ; ATTACK
physics = N        ; NONE                    ;Set velocity (x,y) (Def: no change)                        ;Set ctrl (Def: no change)
anim = 3001                      ;Change animation (Def: no change)                    ;Power to add (Def: 0)
sprpriority = 9
velset = 0,0     ;*****change valset to change directions and speed of projectile
ignorehitpause = 1

[State 1000, 5] ;Opponent near
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage    = 250, 50
priority  = 5
guardflag = MA
pausetime = 25,10
sparkno = s6020
guard.sparkno = S6030 
guard.sparkno = -1
sparkxy = -30,-0
hitsound   = s90,15
guardsound = s6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
fall.recover = 0
palfx.time =50
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
Palfx.color = 0
palfx.invertall = 1
GETPOWER = 0

[State 0, BLOOD]
type = Explod
trigger1 = movehit = 1
anim = 3006
pos = -40,-110
postype = p2  ;p2,front,back,left,right
ownpal = 1
sprpriority = -1
ignorehitpause = 1
removetime = 10
scale = .75,.75

[State 9001, 1]
type = ChangeState
trigger1 = animtime = 0
value = 3003
ctrl = 0

;---------------------------------------------------------------------------
;Helper Code Self Destroy
[Statedef 3003]
type    = A        ;AIR
movetype= A        ; ATTACK
physics = N                    ;Set velocity (x,y) (Def: no change)                        ;Set ctrl (Def: no change)
anim =3003                   ;Change animation (Def: no change)                   ;Power to add (Def: 0)
sprpriority = 1
velset = 0,0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0;----------when animation is complete

;---------------------------------------------------------------------------
;                               Ultra Move
;---------------------------------------------------------------------------
; Namek Rage Start
[Statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3100
ctrl = 0
sprpriority = 2
poweradd = -2500
[State 0, SuperPause]
type = SuperPause
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(9) < 0
time = 22
movetime = 22
pos = 0,0
movetime = 0
darken = 1
unhittable = 1
anim = -1

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = TIME > 12
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 3050, Super A]
type = SuperPause
trigger1 = time = 0
time = 1
pos = 0,0
anim = -1
sound = 20, 0

[State 0, Blue Charge FX]
type = Explod
trigger1 = animelem = 1
anim = 3200
pos = -5,-95
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 8
scale = .5,.5

[State 3050, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 90, 70
channel = 0

[State 3050, Super B]
type = AfterImage
trigger1 = AnimElem = 2
time = 2

[State 3050, Super C]
type = AfterImageTime
trigger1 = AnimElemTime(2) >= 0
time = 2

[State 3050, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 3050, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 3101
ctrl = 0

;---------------------------------------------------------------------------
; Namek Rage Dash
[Statedef 3101]
type    = S
movetype= A
physics = S
anim = 3101
ctrl = 0
POWERADD=0

[State 3050, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 900, 40

[State 0, P1 WIND FX]
type = Explod
trigger1 = animelem = 1
anim = 102
ID = 102
pos = 20,-70
postype = p1  ;p2,front,back,left,right
sprpriority = 2 
removetime = 20
vel = -4,0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 40

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 210, 2]
type = HitDef
trigger1 = time = 0
attr = S,HA 
animtype  = hard
damage    = 0,30
guardflag = MA
pausetime = 0,20
sparkno = -1
sparkxy = -10,-70
hitsound   = -1
guardsound = s6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 50
air.hittime  = 50
ground.velocity = -10,0
air.velocity = -8.5,0
envshake.time = 4
envshake.freq = 30
envshake.ampl = 2
fall.recover = 0
p1stateno = 3102
p2stateno = 3110
snap = 200

[State 0, Dust]
type = Explod
trigger1 = animelem = 1
anim = 3005
pos = 0,0
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 24
scale = 1,1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 50
x = -5
y = -5

[State 3051, 1]
type = AfterImageTime
trigger1 = AnimTime < -2
time = 2

[State 3051, 2]
type = ChangeState
trigger1 = moveGUARDED 
value = 3300
ctrl = 0

[State 3051, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Namek Rage Block
[Statedef 3300]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
ANIM = 3300

[State 3051, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------
;Namek Rage Hit!
[Statedef 3102]
type    = S
movetype= A
physics = S
anim = 3102
ctrl = 0
POWERADD = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,2

[State 0, Blue Charge FX]
type = Explod
trigger1 = animelem = 43
anim = 3105
pos =19,-122
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 20
scale = .75,.75

[State 1200, arm extend fx]
type = PlaySnd
trigger1 = AnimElem = 23
value = 900, 5

[State 1200, Piccolo Fireball Voice]
type = PlaySnd
trigger1 = AnimElem = 44
value = 90, 39
channel = 0

[State 1200, fireball blasting sound]
type = PlaySnd
trigger1 =  time =221||time =226||time =232
value = 900, 33

[State 1200, 1]
type = PlaySnd
trigger1 = AnimElem = 1 || animelem = 13|| animelem = 24
value = 90, 45
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 33
x = 0
y = -3

[State 0, PosSet]
type = PosSet
trigger1 = time <=20
x = 0
y = 0

[State 0, PosFreeze]
type = PosFreeze
trigger1 = AnimElemTime(36) >= 0 && AnimElemTime(45) < 0
value = 1

[State 1200, 1]
type = PlaySnd
trigger1 = AnimElem = 1 || animelem = 13
value = 90, 45
channel = 0

[State 1200, 1]
type = PlaySnd
trigger1 = AnimElem = 4 || animelem = 36
value = 90, 43
channel = 0

[State 1200, 1]
type = PlaySnd
trigger1 = AnimElem = 17|| animelem = 21
value = 90, 44
channel = 0

[State 3050, hit sound]
type = PlaySnd
trigger1 = AnimElem = 1
value = 900, 4

[State 3050, hit sound]
type = PlaySnd
trigger1 =  AnimElem = 4 || ANIMELEM = 14 
value = 90, 8 

[State 3050, hit sound]
type = PlaySnd
trigger1 =  AnimElem = 11 || animelem = 17 
value = s90, 11 

[State 3050, grab sound]
type = PlaySnd
trigger1 = AnimElem = 21
value = 900, 104 

[State 3050, Air launch fx]
type = PlaySnd
trigger1 = AnimElem = 30
value = 90, 17 

[State 3050, elbow hit sound]
type = PlaySnd
trigger1 = AnimElem = 28
value = 90, 11

[State 3050, elbow hit sound]
type = PlaySnd
trigger1 = AnimElem = 36
value = 90, 12 

[State 3050, Super B]
type = AfterImage
trigger1 = AnimElem = 2
time = 2

[State 3050, Super C]
type = AfterImageTime
trigger1 = AnimElemTime(2) >= 0
time = 2

[State 0, Hit Spark]
type = Explod
trigger1 = animelem = 1
anim = 6001
pos = -20, -76
postype = p2  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 10
scale = 1,1

[State 0, Hit Spark]
type = Explod
trigger1 = animelem = 3 || animelem = 13
anim = 6010
pos = -60, -120
postype = p2  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 10
scale = 1,1

[State 0, Hit Spark]
type = Explod
trigger1 = animelem = 8
anim = 6010
pos = -70, -100
postype = p2  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 10
scale = 1,1

[State 0, Hit Spark]
type = Explod
trigger1 = animelem = 11
anim = 6010
pos = -55, -76
postype = p2  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 10
scale = 1,1

[State 0, Hit Spark]
type = Explod
trigger1 = animelem =17
anim = 6020
pos = -90, -85
postype = p2 ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 15
scale = 1,1

[State 0, claw]
type = Explod
trigger1 = animelem = 23
anim = 6020
pos = -120, -100
postype = p2  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 15
scale = 1,1

[State 0, air Launcher]
type = Explod
trigger1 = animelem = 28
anim = 6020
pos = -40, -100
postype = p2  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 15
scale = 1,1

[State 0, elbow smash!]
type = Explod
trigger1 = animelem =36
anim = 6020
pos = -40, -20
postype = p2  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 15
scale = 1,1

[State 603, 4]
type = EnvShake
trigger1 = animelem = 36
persistent = 0
time = 10
ampl = -4
freq = 200
phase = 8

[State 0, HitAdd]
type = HitAdd
trigger1 = AnimElem = 1|| AnimElem = 4 || ANIMELEM = 14 ||  AnimElem = 11  || AnimElem = 17 ||  AnimElem = 21||  AnimElem = 34||  AnimElem = 36
value = 1
ignorehitpause = 1

[State 2601, 1]
type = TargetLifeAdd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
trigger3 = AnimElem = 11
trigger4 = AnimElem = 14
trigger5 = AnimElem = 17
trigger5 = AnimElem = 21
value = -15
kill = 0

[State 2601, 1]
type = TargetLifeAdd
trigger1 = AnimElem = 34
trigger2 = AnimElem = 36
value = -20
kill = 0

[State 88888, 1]
type = Projectile
trigger1 = time =221 ||time =223||time =226||time =229||time =232
projanim = 1701  ;---------------fireball animation
projhitanim = 1007  ;----------fireball hit animation
projpriority = 3  ;----------add this to cancel with other projectile
projsprpriority =3;----------add this to cancel with other projectile
projheightbound = -240, 100
projedgebound = 100
projscreenbound = 100
projshadow = -1
projhits = 1;-------------------how any time it hits
projscale = 1,1;-------------------projectile size
offset = 50,-100;-----------position where the projectile comes out (use rule)
velocity = 5,3;--------------how fast and angel of the projectile
attr = S, SP
damage   = 80,5
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 15,12
hitsound   = s900,56
sparkxy = 500,500
guardsound = S6,0
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -10
guard.cornerpush.veloff = -10
airguard.cornerpush.veloff = -7
GROUND.cornerpush.veloff = -12
air.animtype = Back
air.velocity = -4,-6
air.juggle = 3
air.fall = 1
down.velocity = -4,-6
down.hittime = 30
down.bounce = 0
fall.recover = 0
GETPOWER = 100
projscale = 2,2
envshake.time = 16
envshake.ampl = -4
envshake.freq = 90
GETPOWER = 150

[state 250]
type = statetypeset
trigger1 = animelem = 39
statetype=A
physics = N
movetype =A

[State 0, Gravity]
type = Gravity
trigger1 = time >237

[State 0, VelSet]
type = VelSet
trigger1 = animelem >= 39
x = -3

[State 1051, 3] ;Change state when KFM is close to ground
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 3104
ctrl = 0

;-----------------------------------------------------------------
;Namek Rage Land
[Statedef 3104]
type    = S
movetype= I
physics = S
anim = 3107
sprpriority = 1
velset = 0,0
ctrl = 0
poweradd = 250

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S90,91

[State 1052, 1] ;Reset y-position to ground level
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 9005
pos = 0,0
postype = p1  ;p2,front,back,left,right
scale = .8,1.1

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 3109
pos = 0,0
postype = p1  ;p2,front,back,left,right
scale = .6,1.1
sprpriority = 2

[State 0, P2 Land FX]
type = Explod
trigger1 = animelem = 1
anim = 3112
pos = 0,8
postype = p2  ;p2,front,back,left,right
scale =1.5,1
sprpriority = -1

[State 1052, 2] 
type = PlaySnd
trigger1 = Time = 0
value = 900, 8

[State 1052, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Namek Rage Start (P2 HIT)
[Statedef 3110]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 1
x = -10

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = -5

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = -2.5

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = -.35

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 29
y = -8

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 31
y = .01

[State 0, PosFreeze]
type = PosFreeze
trigger1 = animelem = 36
value = 1

[State 0, PosSet]
type = PosSet
trigger1 = time <= 20
x = 0
y = 0

[State 1560, 2]
type = ChangeAnim2
trigger1 = Time = 0
value = 3110

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 37
x = -50
y= 7

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem >=38
x = -100

[State 1051, 3] ;Change state when KFM is close to ground
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 3111
ctrl = 0

;---------------------------------------------------------------------------
; Namek Rage (P2 HIT Crash in Ground and Dizzy)
[Statedef 3111]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 0, PosSet]
type = PosSet
trigger1 = time =0
y = 0

[State 820, 1]
type = ChangeAnim2
triggerall = name = "Piccolo_EB"  && authorname = "Ironjw"
trigger1 = Time = 0
value = 3111
 
[State 820, 1 Alternate]
type = ChangeAnim2
triggerall = name != "Piccolo_EB"  && authorname != "Ironjw"
Trigger1 = Time = 0
value = 3114

[State 1200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;                       SUPER HELLZONE GRENADE
;---------------------------------------------------------------------------
;SUPER HELLZONE GRENADE
[Statedef 3500]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 3500                   ;Change animation (Def: no change)
poweradd = -1500                  ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
hitdefpersist = 1 

[State 0, SuperPause]
type = SuperPause
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
time = 10
movetime = 10
pos = 0,0
movetime = 0
darken = 1
unhittable = 1
anim = -1

[State 3050, Super B]
type = AfterImage
trigger1 = AnimElem = 2
time = 2

[State 3050, Super C]
type = AfterImageTime
trigger1 = AnimElemTime(2) >= 0
time = 2

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[state 250]
type = statetypeset
trigger1 = ANIMELEM = 2
statetype=A
physics = N
movetype =A

[State 0, VelSet]
type = VelSet
trigger1 = ANIMELEM = 2
x = 1.5
y = -2

[State 0, Gravity]
type = Gravity
trigger1 = time >35

[State 0, VelSet]
type = VelSet
trigger1 = ANIMELEM = 4
y = 2

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 90, 40
channel = 0

[State 200, 2]
type = PlaySnd
trigger1 = animelem = 2
value = 90, 17

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 25, 0                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
pausetime = 6, 6                ;Time attacker pauses, time opponent shakes
sparkno = s6020
guard.sparkno = S6030                     ;Spark anim no (Def: set above)
sparkxy = -20, -100              ;X-offset for the "hit spark" rel. to p2,
hitsound = s900, 41                 ;Sound to play on hit
guardsound = s6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15            ;Time opponent is in hit state
ground.velocity = -5,-15            ;Velocity at which opponent is pushed
airguard.velocity = -5,-15    ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
air.hittime = 15                 ;Time before opponent regains control in air
poweradd = 0
p2stateno = 3600
envshake.time = 16
envshake.ampl = -4
envshake.freq = 90

[State 0, Dust]
type = Explod
trigger1 = animelem = 2
anim = 1231
pos = 0,0
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 4
ignorehitpause = 1
removetime = 10
scale = .85,.75

[State 1052, 5]
type = ChangeState
trigger1 = movehit
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 3502
ctrl = 0

[State 1051, 3] ;Change state when KFM is close to ground
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 3501
ctrl = 0

;-----------------------------------------------------------------
; Miss Land
[Statedef 3501]
type    = S
movetype= I
physics = S
anim = 3501
sprpriority = 1
velset = 0,0
ctrl = 0
poweradd = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1052, 1] ;Reset y-position to ground level
type = PosSet
trigger1 = Time = 0
y = 0

[State 1052, 2] 
type = PlaySnd
trigger1 = Time = 0
value = 900, 8

[State 1052, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------
; Hit Success! Piccolo Shoot Fireballs
[Statedef 3502]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 3502                 ;Change animation (Def: no change)
poweradd = 0                ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
hitdefpersist = 1 

[State 3050, Super B]
type = AfterImage
trigger1 = AnimElem = 2
time = 2

[State 3050, Super C]
type = AfterImageTime
trigger1 = AnimElemTime(2) >= 0
time = 2

[State 200, 2]
type = PlaySnd
trigger1 = animelem = 2  || animelem =6  || animelem = 10 || animelem = 14
value = 900, 19
channel = 0

[State 200, 2]
type = PlaySnd
trigger1 = animelem = 16
value = 90, 21
channel = 0

[State Fireball Shoot Sound]
type = PlaySnd
trigger1 = animelem = 2  || animelem =6  || animelem = 10 || animelem = 14
value = 90, 47
channel = 0

[State 0, Pause]
type = Pause
trigger1 = time = 10
time = 32
movetime = 31
pausebg = 1

[State 1052, 1] ;Reset y-position to ground level
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 0, BLOOD]
type = Explod
trigger1 = animelem = 1
anim = 3503
pos = -40,0
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 3
ignorehitpause = 1
removetime = 10
scale = 1,1

[State 0, VelSet]
type = VelSet
trigger1 = time = 1
x = -15

[State 1000, Helper]
type = Helper
triggerall = NumHelper(3510)<10
trigger1 = animelem = 2 || animelem = 4 || animelem =6 || animelem = 8 || animelem = 10 || animelem = 12
name = "Fireball"
ID = 3510
stateno = 3510
pos = 55,-140
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = 5
supermovetime = 30

[State 1000, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------
; HELLZONE GRENADE HELPER CODE
[Statedef 3510]
type    = A
movetype= A
physics = N
anim = 3510
sprpriority = 5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VarSet]
type = VarSet
trigger1 = !time
fv = 30
value = ((random/500.0)*100-100)*ifelse(random%2=0,1,-1)

[State 0, VarSet]
type = VarSet
trigger1 = !time
fv = 31
value = (random/500.0)*60+60

[State 1210, PosSet]
type = PosSet
trigger1 = time = [0,40]
x = pos x - (pos x - enemy,pos x + fvar(30))/15
y = pos y - (pos y - enemy,pos y + fvar(31))/15

[State 1210, PosSet]
type = Posset
trigger1 = time >= 70
x = pos x - (pos x - enemy,pos x)/10
y = pos y - (pos y - enemy,pos y + 50)/10

[State 1210, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NT,ST,HT,NP,SP,HP
stateno = 3510
time = 1

[State 1210, 2]
type = HitDef
trigger1 = time > 29
attr = A, sP
animtype  = up
damage    = 75,25
guardflag = MA
priority = 1,Hit
pausetime = 0,6
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound   = S2,0
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 16
ground.velocity = -4,-4
air.velocity = -2.5,-4
fall = 1
fall.recover = 0
air.fall = 1
envshake.time = 16
envshake.ampl = -4
envshake.freq = 90

[State 1210, 5]
type = Changestate
trigger1 = movecontact
trigger2 = time = 70
trigger3 = parent, stateno !=3502
value = 3511

;----------------------------------------------------------------
; HELLZONE GRENADE KILLSELF
[Statedef 3511]
anim = 3514
sprpriority = 5
velset = 0,0

[State 200, 2]
type = PlaySnd
trigger1 = animelem = 1
value = 900, 52
channel = 0

[State 1000, 5]
type = Destroyself
trigger1 = !animtime

;-----------------------------------------------------------------
;; HELLZONE GRENADE P2 HIT
[Statedef 3600]
type = A
movetype = H
physics = N
velset = -7,-5.5
ctrl = 0

[State 0, PosFreeze]
type = PosFreeze
trigger1 = time > 10
value = 1

[State 1560, 2]
type = ChangeAnim2
trigger1 = Time = 0
value = 3600

[State 2000, 0]
type = ChangeState
trigger1 = AnimTime = 0
value = 5050
ctrl = 0

;-----------------------------------------------------------------
;-----------------------------------------------------------------
;Dizzy Start
[Statedef 90000]
type = S
physics = S
movetype = H
ctrl = 0

[State 3000, 1]
type = PlaySnd
trigger1 = time = 1
value = 900, 54

[State 3000, 1]
type = PlaySnd
trigger1 = time = 10
trigger2 = time =20
value = 900, 53
CHANNEL = 0

[State 0, StopSnd]
type = StopSnd
trigger1 = movehit = 1
value = 900, 53
channel = -1

[State 3000, 1]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 6
value = 900, 16

[State 9000, Change Animation]
type = ChangeAnim
trigger1 = Time = 0
value = 5301

[State 9001: PalFX]
type = PalFX
trigger1 =1
time = 3
add = 35,35,35
mul = 250,250,250

[State 0, Explod]
type = Explod
trigger1 = time = 1
anim = 5302
pos = ceil(0*const(size.xscale)),ceil(-130*const(size.yscale))
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
sprpriority =6

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = movehit = 1
id = 5302

[State 9000, Button Jam]
type = ChangeState
triggerall = Random <= 500
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------
;DIZZY PART 2
[Statedef 90100] ;Still being hit
type = S
movetype = H
physics = N
ctrl = 0

[State 9010, Can't Hit]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9010, Clear Stun]
type = VarSet
trigger1 = Time = 0
v = 10
value = 0

[State 9010, Fall]
type = ChangeState
trigger1 = HitShakeOver
value = 9011

;---------------------------------------------------------------------------------------------
;DIZZY PART 3
[Statedef 9011] ;Fall
type = A
movetype = H
physics = N
velset = -3, -4
ctrl = 0
anim = 5090;9011

[State 9011, Grav]
type = VelAdd
trigger1 = Pos Y < 0
y = 0.35

[State 9011, Can't Hit]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9011, Fall]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 9012
ctrl = 0

;---------------------------------------------------------------------------------------------
;DIZZY PART 3
[Statedef 9012] ;Ground/Getup
type = S
movetype = H
physics = S
ctrl = 0
anim = 5110

[State 9012, Stop Falling]
type = VelSet
trigger1 = Time = 0
Y = 0

[State 9012, Can't Hit]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9012, Get Up]
type = ChangeAnim
trigger1 = Time = 10
value = 5120

[State 9012, Dizzy]
type = ChangeState
trigger1 = (AnimTime = 0) && (Anim = 5120)
value = 90000

;===============================================================================
;Piccolo call Gohan Striker!!!
[Statedef 499]
type    = S
movetype= I
physics = N
juggle  = 0
poweradd= -1000
velset = 0,0
anim = 195 ; i used the taunt animation
ctrl = 0
sprpriority = 2

[State 640, 2]
type = PlaySnd
trigger1 = ANIMELEM = 1
value = 90, 23
CHANNEL = 0

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player ; helpertype = player, means the helper is confined to the screen, and may not leave it.
name = "Gohan"
ID = 500
stateno = 500
pos = -30,-70
postype = back
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 2000, 0]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Gohan Striker Jumping In
[Statedef 500]
type    = A
physics = N
juggle  = 0
poweradd= 0
velset = 3,-3
anim = 500
sprpriority = 2

[State 0, Gravity]
type = Gravity
trigger1 = time > 10

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 1
stateno = 503 ; hit state
time = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NT,ST,HT
time = 1

[State 2010, 0]
type = ChangeState
trigger1 = Pos Y > 0 && Vel Y > 0
value = 501  ; ice attack

;---------------------------------------------------------------------------
; Gohan Landing And Attack
[Statedef 501]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 501
sprpriority = 2

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 3109
pos = 0,0
postype = p1  ;p2,front,back,left,right
scale = .35,.35
sprpriority = 2

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem >= 2
x = 3

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 6001 && animtime = 0
value = 6002
elem = 1

[State 640, 2]
type = PlaySnd
trigger1 = ANIMELEM = 3
value = 9000, 8

[State 640, Gohan attack]
type = PlaySnd
trigger1 = animelem = 2||animelem = 4 || animelem = 5 || animelem = 7  ||animelem =8 ||animelem = 10
value = 90, 24
CHANNEL = 0

[State 200, 1]
type = HitDef
trigger1 = animelem = 2||animelem = 4 || animelem = 5 || animelem = 7  ||animelem =8 ||animelem = 10
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 25, 5                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
pausetime = 4, 4                ;Time attacker pauses, time opponent shakes
sparkno = s6000 
guard.sparkno = S6030                    ;Spark anim no (Def: set above)
sparkxy = -12, -70               ;X-offset for the "hit spark" rel. to p2,
hitsound = 5, 0                  ;Sound to play on hit
guardsound = S6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -2.5            ;Velocity at which opponent is pushed
airguard.velocity = -2,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
air.hittime = 15                 ;Time before opponent regains control in air
GETPOWER = 50

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 1
stateno = 503
time = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NT,ST,HT
time = 1

[State 2011, 0]
type = ChangeState
trigger1 = animtime = 0
value = 502 ; dash back

;---------------------------------------------------------------------------
; Gohan Striker Run Off
[Statedef 502]
type    = S
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 502
sprpriority = 2

[State 640, 2]
type = PlaySnd
trigger1 = ANIMELEM = 1
value = 900, 52

[State 0, Dust]
type = Explod
trigger1 = animelem = 2
anim = 505
pos = 0,0
postype = p1  ;p2,front,back,left,right
ownpal = 1
sprpriority = 5
ignorehitpause = 1
removetime = 18
scale = .5,.5
vel = -3,0

[State 2012, VelSet]
type = VelSet
trigger1 = animelem = 2
x = -15

[State 2012, 0]
type = Destroyself
trigger1 = time = 50

;---------------------------------------------------------------------------
; Gohan Striker been Hit   (no hit box)
[Statedef 503]
type    = A
movetype= H
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 503
sprpriority = 2

[State 640, Ouch! sound]
type = PlaySnd
trigger1 = ANIMELEM = 1
value = 90, 94

[State 640, Slam on ground sound]
type = PlaySnd
trigger1 = ANIMELEM = 4
value = 900, 22

[State 2020, VelSet]
type = VelSet
trigger1 = animelem = 2
x = -3
y = -3

[State 0, Gravity]
type = Gravity
trigger1 = time > 10

[State 2020, 0]
type = ChangeState
trigger1 = Pos Y > 0 && Vel Y > 0
value = 504

;---------------------------------------------------------------------------
; Gohan Striker Falls On Ground get up (no hit box)
[Statedef 504]
type    = A
movetype= H
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 504
sprpriority = 2

[State 0, FX knock down land]
type = Explod
trigger1 = TIME = 0
anim = 506
ID = 506
pos = 0,0
postype = p1  ;p2,front,back,left,right
sprpriority = 6
scale = .5,.5

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 2020, 0]
type = ChangeState
trigger1 = animtime = 0
value = 502

;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------
[statedef -2]
;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[State -2, DTC]
type = DisplayToClipboard
trigger1 = 1
text = "P2BodyDist X = %d, P2BodyDist Y = %d, Frontedgedist = %d, Backedgedist = %d"
params = Floor(P2BodyDist X), Floor(P2BodyDist Y), frontedgedist, backedgedist
IgnoreHitPause = 1


[State -2, 1]
type = RemoveExplod
trigger1 = NumProj = 0
id = 1008

[State -2, reversal hit success remove affect]
type = RemoveExplod
trigger1 = p2movetype = H
id = 1622

[State -2, reversal hit success remove affect]
type = RemoveExplod
trigger1 = p2movetype = H
id = 1623

[State -2, reversal p1 Been Hit Remove Affect]
type = RemoveExplod
trigger1 = p2movetype = H
id = 1622

[State -2, reversal p1 Been Hit Remove Affect]
type = RemoveExplod
trigger1 = p2movetype = H
id = 1623

[State -2, Player been hit Remove Flame]
type = RemoveExplod
trigger1 = movetype = H
id = 1023

[State -2, FLAME! BLOCK SPARK]
type = Explod
trigger1 = (projguarded1023 = 1)  && (numexplod(6030) = 0)
anim = 6030
id = 6030
pos =enemy,const(size.mid.pos.x),enemy,const(size.mid.pos.y)
postype = p2
bindtime = 100
bind = p2
sprpriority = 3

[State -2, FLAME! BURN AFFECT]
type = Explod
trigger1 = (projHIT1023 = 1)  && (numexplod(1024) = 0)
anim = 1024
id = 1024
pos = 10,-50
postype = p2
bindtime = 100
bind = p2
sprpriority = 3

[State -2, FLAME! BURN AFFECT]
type = Explod
trigger1 = (projhit1023 = 1)  
anim = 1024
id = 1024
pos = -30,-100
postype = p2
bindtime = 80
bind = p2
sprpriority = -1

[State -2, SHOCK! AFFECT]
type = Explod
trigger1 = (projhit1801 = 1)  && (numexplod(1082) = 0)
anim = 1802
id = 1802
pos = -10,-50
postype = p2
bindtime = 20
bind = p2
sprpriority = 3
SCALE = 1,2

[State -2, SHOCK! AFFECT]
type = Explod
trigger1 = (projhit1811 = 1)  && (numexplod(1082) = 0)
anim = 1802
id = 1802
pos = -10,-50
postype = p2
bindtime = 30
bind = p2
sprpriority = 3
SCALE = 1,2

;---------------------------------------------------------------------------------
;Piccolo Been Hit Sound
[State -2, sethitvoice]
type = VarRandom
triggerall = Time = 1
trigger1 = stateno = 5000
trigger2 = stateno = 5010
trigger3 = stateno = 5020
trigger4 = stateno = 5030
v = 3
range = 0,11

[State -2, hitvoice1]
type = PlaySnd
triggerall = Time = 1
triggerall = Var(3) = [0,2]
triggerall = alive = 1
trigger1 = stateno = 5000
trigger2 = stateno = 5010
trigger3 = stateno = 5020
trigger4 = stateno = 5030
value = 90,77

[State -2, hitvoice2]
type = PlaySnd
triggerall = Time = 1
triggerall = Var(3) = [3,5]
triggerall = alive = 1
trigger1 = stateno = 5000
trigger2 = stateno = 5010
trigger3 = stateno = 5020
trigger4 = stateno = 5030
value = 900,78


[State -2, hitvoice3]
type = PlaySnd
triggerall = Time = 1
triggerall = Var(3) = [9,11]
triggerall = alive = 1
trigger1 = stateno = 5000
trigger2 = stateno = 5010
trigger3 = stateno = 5020
trigger4 = stateno = 5030
value = 900,79

[State -2, hitvoice3]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 5070
value = 900,29

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

;This controller plays a sound everytime KFM lands from a jump, or
;from his back-dash.
[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
value = 90, 82

[State 3050, back dash sound]
type = PlaySnd
triggerall = Time = 5
trigger1 = stateno = 105
value = 900, 78


;---------------------------------------------------------------------------------Dizzying
[State -3, Add Stun for Light]
type = VarAdd
triggerall = Time = 2
trigger1 = ((StateNo = 5001) && (Anim = 5000)) || ((StateNo = 5001) && (Anim = 5010)) || ((StateNo = 5011) && (Anim = 5020))
persistent = 0
ignorehitpause = 1
v = 10
value = 15
;Dizzying
[State -3, Add Stun for Medium]
type = VarAdd
triggerall = Time = 4
trigger1 = ((StateNo = 5001) && (Anim = 5001)) || (( StateNo = 5001) && (Anim = 5011)) || ((StateNo = 5011) && (Anim = 5021))
persistent = 0
ignorehitpause = 1
v = 10
value = 85
 ;Dizzying
[State -3, Add Stun for Heavy]
type = VarAdd
triggerall = Time = 6
trigger1 = ((StateNo = 5001) && (Anim = 5002)) || ((StateNo = 5001) && (Anim = 5012)) || ((StateNo = 5011) && (Anim = 5022))
persistent = 0
ignorehitpause = 1
v = 10
value = 125
;Dizzying
[State -3, Reduce Stun]
type = VarAdd
trigger1 = Var(10) > 0
ignorehitpause = 1
v = 10
value = -1
;Dizzying
[State -3, Dizzy Self]
type = ChangeState
trigger1 = (Var(10) >= 400) && (StateNo != [90000,90070])
value = 90100 ;Fall down before dizzy
ignorehitpause = 1

;-------------------------------------------------------------------------------
;          DAMAGE DAMPENER ( EVERY HIT COUNT REDUCE DAMAGE BY 20%)
;-------------------------------------------------------------------------------

[state -3, DAMAGE dampener]
type = attackmulset
trigger1 = numtarget >= 1
value = 0.75


[State -3, 1]
type = Helper
trigger1 = NumHelper(999999) = 0
trigger1 = var(59) != 1
trigger1 = var(37) != 1
helpertype   = Normal
name = "??????"
id = 999999
pos = 10000,10000
postype = p1
facing = 0
stateno = 999999
keyctrl = 1
ownpal = 1
supermovetime = 0
pausemovetime = 0

;---------------------------------------------------------------------------
;                                     AI
;---------------------------------------------------------------------------


[Statedef 999999]
ctrl = 0

[State 9999, 0]
type = Turn
trigger1 = facing != parent, facing

[State 9999,1]
type = ParentVarSet
triggerall = var(43) != 1
trigger1 = (parent, command = "a")&&(command != "a")
trigger2 = (parent, command = "b")&&(command != "b")
trigger3 = (parent, command = "c")&&(command != "c")
trigger4 = (parent, command = "x")&&(command != "x")
trigger5 = (parent, command = "y")&&(command != "y")
trigger6 = (parent, command = "z")&&(command != "z")
var(59) = 1


[State 9999,2]
type = VarSet
triggerall = var(43) != 1
trigger1 = parent, command = "a"
trigger2 = parent, command = "b"
trigger3 = parent, command = "c"
trigger4 = parent, command = "x"
trigger5 = parent, command = "y"
trigger6 = parent, command = "z"
var(43) = 1

[State State 9999,3]
type = ParentVarSet
trigger1 = var(43) = 1
var(37) = 1

[State State 9999,4]
type = DestroySelf
trigger1 = p2life = 0
trigger2 = (Parent,var(59) = 1)
trigger3 = var(43) = 1



