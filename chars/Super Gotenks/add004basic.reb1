; ADD004 BASIC PIEs ReBuilded CNS (21-10-2016)



;==============================================================================
; {C:\Users\User\Desktop\proyectodbz\chars\Super Gotenks\SuperGotenks.cns}
;==============================================================================

; Constants and state file.
; There are comments scattered through this file, so you may like to
; take a look if would like to learn more about the cns.

[Data]
life = 1000			;Amount of life to start with
attack = 100		;attack power (more is stronger)
defence = 100
power=5000		;defensive power (more is stronger)
fall.defence_up = 50	;Percentage to increase defense everytime player is knocked down
liedown.time = 60		;Time which player lies down for, before getting up
airjuggle = 1000000	;Number of points for juggling
sparkno = 2			;Default hit spark number for HitDefs
guard.sparkno = 40	;Default guard spark number
KO.echo = 0			;1 to enable echo on KO
volume = 0			;Volume offset (negative for softer)
IntPersistIndex = 58	;Variables with this index and above will not have their values
FloatPersistIndex = 40  ;reset to 0 between rounds or matches. There are 60 int variables,
  				;indexed from 0 to 59, and 40 float variables, indexed from 0 to 39.
  				;If omitted, then it defaults to 60 and 40 for integer and float
  				;variables repectively, meaning that none are persistent, i.e. all
  				;are reset. If you want your variables to persist between matches,
  				;you need to override state 5900 from common1.cns.

[Size]
xscale = 1
yscale = 1
ground.back = 18
ground.front = 18
air.back = 12
air.front = 12
height = 60
attack.dist = 160
proj.attack.dist = 90
proj.doscale = 0
head.pos = 3, -84
mid.pos = 0, -56
shadowoffset = 0
draw.offset = 0,0

[Velocity]
walk.fwd  = 2.6
walk.back = -2.28
run.fwd  = 7.52, 0
run.back = -7,-3
jump.neu = 0, -10
jump.back = -3.2
jump.fwd = 3
runjump.back = -4.2,-10
runjump.fwd = 6.2,-10
airjump.neu = 0,-8.1
airjump.back = -2.55
airjump.fwd = 2.5
air.gethit.groundrecover = -.15,-3.5
air.gethit.airrecover.mul = .5,.2
air.gethit.airrecover.add = 0,-4.5
air.gethit.airrecover.back = -1
air.gethit.airrecover.fwd = 0
air.gethit.airrecover.up = -2
air.gethit.airrecover.down = 1.5

[Movement]
airjump.num = 0
airjump.height = 35
yaccel = .5
stand.friction = .85
crouch.friction = .82
stand.friction.threshold = 2
crouch.friction.threshold = .05
air.gethit.groundlevel = 25
air.gethit.groundrecover.ground.threshold = -20
air.gethit.groundrecover.groundlevel = 10
air.gethit.airrecover.threshold = -1
air.gethit.airrecover.yaccel = .35
air.gethit.trip.groundlevel = 15
down.bounce.offset = 0, 20
down.bounce.yaccel = .4
down.bounce.groundlevel = 12
down.friction.threshold = .05
;---------------------------------------------------------------------------
; Format:
; [Statedef STATENO]
; type = ?      S/C/A/L  stand/crouch/air/liedown
; movetype = ?  I/A/H    idle/attack/gethit
; physics = ?   S/C/A/N  stand/crouch/air/none
; juggle = ?             air juggle points move requires
;
; [State STATENO, ?]     ? - any number you choose
; type = ?
; ...

;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = IfElse(random%2,181,182)

;---------------------------------------------------------------------------
; Win pose 1
;胜利
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S180,0
ignorehitpause =1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;胜利2
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S181,IfElse(random%3=0,0,IfElse(random%2,1,2))
ignorehitpause =1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem =3
value = 7,9
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem =2
value = 5,8
ignorehitpause = 1


[State 705, 2]
type = Explod
triggerall = numexplod(901)= 0
trigger1 = AnimElem =2
anim = 900
scale = .4,.4
;scale = .9,.7
ID = 901
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
removetime = 45
supermove = 1
removeongethit = 1

[State 1900, dust]
type = explod
triggerall = numexplod(914)= 0
trigger1 = AnimElem =2
anim = 914
scale = .8,.8
sprpriority = 2
bindtime = -1
ownpal = 1
removetime = 45
supermove = 1
removeongethit = 1
ignorehitpause = 1
id = 914
facing = -1

[State 705, 2]
type = Explod
trigger1 = AnimElem =3
anim = 905
scale = .4,.4
;scale = .9,.7
ID = 2405
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
supermove = 1
removeongethit = 1

[State 181, ]
type = AssertSpecial
trigger1 = time = [0,370]
flag = roundnotover
;---------------------------------------------------------------------------
; Introduction
; 开场-融合
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 190, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S190,0
volumescale =20
ignorehitpause =1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S190,IfElse(random%2,3,2)
ignorehitpause =1


[State 1000, 5]
type = Explod
trigger1 = time=95
anim = 8025
sprpriority = 100
postype = p1
pos = 0,0
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 705, 2]
type = Explod
trigger1 = animelem = 1
trigger1 = numexplod(193)=0
anim = 193
id = 193
;scale = .5,.5
sprpriority = 3
postype = p1
pos = 0,-50
bindtime = -1
removetime=100
removeongethit = 1

[State 705, 2]
type = Explod
trigger1 = animelem = 1
anim = 191
;scale = .5,.5
sprpriority = 3
postype = p1
pos = -30,0
bindtime = -1
removeongethit = 1

[State 705, 2]
type = Explod
trigger1 = animelem = 1
anim = 192
;scale = .5,.5
sprpriority = 3
postype = p1
pos = 30,0
bindtime = -1
removeongethit = 1

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 0


;开场-蓄气
[Statedef 191]
type = S
ctrl = 0
anim = 194
velset = 0,0

[State 190, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 194


[State -3, Landing Sound]
type = PlaySnd
;triggerall = gametime % 150 = 0
trigger1 = AnimElem =5
value = 5,15
removetime = 90


[State 1000, Explod]
type = Explod
triggerall = numexplod(7021) = 0
trigger1 = AnimElem =5
anim = 7022
ID = 7022
pos = 0,10
scale = .8,.8
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = 114
sprpriority = 90
removeongethit = 1
supermove = 1
pausemove = 1

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 5,8
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1800,1
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 190,1
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem =35
value = 7,9
ignorehitpause = 1


[State 705, 2]
type = Explod
trigger1 = AnimElem =35
anim = 905
scale = .5,.4
;scale = .9,.7
ID = 2405
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
supermove = 1
removeongethit = 1

[State 705, 2]
type = Explod
triggerall = numexplod(2405)= 0
trigger1 = AnimElem =5
anim = 900
scale = .5,.4
;scale = .9,.7
ID = 2405
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
removetime = 90
supermove = 1
removeongethit = 1

[State 1900, dust]
type = explod
triggerall = numexplod(914)= 0
trigger1 = AnimElem =5
anim = 914
scale = .8,.8
sprpriority = 2
bindtime = -1
ownpal = 1
removetime = 90
supermove = 1
removeongethit = 1
ignorehitpause = 1
id = 914
facing = -1

[State 1000, 5]
type = Explod
trigger1 = time=70
anim = 8025
sprpriority = 100
postype = p1
pos = 0,0
bindtime = 1
supermove = 1
under = 0
ownpal = 1


[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 0


;开场-嘲讽
[Statedef 192]
type = S
ctrl = 0
anim = 196
velset = 0,0

[State 190, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 196

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem =56
value = 7,9
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem =55
value = 5,8
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 192,0
channel = 50
ignorehitpause = 1

[State 705, 2]
type = Explod
triggerall = numexplod(901)= 0
trigger1 = AnimElem =55
anim = 900
scale = .4,.4
;scale = .9,.7
ID = 901
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
removetime = 95
supermove = 1
removeongethit = 1

[State 1900, dust]
type = explod
triggerall = numexplod(914)= 0
trigger1 = AnimElem =55
anim = 914
scale = .8,.8
sprpriority = 2
bindtime = -1
ownpal = 1
removetime = 95
supermove = 1
removeongethit = 1
ignorehitpause = 1
id = 914
facing = -1

[State 705, 2]
type = Explod
trigger1 = AnimElem =56
anim = 905
scale = .4,.4
;scale = .9,.7
ID = 2405
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
supermove = 1
removeongethit = 1

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;特殊开场
[Statedef 194]
type = S
ctrl = 0
anim = 196
velset = 0,0

[State 196]
type = PlaySnd
triggerall = animelem = 2
trigger1 = (p2name = "Super Vegetto" | p4name = "Super Vegetto")
trigger2 = (p2name = "Vegetto" | p4name = "Vegetto")
value = 194,0

[State 196]
type = PlaySnd
triggerall = animelem = 2
trigger1 = (p2name = "Goku " | p4name = "Goku")
trigger2 = (p2name = "vegeta " | p4name = "vegeta")
trigger3 = (p2name = "Son Goku" | p4name = "Son Goku")
value = 194,1

[State 210, 1]
type = PlaySnd
triggerall = animelem = 2
trigger1 = (p2name = "Broli" | p4name = "Broli")
trigger2 = (p2name = "Broly" | p4name = "Broly")
value = 194,2


[State 210, 1]
type = PlaySnd
triggerall = animelem = 2
trigger1 = (p2name = "Piccolo" | p4name = "Piccolo")
value = 194,3


[State 210, 1]
type = PlaySnd
trigger1 = AnimElem =56
value = 7,9
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem =55
value = 5,8
ignorehitpause = 1

[State 705, 2]
type = Explod
triggerall = numexplod(901)= 0
trigger1 = AnimElem =55
anim = 900
scale = .4,.4
;scale = .9,.7
ID = 901
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
removetime = 95
supermove = 1
removeongethit = 1

[State 1900, dust]
type = explod
triggerall = numexplod(914)= 0
trigger1 = AnimElem =55
anim = 914
scale = .8,.8
sprpriority = 2
bindtime = -1
ownpal = 1
removetime = 95
supermove = 1
removeongethit = 1
ignorehitpause = 1
id = 914
facing = -1

[State 705, 2]
type = Explod
trigger1 = AnimElem =56
anim = 905
scale = .4,.4
;scale = .9,.7
ID = 2405
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
supermove = 1
removeongethit = 1

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; Taunt
;嘲讽
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 0, PowerAdd]
type = PowerAdd
trigger1 =AnimElem =3
value = 250
ignorehitpause =1


[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 =AnimElem = 3
ignorehitpause = 1
persistent = 0
time = 3
under = 1

[State 震动]
type = EnvShake
trigger1 =AnimElem = 3
ignorehitpause = 0
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90

[State 0, PlaySnd]
type = PlaySnd
trigger1 =AnimElem =2
value = S195,0
ignorehitpause =1

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem =2
value = 7,9
ignorehitpause = 1

[State 705, 2]
type = Explod
triggerall = numexplod(2405)= 0
trigger1 = AnimElem =3
anim = 2405
;scale = .5,.4
scale = .9,.7
ID = 2406
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
removetime = 12
supermove = 1
removeongethit = 1

[State 1900, dust]
type = explod
triggerall = numexplod(914)= 0
trigger1 = AnimElem =3
anim = 914
scale = .8,.8
sprpriority = 2
bindtime = -1
ownpal = 1
supermove = 1
removetime = 12
removeongethit = 1
ignorehitpause = 1
id = 914
facing = -1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;开场-第二局
[Statedef 197]
type = S
ctrl = 0
anim = 197
velset = 0,0

[State 190, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 197

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem =44
value = 7,9
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem =43
value = 5,8
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 197,IfElse(random%2,0,1)
ignorehitpause = 1

[State 705, 2]
type = Explod
triggerall = numexplod(901)= 0
trigger1 = AnimElem =43
anim = 900
scale = .4,.4
;scale = .9,.7
ID = 901
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
removetime = 95
supermove = 1
removeongethit = 1

[State 1900, dust]
type = explod
triggerall = numexplod(914)= 0
trigger1 = AnimElem =43
anim = 914
scale = .8,.8
sprpriority = 2
bindtime = -1
ownpal = 1
removetime = 95
supermove = 1
removeongethit = 1
ignorehitpause = 1
id = 914
facing = -1

[State 705, 2]
type = Explod
trigger1 = AnimElem =44
anim = 905
scale = .4,.4
;scale = .9,.7
ID = 2405
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
supermove = 1
removeongethit = 1

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;特殊开场 -魔人布欧
[Statedef 198]
type = S
ctrl = 0
anim = 198
velset = 0,0


[State 196]
type = PlaySnd
trigger1 = animelem = 2
value = 194,4

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem =32
value = 7,9
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem =31
value = 5,8
ignorehitpause = 1

[State 705, 2]
type = Explod
triggerall = numexplod(901)= 0
trigger1 = AnimElem =31
anim = 900
scale = .4,.4
;scale = .9,.7
ID = 901
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
removetime = 95
supermove = 1
removeongethit = 1

[State 1900, dust]
type = explod
triggerall = numexplod(914)= 0
trigger1 = AnimElem =31
anim = 914
scale = .8,.8
sprpriority = 2
bindtime = -1
ownpal = 1
removetime = 95
supermove = 1
removeongethit = 1
ignorehitpause = 1
id = 914
facing = -1

[State 705, 2]
type = Explod
trigger1 = AnimElem =32
anim = 905
scale = .4,.4
;scale = .9,.7
ID = 2405
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
supermove = 1
removeongethit = 1

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;轻拳
[Statedef 200]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 1				;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 200				;Change animation (Def: no change)
poweradd = 20			;Power to add (Def: 0)
sprpriority = 2

[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 1,1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,12

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = 10
ignorehitpause = 1


[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
ignorehitpause = 1

			;Set layering priority to 2 (in front)

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = S,NA
guardflag = M
givepower = 21,21
animtype = Hard
priority = 4,Hit
damage = 20
pausetime = 5,6
sparkno = s70010
guard.sparkno = s7010
sparkxy = -15,-60
hitsound = s0,7
guardsound = s120,1
ground.type = High
air.type = Low
ground.slidetime = 3
ground.hittime = 18
ground.velocity = -5
guard.velocity = -10
air.velocity = -3.5,-6
ground.cornerpush.veloff = -10
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;重拳S(A)
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 210
sprpriority = -1

[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.6,0.6
sprpriority = 3
ownpal = 1
ignorehitpause = 1


[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = 15
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 1,2

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,12

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = S,NA
guardflag = M
givepower = 21,21
animtype = Hard
priority = 4,Hit
damage = 68
pausetime = 12,15
sparkno = s70001
guard.sparkno = s7010
sparkxy = -15,-60
hitsound = s0,8
guardsound = s120,1
ground.type = High
air.type = Low
ground.slidetime = 6
ground.hittime = 18
ground.velocity = -5
guard.velocity = -10
air.velocity = -3.5,-6
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;重拳S(B)
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 220
sprpriority = -1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = 10
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 1,2

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,12

[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = (500-random)/0,-40+(500-random)/17
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.6,0.6
sprpriority = 3
ownpal = 1
ignorehitpause = 1


[State 640, 3]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 3
attr = S,NA
guardflag = -
givepower = 21,21
animtype = back
damage = 30,10
pausetime = 5,23
sparkno = s60950
guard.sparkno = s7010
sparkxy = -15,-70
hitsound = s0,10
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 3
ground.hittime = 38
ground.velocity = -5
guard.velocity = -10
air.type = Low
air.velocity = -5,15
air.hittime = 12
air.fall = 1
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5
EnvShake.time = 15
EnvShake.freq = 100
EnvShake.ampl = -8

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;轻脚S(A)
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 230
sprpriority = -1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = 10
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 1,1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,12

[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.6,0.6
sprpriority = 3
ownpal = 1
ignorehitpause = 1

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = S,NA
guardflag = M
givepower = 21,21
animtype = Hard
priority = 4,Hit
damage = 68
pausetime = 15,15
sparkno = s70010
guard.sparkno = s7010
sparkxy = -15,-60
hitsound = s0,11
guardsound = s120,1
ground.type = High
air.type = Low
ground.slidetime = 4
ground.hittime = 18
ground.velocity = -5
guard.velocity = -10
air.velocity = -3.5,-6
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;重脚S(B)
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 240
sprpriority = -1

[State 0, VelAdd]
type = VelAdd
trigger1 = animelem = 3
x = 5
ignorehitpause = 1


[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.6,0.6
sprpriority = 3
ownpal = 1
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 1,2

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,12

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = S,NA
guardflag = M
givepower = 21,21
animtype = back
damage = 68
pausetime = 12,13
sparkno = s70002
guard.sparkno = s7010
sparkxy = -15,-70
hitsound = s0,11
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 7
ground.hittime = 18
ground.velocity = -5
guard.velocity = -10
air.type = Low
air.velocity = -5,15
air.hittime = 12
air.fall = 1
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;重脚S(c)
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 250
sprpriority = -1

[State 0, VelAdd]
type = VelAdd
trigger1 = animelem >= 5
x = -5
ignorehitpause = 1


[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 1,2

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,12

[State 1200 , 1]
type = HitDef
trigger1 = time =  0
attr = S, NT
animtype  = Hard
damage  = 20,20
priority = 5
hitflag=MAFDLP
pausetime = 5,10
sparkno = s7002
guard.sparkno = s4110
sparkxy = -20,-55
hitsound = s0,8
hitflag = MAF
guardsound = s2,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4.5,-5.5
air.velocity = -4.5,-5.5
air.animtype = Back
fall = 1
fall.recovertime = 25
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 255
p2facing = 1
kill = 0

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;P2上升
[Statedef 255]
type     = A
movetype = H
physics  = N

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -50
kill = 1
absolute = 0

[State 0, Pause]
type = Pause
trigger1 = time = [0,30]
time = 1
movetime = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =1

[State 震动]
type = EnvShake
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
time = 10
ampl = 20
freq = 100
phase = 90

[State 1028, Velset]
type = VelSet
trigger1 = Time = 0
y = -10

[State 1028, Velset]
type = VelSet
trigger1 = Time = 0
x = 0

[State 1028, VelAdd]
type = VelAdd
trigger1 = 1
y = .4

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1000, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 1
under = 1

[State 1028, SelfState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;轻拳C
[Statedef 400]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 400
sprpriority = -1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = 10
ignorehitpause = 1


[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 1,1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,12


[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = 0,-35
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
ignorehitpause = 1

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = S,NA
guardflag = M
givepower = 21,21
animtype = Hard
priority = 4,Hit
damage = 20
pausetime = 5,6
sparkno = s70010
guard.sparkno = s7010
sparkxy = -15,-60
hitsound = s0,7
guardsound = s120,1
ground.type = High
air.type = Low
ground.slidetime = 3
ground.hittime = 18
ground.velocity = -5
guard.velocity = -10
air.velocity = -3.5,-6
ground.cornerpush.veloff = -10
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;重拳C
[Statedef 410]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 410
sprpriority = -1

[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = 0,-35
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.6,0.6
sprpriority = 3
ownpal = 1
ignorehitpause = 1


[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = 10
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 1,1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,12


[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = S,NA
guardflag = M
givepower = 21,21
animtype = Hard
priority = 4,Hit
damage = 20
pausetime = 15,16
sparkno = s70001
guard.sparkno = s7010
sparkxy = -15,-60
hitsound = s0,8
guardsound = s120,1
ground.type = High
air.type = Low
ground.slidetime = 4
ground.hittime = 18
ground.velocity = -5
guard.velocity = -10
air.velocity = -3.5,-6
ground.cornerpush.veloff = -10
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;轻脚C
[Statedef 420]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 420
sprpriority = -1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = 15
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 1,1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,12


[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = 0,-35
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.6,0.6
sprpriority = 3
ownpal = 1
ignorehitpause = 1


[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = S,NA
guardflag = M
givepower = 21,21
animtype = Hard
priority = 4,Hit
damage = 20
pausetime = 8,9
sparkno = s70010
guard.sparkno = s7010
sparkxy = -15,-60
hitsound = s0,7
guardsound = s120,1
ground.type = High
air.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5
guard.velocity = -10
air.velocity = -3.5,-6
ground.cornerpush.veloff = -10
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;重脚C
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 70
ctrl = 0
velset = 10,0
anim = 430
sprpriority = 2

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,14

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,2

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 2
under = 1

[State 震动]
type = EnvShake
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 5
ampl = -10
freq = 100
phase = 90

[State 440, 3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 60
hitflag = MAFDLP
guardflag = L
pausetime = 11,12
sparkno = s7002
getpower = 61,61
sparkxy = -15,-18
hitsound   = s0,11
guardsound = s120,0
guard.sparkno = s7011
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -1.5,-5
air.velocity = -4,-4
guard.velocity = -5
fall = 1


[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;跳拳重
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 20
ctrl = 0
anim = 600
sprpriority = 2

[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 1,1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 5,4

[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = 0,-65
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7,0.7
sprpriority = 3
ownpal = 1
ignorehitpause = 1

[State 640, 3]
type = HitDef
trigger1 = time = 0
attr = S,NA
guardflag = H
givepower = 21,21
animtype = Hard
priority = 4,Hit
damage = 68
pausetime = 10,15
sparkno = s70001
guard.sparkno = s7011
sparkxy = -15,-60
hitsound = s0,8
guardsound = s120,1
animtype = Hard
ground.type = Low
ground.slidetime = 1
ground.hittime  = 24
ground.velocity = -15
guard.ctrltime = 50
air.type = Low
air.velocity = -5,15
air.hittime = 12
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = -12
air.cornerpush.veloff = -12
fall.envshake.time = 12
fall.envshake.ampl = 4
fall.envshake.freq = 90
EnvShake.time = 15
EnvShake.freq = 100
EnvShake.ampl = -8

;跳脚重
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 20
ctrl = 0
anim = 610
sprpriority = 2

[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = 0,-65
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7,0.7
sprpriority = 3
ownpal = 1
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 1,1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,12

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = S,NA
guardflag = M
givepower = 21,21
animtype = Hard
priority = 4,Hit
damage = 68
pausetime = 15,25
sparkno = s70002
guard.sparkno = s7011
sparkxy = -15,-20
hitsound = s0,11
guardsound = s120,1
ground.type = High
air.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5
guard.velocity = -10
air.velocity = -3.5,-6
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5

;吹飞(地面)
[Statedef 650]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 100
ctrl = 0
anim = 650
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;time = 1
ignorehitpause = 1

[State 0, PosAdd]
type = velAdd
trigger1 = animelem =1
x = 15
ignorehitpause = 1


[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1,14

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 7,2

[State 400, 2]
type = HitDef
trigger1 = time = 0
attr = S, SP
damage   = 80,30
sparkno = s7002
guard.sparkno = s7012
sparkxy = 10,-60
animtype = heavy
guardflag = MA
hitflag = MAF
pausetime = 20,20
hitsound   = s0,10
guardsound = S120,1
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6.5
air.cornerpush.veloff = -20
ground.cornerpush.veloff =  -20
guard.cornerpush.veloff = -5
air.velocity = -6,-6.8
fall = 1
fall.recover = 0
EnvShake.time = 20
EnvShake.freq = 100
EnvShake.ampl = -10


[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;蓄气
[Statedef 910]
type = S
movetype = I
physics = S
anim = 910
poweradd =50
velset = 0
ctrl = 0

[State 191, 3]
type = PlaySnd
trigger1 = animelem = 1
value = 0,2

[State 191, 3];
type = PlaySnd
trigger1 = animelem = 1
value = 5,8

[State 730, 1]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = var(59) = 1
value = 9111

[State 730, 1]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = var(59) = 0
value = 911

;蓄力中
[Statedef 911]
type = S
movetype = I
physics = S
anim = 911

[State 705, 2]
type = Explod
triggerall = numexplod(900)= 0
trigger1 = time = 0
anim = 900
scale = .4,.4
ID = 900
sprpriority = 3
postype = p1
pos = -5,0
bindtime = -1
removetime = -1
removeongethit = 1

[State 1900, dust]
type = explod
triggerall = numexplod(914)= 0
trigger1 = time = 0
trigger1 = stateno = 911
anim = 914
scale = .8,.8
sprpriority = 2
bindtime = -1
ownpal = 1
removeongethit = 1
ignorehitpause = 1
id = 914
facing = -1



[State 911, 1]
type = ChangeState
trigger1 = command != "hold_a"
trigger1 = var(59) = 0
trigger3 = command != "hold_y"
trigger3 = var(59) = 0
trigger4 = !(var(59)>0 && (power<powermax))
value = 912


[State 735, 2]
type = PowerAdd
trigger1 = Time = [0,50]
value = 11

[State 735, 2]
type = ChangeState
trigger1 = Power >= 5000
value = 195

[State 735, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 911


; 蓄力结束
[Statedef 912]
type = S
movetype = I
physics = S
anim = 912

[State 191, 3]
type = PlaySnd
trigger1 = animelem = 1
value = 7,9

[State 1]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1


[State 912, StopSnd]
type = StopSnd
trigger1 = animtime = 0
channel = 8

[State 912, StopSnd]
type = StopSnd
trigger1 = animtime = 0
channel = 9

[State 1100, 1]
type = RemoveExplod
trigger1 = AnimElem = 1
ID = 900

[State 740, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;能量满
[Statedef 913]
type = S
movetype = I
physics = S
anim = 913

[State 1]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1


[State 191, 3]
type = PlaySnd
trigger1 = animelem = 2
value = 4,0

[State 191, 3]
type = PlaySnd
trigger1 = animelem = 2
value = 14,IfElse(random%2,3,4)

[State 313, Explod]
type = Explod
trigger1 = time = 0
anim = 12452
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .3,.3
sprpriority = 7

[State 打击闪光]
type = EnvColor
value = 255,255,255
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
time = 3
under = 1

[State 1000, EnvShake]
type = EnvShake
trigger1 = AnimElem = 5
time = 18
freq = 90
ampl = -6
phase = 90

[State 1100, 1]
type = RemoveExplod
trigger1 = AnimElem = 1
ID = 900

[State 741, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;AI蓄气-------------------------------------------------------------------------
[Statedef 9100]
type = S
movetype = I
physics = S
anim = 910
poweradd =200
velset = 0
ctrl = 0

[State 191, 3]
type = PlaySnd
trigger1 = animelem = 1
value = 0,2

[State 191, 3]
type = PlaySnd
trigger1 = animelem = 1
value = 5,8


[State 730, 1]
type = ChangeState
trigger1 = AnimTime = 0
;trigger1 = var(59) = 1
value = 9111

;蓄力中
[Statedef 9111]
type = S
movetype = I
physics = S
anim = 911

[State 911, 1]
type = ChangeState
trigger1 = command = "hold_a"
trigger1 = var(59) = 1
trigger3 = command = "hold_y"
trigger3 = var(59) = 1
trigger4 = !(var(59)>0 && (power<powermax))
triggerall  = stateno != [9100,9111]
value = 912



[State 1900, dust]
type = explod
triggerall = numexplod(914)= 0
trigger1 = time = 0
trigger1 = stateno = 9111
anim = 914
scale = .8,.8
sprpriority = 2
bindtime = -1
ownpal = 1
removeongethit = 1
ignorehitpause = 1
id = 914
facing = -1

[State 705, 2]
type = Explod
triggerall = numexplod(900)= 0
trigger1 = time = 0
anim = 900
scale = .4,.4
ID = 900
sprpriority = 3
postype = p1
pos = -5,0
bindtime = -1
removetime = -1
removeongethit = 1

[State 735, 2]
type = PowerAdd
trigger1 = Time = [0,50]
value = 11

[State 735, 2]
type = ChangeState
trigger1 = Power >= 5000
value = 195

[State 735, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 9111


;回避前
[Statedef 700]
type = S
physics = S
anim = 700
sprpriority = -1
poweradd = 30
velset = 0,0
ctrl = 0
scale=.6,.6

[State 0, PosSet]
type = PosSet
trigger1 = time >= 2
y = 0
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = animtime = 0
trigger1 = facing = enemy,facing
ignorehitpause = 1

[State 361, push]
type = PlayerPush
trigger1 = 1
value = 0

[State 710]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1,10

[State 1]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1


[State 361, poweradd]
type = Poweradd
triggerall=palno<=6
trigger1 = prevstateno = 150 || prevstateno = 151
trigger1 = AnimElem = 1
value = -1000

[State 361, color]
type = EnvColor
trigger1 = animelem = 1
trigger1 = prevstateno = 150 || prevstateno = 151
value = 200,200,200
time = 3

[State 361, vel]
type = velset
trigger1 = Time = [10,25]
x = 5

[state 361, 1]
type = explod
trigger1 = time = 0
postype = p1
bindtime = 1
scale=.6,.6
removeongethit = 1
pos = 0,0
anim = 701
sprpriority = 3

[state 361, 1]
type = explod
trigger1 = animelem = 1
postype = p1
;bindtime = 1
removetime = 8
removeongethit = 1
pos = 0,0
anim = 952
scale=.6,.6
sprpriority = 3

[state 361, 1]
type = explod
trigger1 = time = 20
postype = p1
;bindtime = 1
removetime = 8
scale=.6,.6
removeongethit = 1
pos = 30,5
anim = 952
sprpriority = 3


[State 0, CtrlSet]
type = CtrlSet
trigger1 = time >= 25
value = 1
ignorehitpause = 1


[State 361, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;回避后
[Statedef 710]
type = S
physics = S
anim = 700
poweradd = 30
sprpriority = -1
velset = 0,0
ctrl = 0

[State 0, Turn]
type = Turn
trigger1 = animtime = 0
trigger1 = facing = enemy,facing
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = time >= 2
y = 0
ignorehitpause = 1

[State 360, push]
type = PlayerPush
trigger1 = 1
value = 0

[State 1]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1


[State 710]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1,10

[State 360, poweradd]
type = Poweradd
triggerall=palno<=6
trigger1 = prevstateno = 150 || prevstateno = 151
trigger1 = AnimElem = 1
value = -1000

[State 360, color]
type = EnvColor
trigger1 = animelem = 1
trigger1 = prevstateno = 150 || prevstateno = 151
value = 200,200,200
time = 3

[State 361, vel]
type = velset
trigger1 = Time = [10,25]
x = -5

[state 361, 1]
type = explod
trigger1 = time = 0
postype = p1
;bindtime = 1
removetime = 8
scale=.6,.6
removeongethit = 1
pos = 0,0
anim = 701
sprpriority = 3

[state 360, 1]
type = explod
trigger1 = animelem = 1
postype = p1
;bindtime = 1
removetime = 8
removeongethit = 1
pos = 0,5
anim = 952
scale=.6,.6
sprpriority = 3

[state 360, 1]
type = explod
trigger1 = time = 20
postype = p1
;bindtime = 1
removetime = 8
removeongethit = 1
pos = -40,0
anim = 952
scale=.6,.6
sprpriority = 3


[State 360, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;旋转雷鸣拳
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 15
poweradd = 100
ctrl = 0
velset = 0,0
anim = 1000
sprpriority = 10



[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
ignorehitpause = 1

			;Set layering priority to 2 (in front
[State 400, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
attr = S, SA
damage   = 5,0
getpower=50,5
sparkno = s700002
hitflag=MAFDLP
guard.sparkno = s7012
sparkxy = (500-random)/0,-50+(500-random)/17
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 5,10
hitsound = s0,8
guardsound = S120,1
ground.type = low
ground.slidetime = 0
ground.hittime  = 17
ground.velocity = 0,0
air.cornerpush.veloff = 0
ground.cornerpush.veloff =  0
guard.cornerpush.veloff = 0
air.velocity = 0,0
fall = 1
fall.recover = 0

[State 360, 3]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = command = "holdx"
value = 1001

[State 360, 3]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = command != "holdx"
value = 1002

;旋转雷鸣拳-旋转
[Statedef 1001]
type    = S
movetype= A
physics = S
juggle  = 15
poweradd = 100
ctrl = 0
velset = 0,0
anim = 1001
sprpriority = 10

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1000,0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos =(500-random)/0,-50+(500-random)/25
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
ignorehitpause = 1

			;Set layering priority to 2 (in front
[State 400, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
attr = S, SA
damage   = 5,0
getpower=50,5
sparkno = s700002
hitflag=MAFDLP
guard.sparkno = s7012
sparkxy = (500-random)/0,-50+(500-random)/17
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 5,10
hitsound = s0,8
guardsound = S120,1
ground.type = low
ground.slidetime = 0
ground.hittime  = 17
ground.velocity = 0,0
air.cornerpush.veloff = 0
ground.cornerpush.veloff =  0
guard.cornerpush.veloff = 0
air.velocity = 0,0
fall = 1
fall.recover = 0

[State 360, 3]
type = ChangeState
trigger1 = command != "holdx"
value = 1002


;旋转雷鸣拳-冲刺
[Statedef 1002]
type    = S
movetype= A
physics = N
anim = 1002
ctrl = 0


[State 1000, u]
type = veladd
trigger1 = AnimElem = 1
x = 6

[State 震动]
type = EnvShake
trigger1 = animelem = 1
ignorehitpause = 1
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90

[State 1200 , 1]
type = HitDef
trigger1 = time =  0
attr = S, NT
animtype  = Hard
damage  = 80,20
priority = 5
pausetime = 0,10
sparkno = s7002
guard.sparkno = s4110
sparkxy = -20,-55
hitsound = s0,10
hitflag = MAF
guardsound = s2,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4.5,-5.5
air.velocity = -4.5,-5.5
air.animtype = Back
fall = 1
fall.recovertime = 25
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2facing = 1
p2stateno=1010



[State 810, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;旋转雷鸣拳-P2甩出
[Statedef 1010]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0


[State 1028, Turn]
type = Turn
trigger1 = facing = enemy,facing

[State 1505]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1010

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =1

[State 1505]
type = Veladd
trigger1 = 1
y = 0
x = -1

[State 1505, ChangeState]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 5
trigger2 = FrontEdgeBodyDist <= 5
value = 1011

;旋转雷鸣拳-P2弹墙
[Statedef 1011]
type     = A
movetype = H
physics  = N

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -100
kill = 1
absolute = 0

[State 0, Pause]
type = Pause
trigger1 = time = [0,30]
time = 1
movetime = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =1



[State 震动]
type = EnvShake
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
time = 10
ampl = 20
freq = 100
phase = 90


[State 1028, Velset]
type = VelSet
trigger1 = Time = 0
y = -8


[State 1028, Velset]
type = VelSet
trigger1 = Time = 0
x = -2


[State 1028, VelAdd]
type = VelAdd
trigger1 = 1
y = .5


[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1000, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 1
under = 1

[State 1028, SelfState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;超级肘击-冲刺
[StateDef 1050]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 1050
sprpriority = 2

[State 710]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,10

[State 0, PosAdd]
type = velAdd
trigger1 = time=0
x = 30
ignorehitpause = 1

[State 1350, 1]
type = HitDef
Trigger1 = time = 0
attr = S, ST
hitflag = MAFDLP
sparkno = s70111
;numhits = 1
P1STATENO = 1051
P2STATENO = 1053

[State 810, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 1051


;超级肘击-攻击
[Statedef 1051]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 1051
sprpriority = 4

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = 10
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 1,2

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,12

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = S,HT
guardflag = -
givepower = 21,21
animtype = back
damage = 68
pausetime = 10,23
sparkno = s7002
guard.sparkno = s7010
sparkxy = -15,-60
hitsound = s0,10
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 3
ground.hittime = 38
ground.velocity = -5
guard.velocity = -10
air.type = Low
air.velocity = -5,15
air.hittime = 12
air.fall = 1
p2stateno=1053
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5
EnvShake.time = 15
EnvShake.freq = 100
EnvShake.ampl = -8

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
triggerall=movehit
value = 1060
ctrl = 1

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
triggerall!=movehit
value = 0
ctrl = 1


;超级肘击-P2状态
[Statedef 1053]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause =  1

[State 0, Turn]
type = Turn
trigger1 = facing = enemy,facing

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1010

[State 0, ChangeState]
type = SelfState
Trigger1 = Time = 200
value = 5100
ctrl = 1

;超级肘击-派生散射气功波
[StateDef 1060]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 1060
sprpriority = 4

[State 0, PosSet]
type = Posadd
trigger1= enemy,stateno =1062
trigger1= enemy,time =0
x = .5
ignorehitpause =  1

[State 710]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,10


[State 1000, 5]
type = Explod
trigger1 = AnimElem = 2
anim = 1061
sprpriority = 10
postype = p1
pos = 80,-60
scale = .5,.5
bindtime = -1
supermove = 1
under = 0
ownpal = 1


[State 4016, Helper]
type = Helper;type = Helper
;triggerall = !numhelper(1001)
trigger1 = AnimElem = 2
ID = 1061
pos = 80,-60
stateno = 1061
postype=P1
helpertype = normal
name = "散射波动"
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = -1
sprpriority = 24
bindtoroot=1

[State 810, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl=1


;散射气功波-波动
[StateDef 1061]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 1062
sprpriority = 12

[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = (500-random)/0,-40+(500-random)/17
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.3,0.3
sprpriority = 123
ownpal = 1
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
ignorehitpause =  1

[State 0, ScreenBound]
type = ScreenBound
trigger1 =  1
value = 0
movecamera = 0,0
ignorehitpause = 1


[State 640, 3]
type = HitDef
trigger1 =AnimElem = 5
trigger2 =AnimElem = 7
trigger3 =AnimElem = 9
trigger4 =AnimElem = 11
trigger5 =AnimElem = 13
trigger6 =AnimElem = 15
trigger7 =AnimElem = 17
trigger8 =AnimElem = 19
trigger9 =AnimElem = 21
trigger10 =AnimElem = 23
trigger11 =AnimElem = 25
trigger12 =AnimElem = 27
trigger13 =AnimElem = 29
trigger14 =AnimElem = 31
trigger15 =AnimElem = 33
trigger16 =AnimElem = 35
trigger17 =AnimElem = 37
trigger18 =AnimElem = 39
trigger19 =AnimElem = 41
trigger20 =AnimElem = 43
trigger21 =AnimElem = 45
trigger22 =AnimElem = 47
trigger23 =AnimElem = 49
trigger24 =AnimElem = 51
attr = S,SP
guardflag = -
givepower = 21,21
animtype = back
damage = 2
pausetime = 0,23
sparkno = s70002
guard.sparkno = s7010
sparkxy = -15,-60
hitsound = s0,10
guardsound = s120,1
face=1
p2stateno=1062

[State 640, 3]
type = HitDef
trigger1 =AnimElem = 53
attr = S,SP
guardflag = -
givepower = 21,21
animtype = back
damage = 5
pausetime = 0,23
sparkno = s70002
guard.sparkno = s7010
sparkxy = -15,-60
hitsound = s0,10
guardsound = s120,1
face=1
p2stateno=1063


[State ]
type = DestroySelf
trigger1 = root,stateno!=1060

;散射气功波-P2状态
[Statedef 1062]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, PosSet]
type = Posadd
trigger1 = time=0
x = -1
ignorehitpause =  1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause =  1

[State 0, Turn]
type = Turn
trigger1 = facing = enemy,facing

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = ifelse(Random <= 500,5001,5011)

[State 0, ChangeState]
type = SelfState
Trigger1 = Time = 10
value = 5100
ctrl = 1

;散射气功波-P2状态-弹出
[Statedef 1063]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0


[State 1028, Turn]
type = Turn
trigger1 = facing = enemy,facing

[State 1505]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1010

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =1

[State 1505]
type = Veladd
trigger1 = 1
y = 0
x = -2

[State 1505, ChangeState]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 5
trigger2 = FrontEdgeBodyDist <= 5
value = 1011


;机枪拳！！！！
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 1100
sprpriority = 4


[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
random=30,50
removetime = -2
scale = 0.5,0.5
sprpriority = 123
ownpal = 1
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1100,0


[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,12

[State 640, 3]
type = HitDef
trigger1 =AnimElem = 2
trigger2 =AnimElem = 3
trigger3 =AnimElem = 4
trigger4 =AnimElem = 5
trigger5 =AnimElem = 6
trigger6 =AnimElem = 7
trigger7 =AnimElem = 8
trigger8 =AnimElem = 9
trigger9 =AnimElem = 10
trigger10 =AnimElem = 11
trigger11 =AnimElem = 12
trigger12 =AnimElem = 13
trigger13 =AnimElem = 14
trigger14 =AnimElem = 15
trigger15 =AnimElem = 16
trigger16 =AnimElem = 17
trigger17 =AnimElem = 18
trigger18 =AnimElem = 19
attr = S,HA
guardflag = M
givepower = 21,21
animtype = back
damage = 5
pausetime = 5,23
sparkno = s70002
guard.sparkno = s7010
sparkxy = -15,-60
hitsound = s0,9
guardsound = s120,1
face=1
p2stateno=1110
EnvShake.time = 15
EnvShake.freq = 5
EnvShake.ampl = -8

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
triggerall=movehit
value = 1150
;ctrl = 1

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
triggerall=!movehit
value = 0
ctrl = 1


;机枪拳-P2状态
[Statedef 1110]
type    = S
movetype= H
physics = N
velset = 0,0




[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause =  1

[State 0, Turn]
type = Turn
trigger1 = facing = enemy,facing

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = ifelse(Random <= 500,5001,5011)

[State 0, ChangeState]
type = SelfState
Trigger1 = Time = 40
value = 5100
ctrl = 1

;机枪拳-派生踢飞
[Statedef 1150]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd = 50
ctrl = 0
velset = 0,0
anim = 1150
sprpriority = 10

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1100,1


[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.6,0.6
sprpriority = 123
ownpal = 1
ignorehitpause = 1

[State 8210]
type = veladd
trigger1 = AnimElem >= 1
x = 5

[State 400, 2]
type = HitDef
trigger1 = time = 0
attr = S, SP
damage   = 30,30
sparkno = s70001
hitflag=MAFDLP
guard.sparkno = s7012
sparkxy = -20,-40
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 10,20
hitsound   = s0,10
guardsound = S120,1
ground.type = low
ground.slidetime = 10
ground.hittime  = 17
ground.velocity = -5,-6.5
air.cornerpush.veloff = -20
ground.cornerpush.veloff =  -20
guard.cornerpush.veloff = -5
air.velocity = -6,-6.8
fall = 1
fall.recover = 0
EnvShake.time = 20
EnvShake.freq = 100
EnvShake.ampl = -10
p2stateno = 1063
EnvShake.time = 15
EnvShake.freq = 100
EnvShake.ampl = -8

[State 810, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;嘴炮！！！！
[StateDef 1200]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1200
poweradd = 50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1200,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem =2
value = S7,4


[State 1000, 5]
type = Explod
trigger1 = AnimElem = 3
anim = 1201
sprpriority = 10
postype = p1
pos = 40,-48
scale = .3,.3
bindtime = -1
supermove = 1
under = 0
ownpal = 1

[State 4016, Helper]
type = Helper;type = Helper
;triggerall = !numhelper(1001)
trigger1 = AnimElem = 3
ID = 1201
stateno = 1201
facing = 1
helpertype = player
name = "嘴炮"
keyctrl = 0
ownpal = 1
size.xscale = 0.3
size.yscale = 0.3
supermovetime = -1

[State 震动]
type = EnvShake
trigger1 = animelem = 3
ignorehitpause = 1
persistent = 0
time = 10
ampl = 20
freq = 100
phase = 90

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 = AnimElem = 3
ignorehitpause = 1
persistent = 0
time = 2
under = 1

[State 1000, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;嘴炮-波动
[Statedef 1201]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 5
ctrl = 0
anim = 1202
sprpriority = 3

[State 0, Turn]
type = Turn
trigger1 = facing != root,facing

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,-50

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State ]
type = DestroySelf
trigger1 = root,stateno !=1200
trigger2 = root,time =36

[State 0, HitAdd]
type = HitAdd
trigger1 = movehit = 1
value = 1

[State 640, 3]
type = HitDef
trigger1 = animelem = 4
trigger2 = animelem = 6
trigger3 = animelem = 8
attr = S,SP
numhits = 0
hitsound   = s0,10
guardflag = M
hitflag = MAFDLP
givepower = 0,0
getpower = 0,0
animtype = Hard
priority = 4,Hit
damage = 20,10
pausetime = 1,15
sparkno = s7002
guard.ctrltime = 10
guard.sparkno = s7012
sparkxy = (500-random)/0,0+(500-random)/17
guardsound = S120,1
ground.type = High
air.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5
guard.velocity = -10
air.velocity = -3.5,-6
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5



[State 640, 3]
type = HitDef
trigger1 = animelem = 10
attr = S, SP
damage   = 50
givepower = 0,0
getpower = 0,0
sparkno = s7002
guard.sparkno = s7012
sparkxy = (500-random)/0,0+(500-random)/17
animtype = heavy
guardflag = MA
hitflag = MAFDPL
pausetime = 0,10
hitsound   = s0,10
guardsound = S120,1
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6.5
guard.cornerpush.veloff = -5
air.velocity = -6,-6.8
fall = 1
fall.recover = 0
EnvShake.time = 20
EnvShake.freq = 100
EnvShake.ampl = -10

;升龙头
[Statedef 1250]
type    = A
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 1250
poweradd = 100
sprpriority = 2

[State 0, PosAdd]
type = velAdd
trigger1 = AnimElem = 2
x = 4
y = -5
ignorehitpause =  1

[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S5,5


[State 震动]
type = EnvShake
trigger1 =  movehit
ignorehitpause = 1
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 = AnimElem = 3
ignorehitpause = 1
persistent = 0
time = 3
under = 1


[State 400, 2]
type = HitDef
trigger1 = time=0
attr = S,HA
guardflag = M
hitflag = MAFDPL
givepower = 21,21
animtype = back
damage = 100
pausetime = 10,10
sparkno = s70002
guard.sparkno = s7011
sparkxy = -50,-100
hitsound = s0,10
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5,-10
guard.velocity = -5
air.type = Low
air.velocity = -5,-10
air.hittime = 12
air.fall = 1
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5
p2stateno = 1260

[State 810, 1]
type = ChangeState
trigger1 = Animtime = 0
value = 1251


;升龙头-下落
[Statedef 1251]
type    = A
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 1251
poweradd = 100
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1250,0

[State 0, PosAdd]
type = velAdd
trigger1 = 1
x = .5
y = .7
ignorehitpause =  1


[State 400, 4]
type = ChangeState
trigger1 = pos y >= -10
value = 52
ctrl = 1


;升龙头-P2甩出
[Statedef 1260]
type    = A
movetype= H
physics = N
velset = 1,-5

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0


[State 1028, Turn]
type = Turn
trigger1 = facing = enemy,facing



[State 1505]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1010

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
ignorehitpause =1

[State 1505]
type = Veladd
trigger1 = 1
y = -.5
x = -1.5

[State 0, Pause]
type = Pause
trigger1 = time = [0,10]
time = 1
movetime = 1

[State 1505, ChangeState]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 5
trigger2 = FrontEdgeBodyDist <= 5
value = 1261

;升龙头-P2弹墙
[Statedef 1261]
type     = A
movetype = H
physics  = N

[State 震动]
type = EnvShake
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
time = 10
ampl = 20
freq = 100
phase = 90

[State 1028, Velset]
type = VelSet
trigger1 = Time = 0
y = -8

[State 1028, VelAdd]
type = VelAdd
trigger1 = 1
y = .4

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1000, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 1
under = 1

[State 1028, SelfState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100


;抛投
[StateDef 1300]
type = A
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 1300
poweradd = 0
sprpriority = -1


[State 1]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1


[State 0, PlayerPush]
type = PlayerPush
trigger1 =  1
value = 0
ignorehitpause =  1

[State 1350, 1]
type = HitDef
Trigger1 = time = 0
attr = S, ST
hitflag = MAFDLP
hitsound = s12,1
sparkno = s7004
;numhits = 1
sparkxy = 0,-50
p2facing = 1
p1stateno = 1301
p2stateno = 1310



[State 0, ChangeState]
type = ChangeState
Trigger1 = AnimTime = 0
value = 1305
ctrl = 1

;抛投-扔
[StateDef 1301]
type = A
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 1301
poweradd = 0
sprpriority = -1

[State 0, Turn]
type = Turn
trigger1 = time = 0
;trigger1 =  frontedgedist <= 100
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 =  AnimElem = 4
value = 2,1

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElem = 2
pos = -5,-35
ignorehitpause =  1

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElem = 3
pos = -20,-20
ignorehitpause =  1

[State 0, TargetState]
type = TargetState
trigger1 =AnimElem = 4
value =  1320
ignorehitpause = 1


[State 0, ChangeState]
type = ChangeState
Trigger1 = AnimTime = 0
value = 1305
ctrl = 1

;抛投(下落)
[Statedef 1305]
type    = A
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 1305
poweradd = 100
sprpriority = 2

[State 0, Explod]
type = Explod
trigger1 = enemy,time = 1
trigger1 = enemy,stateno =5100
anim = 1966
pos = 0,0
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .5,.5
sprpriority = 6
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 震动]
type = EnvShake
trigger1 = p2stateno =5100
trigger1 = enemy,time = 1
ignorehitpause = 1
persistent = 0
time = 20
ampl = 20
freq = 100
phase = 90

[State 210, 1]
type = PlaySnd
trigger1 = enemy,time = 1
trigger1 = p2stateno =5100
value = 14,2

[State 0, PosAdd]
type = velAdd
trigger1 = 1
y = .7
ignorehitpause =  1


[State 400, 4]
type = ChangeState
trigger1 = pos y >= -10
value = 52
ctrl = 1

;抛投-P2状态
[Statedef 1310]
type    = A
movetype= H
physics = N
velset = 0,0


[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1310

;抛投-P2急速下落
[Statedef 1320]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0


[State 1028, Turn]
type = Turn
trigger1 = facing = enemy,facing

[State 1505]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1320

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =1

[State 1505]
type = Veladd
trigger1 = 1
y = 3
x = -3

[State 1505, ChangeState]
type = ChangeState
trigger1 = pos y >= -10
value = 1330

;抛投-P2撞地
[Statedef 1330]
type     = A
movetype = H
physics  = N

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -100
kill = 1
absolute = 0

[State 0, Pause]
type = Pause
trigger1 = time = [0,30]
time = 1
movetime = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =1



[State 震动]
type = EnvShake
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
time = 10
ampl = 20
freq = 100
phase = 90




[State 1028, Velset]
type = VelSet
trigger1 = Time = 0
x = -2

[State 1028, Turn]
type = Turn
trigger1= (Time = 0) && (BackEdgeDist < 30)

[State 1028, VelAdd]
type = VelAdd
trigger1 = 1
y = .4


[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1000, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 1
under = 1

[State 1028, SelfState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;瞬移追击
[Statedef 1350]
type    = S
movetype= A
physics = S
juggle  = 15
poweradd = 0
ctrl = 0
velset = 0,0
anim = 700
sprpriority = 10

[State 710]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,10
ignorehitpause = 1

[state 361, 1]
type = explod
trigger1 = time = 0
postype = p1
bindtime = 1
scale=.6,.6
removeongethit = 1
pos = 0,0
anim = 701
sprpriority = 3

[state 361, 1]
type = explod
trigger1 = animelem = 1
postype = p1
;bindtime = 1
removetime = 8
removeongethit = 1
pos = 0,0
anim = 952
scale=.6,.6
sprpriority = 3

[state 361, 1]
type = explod
trigger1 = time = 20
postype = p1
;bindtime = 1
removetime = 8
scale=.6,.6
removeongethit = 1
pos = 30,5
anim = 952
sprpriority = 3

[State 361, 3]
type = ChangeState
trigger1 = Time =3
value = 1360
ctrl=1

;瞬移追击-停留
[Statedef 1360]
type    = S
movetype= A
physics = S
juggle  = 15
poweradd = 0
ctrl = 0
velset = 0,0
anim = 1360
sprpriority = 10

[State 8210]
type = posadd
trigger1 = AnimElem = 1
x = Ceil(P2BodyDist X)-10
y = Ceil(P2BodyDist Y)-0


[State 2000]
type = superPause
trigger1 = AnimElem = 1
time =10
movetime = 10
anim=-1

[State 0, AI]
type = ChangeState
triggerall = var(59)=1
trigger1 = AnimElem = 2
value = ifelse(Random <=666,Ifelse(random<=333,1300,1700),1750)



[State 1400,changestate]
type = changestate
trigger1 = command = "a"
value = 1300


[State 1400,changestate]
type = changestate
trigger1 = command = "b"
value = 1700


[State 1400,changestate]
type = changestate
trigger1 = command = "x"
value = 1750


[State 361, 3]
type = ChangeState
trigger1 = Animtime = 0
value = 700
ctrl=1


;火箭头槌
[Statedef 1400]
type    = A
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 1400
poweradd = 100
sprpriority = 2

[State 0, PosAdd]
type = velAdd
trigger1 = AnimElem = 2
x = 50
ignorehitpause =  1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S5,5


[State 震动]
type = EnvShake
trigger1 =  movehit
ignorehitpause = 1
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 = AnimElem = 3
ignorehitpause = 1
persistent = 0
time = 3
under = 1


[State 400, 2]
type = HitDef
trigger1 = time=0
attr = S,HA
guardflag = M
hitflag = MAF
givepower = 21,21
animtype = back
damage = 100
pausetime = 5,20
sparkno = s7002
guard.sparkno = s7011
sparkxy = -50,-50
hitsound = s0,13
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5,-10
guard.velocity = -5
air.type = Low
air.velocity = -5,-10
air.hittime = 12
air.fall = 1
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5
p2stateno = 1450
p1stateno = 1401

 
[State 810, 1]
type = ChangeState
trigger1 = FrontEdgeBodyDist <= 20
value = 1402


[State 810, 1]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl=1

;火箭头槌-撞完
[Statedef 1401]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 1401
poweradd = 100
sprpriority = 2

[State 0, PosAdd]
type = velAdd
trigger1 = AnimElem = 3
x = -6
ignorehitpause =  1


[State 810, 1]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl=1

;火箭头槌-撞墙
[Statedef 1402]
type    = A
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 1402
poweradd = 100
sprpriority = 2


[State 震动]
type = EnvShake
trigger1 = time = 1
ignorehitpause = 1
persistent = 0
time = 20
ampl = 20
freq = 100
phase = 90

[State 210, 1]
type = PlaySnd
trigger1 = time = 0
value = 14,2

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 1
value = -100
kill = 1
absolute = 0


[State 810, 1]
type = ChangeState
trigger1 = Animtime = 0
value = 5100

;火箭头槌-撞墙光晕
[Statedef 1403]
type    = A
movetype= I
physics = N
juggle  = 2
poweradd= 0
ctrl = 0
anim = 1967
sprpriority = -2
velset = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 =  1
value = 1
movecamera = 1,0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 =facing = 1
x = -250
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 =facing = -1
x = 250
ignorehitpause = 1


[State 8210]
type = PlaySnd
trigger1 = time = 0
value = s14,2

[State 震动]
type = EnvShake
trigger1 =  time = 0
ignorehitpause = 1
persistent = 0
time = 10
ampl = 20
freq = 100
phase = 90


[State 0, Trans]
type = Trans
trigger1 = 1
trans = add


[State 0, AngleDraw]
type = null;AngleDraw
trigger1 = 1
value = 270
ignorehitpause = 1



[State ]
type = DestroySelf
trigger1 = animtime = 0
ignorehitpause = 1



;火箭头槌-撞墙光晕
[Statedef 1404]
type    = A
movetype= I
physics = N
juggle  = 2
poweradd= 0
ctrl = 0
anim = 1968
sprpriority = -2
velset = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 =  1
value = 1
movecamera = 1,0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 =facing = 1
x = 250
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 =facing = -1
x = -250
ignorehitpause = 1


[State 8210]
type = PlaySnd
trigger1 = time = 0
value = s14,2

[State 震动]
type = EnvShake
trigger1 =  time = 0
ignorehitpause = 1
persistent = 0
time = 10
ampl = 20
freq = 100
phase = 90


[State 0, Trans]
type = Trans
trigger1 = 1
trans = add


[State 0, AngleDraw]
type = null;AngleDraw
trigger1 = 1
value = 270
ignorehitpause = 1



[State ]
type = DestroySelf
trigger1 = animtime = 0
ignorehitpause = 1





;火箭头槌-P2状态
[Statedef 1450]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0

[State 0, HitFallSet]
type = POSSet
trigger1 = 1
y = 0

[State 1028, Turn]
type = Turn
trigger1 = facing = enemy,facing

[State 1505]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1010

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =1

[State 1505]
type = Veladd
trigger1 = 1
y = 0
x = -2

[State 1505, ChangeState]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 5
trigger2 = FrontEdgeBodyDist <= 5
value = 1011


;放马过来啊~~~
[Statedef 1500]
type    = S
movetype= H
physics = S
juggle  = 15
poweradd = 200
ctrl = 0
velset = 0,0
anim = 1500
sprpriority = 10


[State 8210]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1500,0
ignorehitpause = 1

[State x]
type = ReversalDef
Trigger1 = time = 0
reversal.attr = SCA,AA,AT,AP
sparkno = s70020
;p1stateno = 2301
p2stateno = 1520
ignorehitpause = 1



[State 9003, 确认主体]
type = ChangeState
trigger1 = p2stateno = 1520
value = 1550



[State 810, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;当身-P2僵直
[Statedef 1520]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 =1
ignorehitpause = 1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1520

[State 820, 1]
type = selfstate
Trigger1 = Time = 20
value =0
ctrl=1

;八嘎~~~~~~~
[Statedef 1550]
type    = A
movetype= A
physics = S
juggle  = 15
poweradd = 0
ctrl = 0
velset = 0,0
anim = 1550
sprpriority = 10

[state 361, 1]
type = explod
trigger1 = animelem = 1
postype = p1
;bindtime = 1
removetime = 8
removeongethit = 1
pos = 0,0
anim = 1551
scale=.6,.6
sprpriority = 3

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 40
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
ignorehitpause = 1

[State 8210]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,10
ignorehitpause = 1

[State 8210]
type = PlaySnd
trigger1 = AnimElem = 5
value = 1550,0
ignorehitpause = 1



[State 8210]
type = posadd
trigger1 = AnimElem = 3
x = Ceil(P2BodyDist X)+60
y = Ceil(P2BodyDist Y)-50



[State 8210]
type = NULL;Pause
trigger1 = 1
time = 1
movetime = 1

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 3
under = 1


[State 640, 3]
type = hitdef
trigger1 = time = 0
attr = S,NA
givepower = 21,21
animtype = back
priority = 4,Hit
damage = 68
pausetime = 30,130
sparkno = s7002
guard.sparkno = s7011
sparkxy = -15,-20
hitsound = s0,13
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5
guard.velocity = -10
air.velocity = -3.5,-6
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5

[State 震动]
type = EnvShake
trigger1 =  movehit
ignorehitpause = 1
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90

[State 0, Turn]
type = Turn
trigger1 = AnimTime = 0
ignorehitpause = 1

[State 810, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;多彩の技-肘击
[Statedef 1600]
type    = S
movetype= A
physics = S
juggle  = 15
poweradd = 100
ctrl = 0
velset = 0,0
anim = 1600
sprpriority = 10

[State 0, PosAdd]
type = PosAdd
trigger1 = !movehit
trigger1 = time = [1,8]
x = 5
ignorehitpause = 1

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = S,SA
guardflag = M
hitflag=MAFDLP
givepower = 21,21
animtype = back
damage = 30
pausetime = 10,23
sparkno = s7001
guard.sparkno = s7011
sparkxy = -15,-70
hitsound = s0,8
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 5
ground.hittime = 18
ground.velocity = -5
guard.velocity = -10
air.type = Low
air.velocity = -5,15
air.hittime = 12
air.fall = 1
p2stateno=1630
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5
EnvShake.time = 15
EnvShake.freq = 100
EnvShake.ampl = -8

[State 810, 1]
type = ChangeState
trigger1 = Movehit
trigger1 = P2Movetype = H
trigger1 = AnimTime = 0
value = 1610

[State 810, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;多彩の技-踢飞
[Statedef 1610]
type    = A
movetype= A
physics = N
anim = 1610
velset = 0,0
ctrl = 0
poweradd = 100

[State 8210]
type = posadd
trigger1 = AnimElem = 1
x = Ceil(P2BodyDist X)-5

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = statetype=A
statetype = A       ;S,A,C,L
movetype = A       ;I,A,H
physics = N         ;A,C,S,N
ignorehitpause =1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = statetype!=A
statetype = S       ;S,A,C,L
movetype = A       ;I,A,H
physics = N         ;A,C,S,N
ignorehitpause =1

[State 0, PlayerPush]
type = PlayerPush
trigger1 =1
value = 0
ignorehitpause =1


[State 1200 , 1]
type = HitDef
trigger1 = time =  0
attr = S, SA
animtype  = Hard
damage  = 20,20
priority = 5
hitflag=MAFDLP
pausetime = 5,10
sparkno = s7002
guard.sparkno = s4110
sparkxy = -20,-55
hitsound = s0,8
hitflag = MAF
guardsound = s2,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4.5,-5.5
air.velocity = -4.5,-5.5
air.animtype = Back
fall = 1
fall.recovertime = 25
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 1640
p2facing = 1
kill = 0

[State 810, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 1620

;多彩の技-瞬移
[Statedef 1620]
type    = A
movetype= A
physics = S
juggle  = 15
poweradd = 0
ctrl = 0
velset = 0,0
anim = 1620
sprpriority = 10

[State 710]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,10


[state 360, 1]
type = explod
trigger1 = animelem = 1
postype = p1
removeongethit = 1
pos = 0,0
anim = 1621
scale=.6,.6
sprpriority = 3

[state 360, 1]
type = explod
trigger1 = animelem = 1
postype = p1
removetime = 8
removeongethit = 1
pos = 0,0
anim = 1621
scale=.6,.6
sprpriority = 3

[state 360, 1]
type = explod
trigger1 = time = 20
postype = p1
removetime = 8
removeongethit = 1
pos = 0,0
anim = 1621
scale=.6,.6
sprpriority = 3

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = statetype=A
statetype = A       ;S,A,C,L
movetype = A       ;I,A,H
physics = N         ;A,C,S,N
ignorehitpause =1


[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = statetype!=A
statetype = S       ;S,A,C,L
movetype = A       ;I,A,H
physics = N         ;A,C,S,N
ignorehitpause =1


[State 810, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 1650

;多彩の技-P2定位
[Statedef 1630]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 =1
ignorehitpause = 1


[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1630

[State 0, SelfState]
type = SelfState
trigger1 = Time = 80
value =0
ctrl =1

;多彩の技-P2上升
[Statedef 1640]
type     = A
movetype = H
physics  = N

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -50
kill = 1
absolute = 0

[State 0, Pause]
type = Pause
trigger1 = time = [0,30]
time = 1
movetime = 1



[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =1



[State 震动]
type = EnvShake
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
time = 10
ampl = 20
freq = 100
phase = 90


[State 1028, Velset]
type = VelSet
trigger1 = Time = 0
y = -15


[State 1028, Velset]
type = VelSet
trigger1 = Time = 0
x = 0


[State 1028, VelAdd]
type = VelAdd
trigger1 = 1
y = .4


[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1000, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 1
under = 1

[State 1028, SelfState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;多彩の技-叩击
[Statedef 1650]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 20
ctrl = 0
anim = 1650
sprpriority = 2

[State 2000]
type = SuperPause
trigger1 = AnimElem = 1
time = 35
movetime = 35
anim = -1

[State 0, Explod]
type = Explod
trigger1 = enemy,time = 1
trigger1 = enemy,stateno =5100
anim = 1966
pos = 0,0
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .5,.5
sprpriority = 6
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 震动]
type = EnvShake
trigger1 = p2stateno =5100
trigger1 = enemy,time = 1
ignorehitpause = 1
persistent = 0
time = 20
ampl = 20
freq = 100
phase = 90

[State 210, 1]
type = PlaySnd
trigger1 = enemy,time = 1
trigger1 = p2stateno =5100
value = 14,2


[State 8210]
type = posadd
trigger1 = AnimElem = 1
x = Ceil(P2BodyDist X)+80
y = Ceil(P2BodyDist Y)-50

[State 0, Turn]
type = Turn
trigger1 = time = 0
;trigger1 =  frontedgedist <= 100
ignorehitpause = 1


[State 8210]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1650,0
ignorehitpause = 1

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 = movehit=1
ignorehitpause = 1
persistent = 0
time = 3
under = 1

[State 震动]
type = EnvShake
trigger1 =  movehit=1
ignorehitpause = 1
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90

[State 2000]
type = SuperPause
trigger1 = AnimElem = 1
time = 15
movetime = 15
anim = -1

[State 640, 3]
type = HitDef
trigger1 = time = 0
attr = S,SA
guardflag = H
givepower = 21,21
animtype = Hard
priority = 4,Hit
damage = 30
pausetime = 10,15
sparkno = s7002
guard.sparkno = s7011
sparkxy = -15,-60
hitsound = s0,10
guardsound = s120,1
animtype = Hard
ground.type = Low
ground.slidetime = 1
ground.hittime  = 24
ground.velocity = -15
guard.ctrltime = 50
air.type = Low
air.velocity = -5,15
air.hittime = 12
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = -12
air.cornerpush.veloff = -12
fall.envshake.time = 12
fall.envshake.ampl = 4
fall.envshake.freq = 90
EnvShake.time = 15
EnvShake.freq = 100
EnvShake.ampl = -8
P2STATENO=1320

;爆弹踢特别版
[Statedef 1700]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 100
velset = 0,0
anim = 1700
sprpriority = 1
ctrl = 0

[State 1]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, PosAdd]
type = veladd
trigger1 = time >= 5
x = 4
ignorehitpause = 1

[State 1701, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 1,14

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 3
under = 1


[State 1350, 1]
type = HitDef
Trigger1 = time = 0
attr = , HP
hitflag = MAF
hitsound = s0,10
sparkno = s7002
numhits = 0
sparkxy = -20,-80
p2facing = 1
p1stateno = 1701
p2stateno = 1710

[State 震动]
type = EnvShake
trigger1 =  movehit
ignorehitpause = 1
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90

[State 1700,changestate]
type = changestate
trigger1 = animtime = 0
value = 1251
ctrl = 1

;爆弹踢特别版-命中滑行
[Statedef 1701]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 1701
sprpriority = 3
ctrl = 0


[State 0, PosAdd]
type = veladd
trigger1 = 1
x = 2
ignorehitpause = 1


[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =  1

[State 0, TargetBind]
type = TargetBind
trigger1 = 1
pos = 50,20
ignorehitpause = 1

[State 400, 4]
type = ChangeState
trigger1 = FrontEdgeBodyDist <= 20
value = 1702
ctrl = 0

;爆弹踢特别版-版边
[Statedef 1702]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 50
velset = 0,0
anim = 1702
sprpriority = 9
ctrl = 0


[State 震动]
type = EnvShake
trigger1 = AnimElem = 1
ignorehitpause = 1
persistent = 0
time = 30
ampl = -10
freq = 100
phase = 90

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S5,4

[State 0, LifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 1
value = -80
kill = 1
absolute = 0


[State 0, TargetState]
type = TargetState
trigger1 = time =  0
value = 1711
ignorehitpause = 1



[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 7002
pos = 30,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 99
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 1

[State 0, HitAdd]
type = HitAdd
trigger1 = AnimElem = 2
value = 1
ignorehitpause = 1

[State 1700,changestate]
type = changestate
trigger1 = animtime = 0
value = 1703
ctrl = 1

;爆弹踢特别版-后跳
[Statedef 1703]
type    = A
physics = A
ctrl = 0
anim = 1703
sprpriority = 1

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = -4
y = -3.8

[State -3, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = 2,0


[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -5
value = 1704


;爆弹踢特别版-落地
[StateDef 1704]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 1704
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time =5
value = S2,2
ignorehitpause = 1



[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause =  1


[State 400, 4]
type = ChangeState
trigger1 = animtime =0
value = 0
ctrl = 1

;爆弹踢特别版-撞墙光晕
[Statedef 1705]
type    = A
movetype= I
physics = N
juggle  = 2
poweradd= 0
ctrl = 0
anim = 1967
sprpriority = -2
velset = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 =  1
value = 1
movecamera = 1,0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 =facing = 1
x = 250
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 =facing = -1
x = -250
ignorehitpause = 1


[State 8210]
type = PlaySnd
trigger1 = time = 0
value = s14,2

[State 震动]
type = EnvShake
trigger1 =  time = 0
ignorehitpause = 1
persistent = 0
time = 10
ampl = 20
freq = 100
phase = 90


[State 0, Trans]
type = Trans
trigger1 = 1
trans = add


[State 0, AngleDraw]
type = null;AngleDraw
trigger1 = 1
value = 270
ignorehitpause = 1



[State ]
type = DestroySelf
trigger1 = animtime = 0
ignorehitpause = 1



;爆弹踢特别版-P2状态
[Statedef 1710]
type    = A
movetype= H
physics = N
sprpriority = 2
velset = 0,0

[State 0, Turn]
type = Turn
trigger1 = facing = enemy,facing



[State 1]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1710


[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =  1


[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1

;爆弹踢特别版-P2空中旋转
[Statedef 1711]
type = A
movetype = H
physics = N

[State 0, Pause]
type = Pause
trigger1 = time = [0,10]
time = 1
movetime = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1711

[State 0, ChangeState]
type = ChangeState
trigger1 = time >=6
value = 1712

;爆弹踢特别版-P2空中旋转B
[Statedef 1712]
type    = A
movetype= H
physics = N
velset = 0,-13


[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = time > 0
y = .5

[State 0, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 20

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Pos Y >= -15 && Vel Y > 0
trigger1 = SelfAnimexist(5061)
value = 5061

[State 0, SelfState]
type = SelfState
trigger1 = Pos Y >= -15 && Vel Y > 0
value = 5100

;大旋风踢
[Statedef 1750]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 100
velset = 0,0
anim = 1750
sprpriority = 1
ctrl = 0

[State 8210]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1750,0
ignorehitpause = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 1
anim = 3590
sprpriority = 10
postype = p1
pos = 0,0
scale = .5,.5
bindtime = -1
supermove = 1
under = 0
ownpal = 1
ignorehitpause =  1

[State 0, PosSet]
type = Posadd
trigger1 = 1
y = 0
x = 4
ignorehitpause =  1

[State 0, PosSet]
type = hitadd
trigger1 = movehit=1
value=1

[State 640, 3]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
trigger3 = AnimElem = 5
trigger4 = AnimElem = 7
trigger5 = AnimElem = 9
trigger6 = AnimElem = 11
trigger7 = AnimElem = 13
trigger8 = AnimElem = 15
trigger9 = AnimElem = 17
trigger10 = AnimElem = 19
trigger11 = AnimElem = 2
trigger12 = AnimElem = 4
trigger13 = AnimElem = 6
trigger14 = AnimElem = 8
trigger15 = AnimElem = 10
trigger16 = AnimElem = 12
trigger17 = AnimElem = 14
trigger18 = AnimElem = 16
trigger19 = AnimElem = 18
attr = , HP
hitflag = MAF
damage=5
hitsound = s0,10
sparkno = s7002
numhits = 0
sparkxy = -20,-80
p2facing = 1
p2stateno = 1760


[State 640, 3]
type = HitDef
trigger1 = AnimElem = 20
attr = , HP
hitflag = MAF
hitsound = s0,10
sparkno = s7002
numhits = 0
sparkxy = -20,-80
p2facing = 1
p2stateno = 1761

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1


;大旋风踢-P2状态
[Statedef 1760]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, PosSet]
type = Posadd
trigger1 = 1
y = 0
x = -3
ignorehitpause =  1

[State 0, Turn]
type = Turn
trigger1 = facing = enemy,facing

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = ifelse(Random <= 500,5001,5011)

[State 0, ChangeState]
type = SelfState
Trigger1 = Time = 10
value = 5100
ctrl = 1

;大旋风踢-P2状态-弹出
[Statedef 1761]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0


[State 1028, Turn]
type = Turn
trigger1 = facing = enemy,facing

[State 1505]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1010

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =1

[State 1505]
type = Veladd
trigger1 = 1
y = 0
x = -2

[State 1505, ChangeState]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 5
trigger2 = FrontEdgeBodyDist <= 5
value = 1762

;大旋风踢-P2状态-弹墙
[Statedef 1762]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -100
kill = 1
absolute = 0

[State 0, Pause]
type = Pause
trigger1 = time = [0,30]
time = 1
movetime = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =1

[State 震动]
type = EnvShake
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
time = 10
ampl = 20
freq = 100
phase = 90


[State 1028, Velset]
type = VelSet
trigger1 = Time = 0
y = -12

[State 1028, Velset]
type = VelSet
trigger1 = Time = 0
x = -2

[State 1028, VelAdd]
type = VelAdd
trigger1 = 1
y = .9


[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1000, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 1
under = 1

[State 1028, SelfState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;幽灵神风攻击A
[StateDef 1800]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1800
poweradd = -(500+var(31)*100)

[State 8210]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1800,0
ignorehitpause = 1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 3
ID = 1850
pos = 50,0
stateno = 1850
facing = 1
helpertype = normal
name = "幽灵"
keyctrl = 0
ownpal = 1
size.xscale = .85
size.yscale = .85
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 3
triggerall=var(31) >= 1
ID = 1850
pos = -50,0
stateno = 1850
facing = 1
helpertype = normal
name = "幽灵"
keyctrl = 0
ownpal = 1
size.xscale = .85
size.yscale = .85
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 3
triggerall=var(31) >= 2
ID = 1850
pos = -20,20
stateno = 1850
facing = 1
helpertype = normal
name = "幽灵"
keyctrl = 0
ownpal = 1
size.xscale = .85
size.yscale = .85
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 3
triggerall=var(31) >= 3
ID = 1850
pos = 20,20
stateno = 1850
facing = 1
helpertype = normal
name = "幽灵"
keyctrl = 0
ownpal = 1
size.xscale = .85
size.yscale = .85
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 3
triggerall=var(31) >= 4
ID = 1850
pos = 20,-40
stateno = 1850
facing = 1
helpertype = normal
name = "幽灵"
keyctrl = 0
ownpal = 1
size.xscale = .85
size.yscale = .85
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 3
triggerall=var(31) >= 5
ID = 1850
pos = -20,-40
stateno = 1850
facing = 1
helpertype = normal
name = "幽灵"
keyctrl = 0
ownpal = 1
size.xscale = .85
size.yscale = .85
supermovetime = -1

[State 1400,changestate]
type = changestate
trigger1 = AnimTime = 0
value = 1810


;幽灵神风攻击B
[StateDef 1805]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1800
poweradd = -(500+var(31)*100)

[State 8210]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1800,1
ignorehitpause = 1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 3
ID = 1850
pos = 50,0
stateno = 1850
facing = 1
helpertype = normal
name = "幽灵"
keyctrl = 0
ownpal = 1
size.xscale = .85
size.yscale = .85
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 3
triggerall=var(31) >= 1
ID = 1850
pos = -50,0
stateno = 1850
facing = 1
helpertype = normal
name = "幽灵"
keyctrl = 0
ownpal = 1
size.xscale = .85
size.yscale = .85
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 3
triggerall=var(31) >= 2
ID = 1850
pos = -20,20
stateno = 1850
facing = 1
helpertype = normal
name = "幽灵"
keyctrl = 0
ownpal = 1
size.xscale = .85
size.yscale = .85
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 3
triggerall=var(31) >= 3
ID = 1850
pos = 20,20
stateno = 1850
facing = 1
helpertype = normal
name = "幽灵"
keyctrl = 0
ownpal = 1
size.xscale = .85
size.yscale = .85
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 3
triggerall=var(31) >= 4
ID = 1850
pos = 20,-40
stateno = 1850
facing = 1
helpertype = normal
name = "幽灵"
keyctrl = 0
ownpal = 1
size.xscale = .85
size.yscale = .85
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 3
triggerall=var(31) >= 5
ID = 1850
pos = -20,-40
stateno = 1850
facing = 1
helpertype = normal
name = "幽灵"
keyctrl = 0
ownpal = 1
size.xscale = .85
size.yscale = .85
supermovetime = -1

[State 1000, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;幽灵神风攻击-指挥出发
[StateDef 1810]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1801



[State 1000, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;幽灵神风攻击-被召唤
[Statedef 1850]
type = A
movetype = H
physics = S
anim = 1850
poweradd = 0
sprpriority = 100
velset = 0
ctrl = 0

[State 1000, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 1851


;幽灵神风攻击-待机
[Statedef 1851]
type = A
movetype = H
physics = S
anim = IfElse(random%3=0,1851,IfElse(random%2,1858,1859))
poweradd = 0
sprpriority = -1
velset = 0
ctrl = 0

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 3
under = 1

[State 震动]
type = EnvShake
trigger1 =  movehit
ignorehitpause = 0
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90

[State 0, Explod]
type = Explod
trigger1 = movehit
anim = 1853
ID = 1853
scale=.5,.5
pos = 20,-10
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
sprpriority = 2

[State 640, 3]
type = HitDef
trigger1 = time=0
attr = S, SP
damage   = 50+(root,var(32)*10),10
sparkno = s8018
guard.sparkno = s8018
sparkxy = -15,-20
animtype = heavy
hitflag = MAFP
pausetime = 0,10
hitsound   = s0,15
guardsound = S0,17
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6
guard.cornerpush.veloff = -5
air.velocity = -6,-6
fall = 1
fall.recover = 0
palfx.time = 70
palfx.sinadd = 92,92,92,12
palfx.add = 0,40,130
palfx.color = 0
palfx.invertall = 1
EnvShake.time = 20
EnvShake.freq = 100
EnvShake.ampl = -10

[State ]
type = hitoverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1854
ignorehitpause = 1

[State ]
type = DestroySelf
trigger1 = movehit

[State ]
type = changestate
trigger1 = AnimTime = 0
trigger2 = root,stateno=1810&&root,AnimElem = 3
value=1852

;幽灵神风攻击-冲刺
[Statedef 1852]
type = A
movetype = H
physics = S
anim = 1852
poweradd = 0
sprpriority = -1
velset = 0,0
ctrl = 0


[State 1505]
type = Veladd
trigger1 = time>10
y = .8
x = 3

[State 震动]
type = EnvShake
trigger1 =  movehit
ignorehitpause = 0
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 =  movehit
ignorehitpause = 1
persistent = 0
time = 3
under = 1

[State 0, Explod]
type = Explod
trigger1 = movehit
anim = 1853
ID = 1853
scale=.5,.5
pos = 20,-10
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
sprpriority = 2

[State 640, 3]
type = HitDef
trigger1 = time=0
attr = S, SP
damage   = 50+(root,var(32)*10),10
sparkno = s8018
guard.sparkno = s8018
sparkxy = -15,-20
animtype = heavy
hitflag = MAFP
pausetime = 0,10
hitsound   = s0,15
guardsound = S0,17
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6
guard.cornerpush.veloff = -5
air.velocity = -6,-6
fall = 1
fall.recover = 0
palfx.time = 70
palfx.sinadd = 92,92,92,12
palfx.add = 0,40,130
palfx.color = 0
palfx.invertall = 1
EnvShake.time = 20
EnvShake.freq = 100
EnvShake.ampl = -10

[State ]
type = DestroySelf
trigger1 = movehit

[State ]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -5
value=1853

;幽灵神风攻击-撞地
[Statedef 1853]
type = A
movetype = H
physics = S
anim = 1855
poweradd = 0
sprpriority = 100
velset = 0,0
ctrl = 0

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 = time=0
ignorehitpause = 1
persistent = 0
time = 3
under = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =  1

[State 震动]
type = EnvShake
trigger1 = time=0
ignorehitpause = 0
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S0,15

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 1854
ID = 1854
;scale=.5,.5
pos = 0,40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
sprpriority = 2

[State 640, 3]
type = HitDef
trigger1 = time=0
attr = S, SP
damage   = 50+(root,var(32)*10),10
sparkno = s8018
guard.sparkno = s8018
sparkxy = -15,-20
animtype = heavy
hitflag = MAFDLP
pausetime = 0,10
hitsound   = s0,105
guardsound = S0,17
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6
guard.cornerpush.veloff = -5
air.velocity = -6,-6
fall = 1
fall.recover = 0
palfx.time = 70
palfx.sinadd = 92,92,92,12
palfx.add = 0,40,130
palfx.color = 0
palfx.invertall = 1
EnvShake.time = 20
EnvShake.freq = 100
EnvShake.ampl = -10

[State ]
type = DestroySelf
trigger1 = AnimTime = 0

;幽灵神风攻击-被攻击
[Statedef 1854]
type = A
movetype = H
physics = S
anim = 1855
poweradd = 0
sprpriority = 100
velset = 0,0
ctrl = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =  1

[State 震动]
type = EnvShake
trigger1 = time=0
ignorehitpause = 0
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 1853
ID = 1853
scale=.5,.5
pos = 0,20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S0,15


[State 640, 3]
type = HitDef
trigger1 = time=0
attr = S, SP
damage   = 50+(root,var(32)*10),10
sparkno = s8018
guard.sparkno = s8018
sparkxy = -15,-20
animtype = heavy
hitflag = MAFDLP
pausetime = 0,10
hitsound   = s0,105
guardsound = S0,17
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6
guard.cornerpush.veloff = -5
air.velocity = -6,-6
fall = 1
fall.recover = 0
palfx.time = 70
palfx.sinadd = 92,92,92,12
palfx.add = 0,40,130
palfx.color = 0
palfx.invertall = 1
EnvShake.time = 20
EnvShake.freq = 100
EnvShake.ampl = -10

[State ]
type = DestroySelf
trigger1 = AnimTime = 0

;★龟派气功★
[StateDef 2000]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 2000
poweradd = -1000
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 =1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1


[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 3
value = S2000,0
ignorehitpause = 1



[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 1
value = S5,0
ignorehitpause = 1

[State 2000]
type = PosAdd
trigger1 = time > 36
X = -10

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 2
anim = 2004
sprpriority = 2
postype = p1
removetime = 30
pos = -50,-55
scale = .4,.4
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 4
anim = 2005
sprpriority = 3
postype = p1
removetime = 3
pos = -40,-46
scale = .4,.4
bindtime = 1
supermove = 1
under = 0
ownpal = 1


[State 闪光]
type = EnvColor
value = 0,0,0
trigger1 = AnimElem = 1
ignorehitpause = 1
persistent = 0
time = 35
under = 1

[State 2000]
type = SuperPause
trigger1 = AnimElem = 1
time =36
movetime = 36
anim = -1

[State 1000]
type = Explod
trigger1 = AnimElem = 1
anim = 6000
sprpriority = -100
postype = p1
pos = -30,-45
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 1
anim = 6001
sprpriority = 10
postype = p1
pos = -30,-45
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 震动]
type = EnvShake
trigger1 = AnimElem = 1
ignorehitpause = 1
persistent = 0
time = 20
ampl = 20
freq = 100
phase = 90

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 4
anim = 16005
sprpriority = 10
postype = p1
pos = 30,0
scale = .5,.5
bindtime = -1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 5
anim = 2002
sprpriority = 10
postype = p1
pos = 85,-58
scale = .5,.5
bindtime = -1
supermove = 1
under = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S3,7
ignorehitpause = 1


[State 1000, 5]
type = Explod
trigger1 = AnimElem = 5
anim = 2003
sprpriority = 10
postype = p1
pos = 25,-58
scale = 1,1
bindtime = -1
supermove = 1
under = 0
ownpal = 1



[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 50
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 2
under = 1

[State 4016, Helper]
type = Helper;type = Helper
triggerall = !numhelper(2001)
trigger1 =  AnimElem = 4
ID = 2001
pos = 50,-78
stateno = 2001
facing = 1
size.xscale = 1
size.yscale = 1
helpertype = player
name = "波动"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 0, ChangeState]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;★龟派气功★-波动
[Statedef 2001]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 5
ctrl = 0
anim = 2001
sprpriority = 3

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 50
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1


[State 0, Turn]
type = Turn
trigger1 = facing != root,facing

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 50,-58

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State ]
type = DestroySelf
trigger1 = root,stateno !=2000
trigger2 = root,time =89

[State 0, HitAdd]
type = HitAdd
trigger1 = movehit = 1
value = 2



[State 640, 3]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 6
trigger4 = animelem = 8
trigger5 =  animelem = 10
trigger6 =  animelem = 12
attr = S,HP
numhits = 0
hitsound   = s0,10
guardflag = M
hitflag = MAFDLP
givepower = 0,0
getpower = 0,0
animtype = Hard
priority = 4,Hit
damage = 30,10
pausetime = 1,15
sparkno = s7002
guard.ctrltime = 10
guard.sparkno = s7012
sparkxy = (500-random)/0,0+(500-random)/17
guardsound = S120,1
ground.type = High
air.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5
guard.velocity = -10
air.velocity = -3.5,-6
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5



[State 640, 3]
type = HitDef
trigger1 = animelem = 14
attr = S, HP
damage   = 100
givepower = 0,0
getpower = 0,0
sparkno = s7002
guard.sparkno = s7012
sparkxy = (500-random)/0,0+(500-random)/17
animtype = heavy
guardflag = MA
hitflag = MAFDPL
pausetime = 0,10
hitsound   = s0,10
guardsound = S120,1
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6.5
guard.cornerpush.veloff = -5
air.velocity = -6,-6.8
fall = 1
fall.recover = 0
EnvShake.time = 20
EnvShake.freq = 100
EnvShake.ampl = -10

;★超级炸面圈★
[StateDef 2100]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 2100
poweradd = -1000
sprpriority = 2

[State 0, BGPalFX]
type = BGPalFX
trigger1 = AnimElem = 1
time = 113
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1


[State 8210]
type = PlaySnd
trigger1 = AnimElem = 1
value = s2100,0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 1
value = S5,0
ignorehitpause = 1

[State 1000]
type = Explod
trigger1 = AnimElem = 1
anim = 6000
sprpriority = -100
postype = p1
pos = 25,-90
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 1
anim = 6001
sprpriority = 10
postype = p1
pos = 25,-90
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 震动]
type = EnvShake
trigger1 = AnimElem = 1
ignorehitpause = 1
persistent = 0
time = 20
ampl = 20
freq = 100
phase = 90

[State 闪光]
type = EnvColor
value = 0,0,0
trigger1 = AnimElem = 1
ignorehitpause = 1
persistent = 0
time = 35
under = 1

[State 2000]
type = SuperPause
trigger1 = AnimElem = 1
time =36
movetime = 36
anim = -1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 50
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1


[State 4016, Helper]
type = Helper;type = Helper
triggerall = !numhelper(2101)
trigger1 =  AnimElem = 2
ID = 2101
pos = 0,-110
stateno = 2101
facing = 1
size.xscale = 1
size.yscale = 1
helpertype = normal
name = "波动"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 1000, end]
type = ChangeState
trigger1=enemy,stateno=2110
value = 2105

[State 1000, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl=1

;★超级炸面圈★-压缩
[StateDef 2105]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 2105
sprpriority = 2

[State 0, BGPalFX]
type = BGPalFX
trigger1 = AnimElem = 1
time = 113
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1


[State 1000, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl=1

;★超级炸面圈★-被召唤
[Statedef 2101]
type = S
movetype = H
physics = S
anim = 2101
poweradd = 0
sprpriority = 100
velset = 0
ctrl = 0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = AnimElem = 1
time = 113
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1


[State 1000, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 2102

;★超级炸面圈★-冲刺
[Statedef 2102]
type = S
movetype = H
physics = S
anim = 2102
poweradd = 0
sprpriority = 100
velset = 0,0
ctrl = 0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = AnimElem = 1
time = 113
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1


[State 4016, Helper]
type = Helper;type = Helper
trigger1 = movehit
ID = 2111
pos = -20,-50
postype=p2
stateno = 2111
facing = 1
size.xscale = .5
size.yscale = 0.15
helpertype = player
name = "波动"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 1505]
type = Veladd
trigger1 = 1
y = .3
x = 3

[State 1350, 1]
type = HitDef
Trigger1 = time = 0
attr = , HT
hitflag = MAFDLP
sparkno = s70111
;numhits = 1
P2STATENO = 2110

[State ]
type = DestroySelf
trigger1 = movehit
trigger2 = root,stateno!=2100
trigger3 = frontedgedist <= -80

;★超级炸面圈★-P2状态
[Statedef 2110]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, PosSet]
type = Posset
trigger1 = 1
y = 0
ignorehitpause =  1

[State 0, Turn]
type = Turn
trigger1 = facing = enemy,facing

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2110

[State 0, ChangeState]
type = SelfState
Trigger1 = Time = 200
value = 5100
ctrl = 1

;★超级炸面圈★-P2光环
[Statedef 2111]
type = S
movetype = H
physics = S
anim = 2103
poweradd = 0
sprpriority = 100
velset = 0,0
ctrl = 0

[State 0: AfterImage]
type = AfterImage
trigger1 = time = 1
time = 120
length = 10
palcolor = 256
palinvertall = 0
palbright = 60,60,60
palcontrast = 255,255,0
palpostbright = 10,10,10
paladd = 10,10,25
palmul = .65,.65,.75
timegap = 1
framegap = 4
trans = Add
ignorehitpause = 1
persistent = 1


[State 1000, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 2112

;★超级炸面圈★-P2光环2
[Statedef 2112]
type = S
movetype = H
physics = S
anim = 2104
poweradd = 0
sprpriority = 100
velset = 0,0
ctrl = 0

[State 0: AfterImage]
type = AfterImage
trigger1 = time = 1
time = 120
length = 10
palcolor = 256
palinvertall = 0
palbright = 60,60,60
palcontrast = 255,255,0
palpostbright = 10,10,10
paladd = 10,10,25
palmul = .65,.65,.75
timegap = 1
framegap = 4
trans = Add
ignorehitpause = 1
persistent = 1

[State 1000, end]
type = ChangeState
trigger1 =root,stateno=2105&&root,AnimElem = 4
value = 2113

;★超级炸面圈★-光环爆炸
[Statedef 2113]
type = S
movetype = H
physics = S
anim = 2113
poweradd = 0
sprpriority = 100
velset = 0,0
ctrl = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =  1

[State 震动]
type = EnvShake
trigger1 = time=0
ignorehitpause = 0
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 2114
ID = 2114
;scale=.5,.5
pos = 0,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
sprpriority = 200

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S0,15

[State 640, 3]
type = HitDef
trigger1 = time=0
attr = S, SP
damage   = 250,10
sparkno = s8018
guard.sparkno = s8018
sparkxy = -15,-20
animtype = heavy
hitflag = MAFDLP
pausetime = 0,10
hitsound   = s0,105
guardsound = S0,17
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6
guard.cornerpush.veloff = -5
air.velocity = -6,-6
fall = 1
fall.recover = 0
palfx.time = 60
palfx.sinadd = 92,92,92,12
palfx.add = 165,165,0
palfx.color = 0
palfx.invertall = 1
EnvShake.time = 20
EnvShake.freq = 100
EnvShake.ampl = -10

[State ]
type = DestroySelf
trigger1 = AnimTime = 0

;★连续去死去死导弹攻击★
[StateDef 2200]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 2200
poweradd = -1000
sprpriority = 1

[State 8210]
type = PlaySnd
trigger1 = AnimElem = 1
value = s2200,0
ignorehitpause = 1

[State 2000]
type = PosAdd
trigger1 = time >= 33
X = -10

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 1
value = S5,0
ignorehitpause = 1


[State 1000, 5]
type = Explod
trigger1 = AnimElem = 2
anim = 2203
sprpriority = 3
postype = p1
removetime = 30
pos = -32,-83
scale = 0.05,0.05
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 2
anim = 2203
sprpriority = 2
postype = p1
removetime = 30
pos = -17,-83
scale = 0.048,0.048
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 3
trigger2 =  AnimElem = 5
trigger3 =  AnimElem = 7
trigger4 =  AnimElem = 9
trigger5 =  AnimElem = 11
trigger6 =  AnimElem = 13
trigger7 =  AnimElem = 15
trigger8 =  AnimElem = 17
trigger9 =  AnimElem = 19
trigger10 =  AnimElem = 21
trigger11 =  AnimElem = 4
trigger12 =  AnimElem = 6
trigger13 =  AnimElem = 8
trigger14 =  AnimElem = 10
trigger15 =  AnimElem = 12
trigger16 =  AnimElem = 14
trigger17 =  AnimElem = 16
trigger18 =  AnimElem = 18
trigger19 =  AnimElem = 20
trigger20 =  AnimElem = 22
value = S6,1
ignorehitpause = 1

[State 1]
type = NotHitBy
trigger1 = 1 &&palno>=6
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = AnimElem = 1
time = 113
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1


[State 闪光]
type = EnvColor
value = 0,0,0
trigger1 = AnimElem = 1
ignorehitpause = 1
persistent = 0
time = 35
under = 1

[State 2000]
type = SuperPause
trigger1 = AnimElem = 1
time = 35
movetime = 35
anim = -1


[State 1000]
type = Explod
trigger1 = AnimElem = 1
anim = 6000
sprpriority = -100
postype = p1
pos = -25,-83
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 1
anim = 6001
sprpriority = 10
postype = p1
pos = -25,-83
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 震动]
type = EnvShake
trigger1 =  AnimElem = 3
ignorehitpause = 1
persistent = 0
time = 70
ampl = 20
freq = 100
phase = 90

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 6
value = S5,8




[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 2
under = 1

[State 1000, 5]
type = Explod
trigger1 =  AnimElem = 3
trigger2 =  AnimElem = 5
trigger3 =  AnimElem = 7
trigger4 =  AnimElem = 9
trigger5 =  AnimElem = 11
trigger6 =  AnimElem = 13
trigger7 =  AnimElem = 15
trigger8 =  AnimElem = 17
trigger9 =  AnimElem = 19
trigger10 =  AnimElem = 21
anim = 2202
sprpriority = 3
postype = p1
removetime = 3
pos = 45,-55
;scale = .4,.4
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 =  AnimElem = 4
trigger2 =  AnimElem = 6
trigger3 =  AnimElem = 8
trigger4 =  AnimElem = 10
trigger5 =  AnimElem = 12
trigger6 =  AnimElem = 14
trigger7 =  AnimElem = 16
trigger8 =  AnimElem = 18
trigger9 =  AnimElem = 20
trigger10 =  AnimElem = 22
anim = 2202
sprpriority = 3
postype = p1
removetime = 3
pos = 40,-55
;scale = .4,.4
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 =  AnimElem = 3
trigger2 =  AnimElem = 5
trigger3 =  AnimElem = 7
trigger4 =  AnimElem = 9
trigger5 =  AnimElem = 11
trigger6 =  AnimElem = 13
trigger7 =  AnimElem = 15
trigger8 =  AnimElem = 17
trigger9 =  AnimElem = 19
trigger10 =  AnimElem = 21
ID = 2201
pos = 55,-55
stateno = 2201
facing = 1
;size.xscale = .3
;size.yscale = .3
helpertype = player
name = "冲击弹"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 =  AnimElem = 4
trigger2 =  AnimElem = 6
trigger3 =  AnimElem = 8
trigger4 =  AnimElem = 10
trigger5 =  AnimElem = 12
trigger6 =  AnimElem = 14
trigger7 =  AnimElem = 16
trigger8 =  AnimElem = 18
trigger9 =  AnimElem = 20
trigger10 =  AnimElem = 22
ID = 2201
pos = 50,-55
stateno = 2201
facing = 1
;size.xscale = .3
;size.yscale = .3
helpertype = player
name = "冲击弹"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1
[State 0, ChangeState]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;★连续去死去死导弹攻击★-飞道
[StateDef 2201]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 2201
sprpriority = 222
poweradd = 0


[State 0, Explod]
type = Explod
trigger1 = movehit
anim = 2114
ID = 2115
scale=.2,.2
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
random=70,70
sprpriority = 200


[State 0, Explod]
type = Explod
trigger1 = movehit
anim = 2114
ID = 2114
scale=.2,.2
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
random=70,70
vfacing = 1
sprpriority = 200

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =  1

[State 0, ScreenBound]
type = ScreenBound
trigger1 =  1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = 5
ignorehitpause = 1

[State ]
type = DestroySelf
trigger1 = stateno != 2201
trigger2 = movehit=1
ignorehitpause = 1



[State 640, 3]
type = HitDef
trigger1 = time = 0
attr = , HP
damage   = 15,10
sparkno = s70005
guard.sparkno = s7011
sparkxy = (500-random)/0,0+(500-random)/17
animtype = heavy
guardflag = HL
hitflag = MAFDP
absolute = 1
pausetime = 0,10
hitsound   = s8,0
guardsound = S120,1
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-5
guard.cornerpush.veloff = -5
air.velocity = -5,-2
fall = 1
fall.recover = 0
EnvShake.time = 20
EnvShake.freq = 100
EnvShake.ampl = -10

[State ]
type = DestroySelf
trigger1 = frontedgedist <= -80

;★什么啊，不会手下留情的★
[StateDef 2300]
type = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
anim = 2300
poweradd = -1000
sprpriority = 1


[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem =2
value = S2300,0
channel = 44
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 1
value = S5,0
ignorehitpause = 1

[State 1000]
type = Explod
trigger1 = AnimElem = 1
anim = 6000
sprpriority = -100
postype = p1
pos = 0,-60
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 1
anim = 6001
sprpriority = 10
postype = p1
pos = 0,-60
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 震动]
type = EnvShake
trigger1 = AnimElem = 1
ignorehitpause = 1
persistent = 0
time = 20
ampl = 20
freq = 100
phase = 90

[State 闪光]
type = EnvColor
value = 0,0,0
trigger1 = AnimElem = 1
ignorehitpause = 1
persistent = 0
time = 35
under = 1

[State 2000]
type = SuperPause
trigger1 = AnimElem = 1
time =36
movetime = 36
anim = -1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 35
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1

[State x]
type = ReversalDef
Trigger1 = time = 0
reversal.attr = SCA,NA,SA,HA,NP,HP,NT,HT
sparkno = s70020
p1stateno = 2301
p2stateno = 2310
ignorehitpause = 1

[State 2000]
type = poweradd
trigger1 = AnimElem = 37
value=1000

[State 2000]
type = lifeadd
trigger1 = AnimElem = 37
value=200


[State 1000, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;★什么啊，不会手下留情的★-闪避
[StateDef 2301]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 2301
sprpriority = 1

[State 0: Bind]
type = TargetBind
trigger1 = time < 160
pos = 50,0

[State 210, 1];U
type = PlaySnd
triggerall = (time <160)
trigger1 = ((time >15) && (timemod = 23,0))
value = S1, 12
channel = -1


[State 210, 1];U
type = PlaySnd
triggerall = (time <160)
trigger1 = ((time >11) && (timemod = 15,0))
value = S1, 11
channel = -1

[State 210, 1];U
type = PlaySnd
triggerall = (time <160)
trigger1 = ((time >11) && (timemod = 15,0))
value = S1, 11
channel = -1


[State 210, 1];U
type = PlaySnd
triggerall = (time <160)
trigger1 = ((time >1) && (timemod = 28,0))
value = S1, 13
channel = -1


[State 210, 1];U
type = PlaySnd
triggerall = (time <160)
trigger1 = ((time >6) && (timemod = 30,0))
value = S1, 14
channel = -1


[State 52, 1]
type = VelSet
trigger1 = 1
x = -1.5

[State 0: AfterImage]
type = AfterImage
trigger1 = time = 1
time = 160
length = 10
palcolor = 256
palinvertall = 0
palbright = 60,60,60
palcontrast = 120,120,120
palpostbright = 10,10,10
paladd = 10,10,25
palmul = .65,.65,.75
timegap = 1
framegap = 4
trans = Add
ignorehitpause = 1
persistent = 1

[State 1000, end]
type = ChangeState
trigger1 = enemy,stateno!=2310
value = 0
ctrl=1

[State 1000, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 2302

;★什么啊，不会手下留情的★-撞飞
[Statedef 2302]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd = 50
ctrl = 0
velset = 0,0
anim = 2302
sprpriority = 10

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1,14

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 7,2

[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.6,0.6
sprpriority = 123
ownpal = 1
ignorehitpause = 1

[State 8210]
type = veladd
trigger1 = AnimElem >= 1
x = 5

[State 400, 2]
type = HitDef
trigger1 = time = 0
attr = S, SP
damage   = 100,30
sparkno = s70001
hitflag=MAFDLP
guard.sparkno = s7012
sparkxy = -20,-40
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 10,20
hitsound   = s0,10
guardsound = S120,1
ground.type = low
ground.slidetime = 10
ground.hittime  = 17
ground.velocity = -5,-6.5
air.cornerpush.veloff = -20
ground.cornerpush.veloff =  -20
guard.cornerpush.veloff = -5
air.velocity = -6,-6.8
fall = 1
fall.recover = 0
EnvShake.time = 20
EnvShake.freq = 100
EnvShake.ampl = -10
p2stateno = 1063
EnvShake.time = 15
EnvShake.freq = 100
EnvShake.ampl = -8

[State 810, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;★什么啊，不会手下留情的★-P2攻击
[Statedef 2310]
type = S
movetype = H
physics = S
velset = 0,0
ctrl = 0
poweradd = 0
juggle = 6
facep2 = 1
sprpriority = 2

[State 0, DestroySelf]
type = DestroySelf
trigger1 = 1
ignorehitpause =1


[State 52, 1]
type = VelSet
trigger1 = 1
x = 1.5

[State 241]
Type = PlayerPush
Trigger1 = 1
Value = 0

[State 170, G]
type = NotHitBy
trigger1 = time = 1
value = SCA
time = 150

[State 100]
type = hitby
trigger1 = time>150
value = SCA,AA,AT,AP
time = 60

[State 1028, Turn]
type = Turn
trigger1 = facing = enemy,facing


[State 0: AfterImage]
type = AfterImage
trigger1 = time = 1
time = 160
length = 10
palcolor = 256
palinvertall = 0
palbright = 60,60,60
palcontrast = 120,120,120
palpostbright = 10,10,10
paladd = 10,10,25
palmul = .65,.65,.75
timegap = 1
framegap = 4
trans = Add
ignorehitpause = 1
persistent = 1

[State 200, 0]
type = Changeanim
triggerall = (time <160)
trigger1 = ((time >1) && (timemod = 10,0))
value = 210
ctrl = 0

[State 200, 0]
type = Changeanim
triggerall = (time <160)
trigger1 = ((time >5) && (timemod = 20,0))
value = 200
ctrl = 0

[State 200, 0]
type = Changeanim
triggerall = (time <160)
trigger1 = ((time >15) && (timemod = 29,0))
value = 300
ctrl = 0

[State 200, 0]
type = Changeanim
triggerall = (time <160)
trigger1 = ((time >20) && (timemod = 39,0))
value = 310
ctrl = 0

[State 200, 0]
type = Changeanim
triggerall = (time <160)
trigger1 = ((time >25) && (timemod = 49,0))
value = 400
ctrl = 0

[State 200, 0]
type = Changeanim
triggerall = (time <160)
trigger1 = ((time >30) && (timemod = 55,0))
value = 410
ctrl = 0

[State -2, 5]
type = poweradd
trigger1= (GameTime%3)=0
value = -30


[State 500: PosAdd]
type = PosAdd
trigger1 = (Time = 1)
y = (P2BodyDist y+0)


[State 200,1]
type = SelfState
trigger1 = time = 160
value = 5300
;ctrl = 1

;★★超*龟派气功★★
[StateDef 2400]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 2400
poweradd = -1000
sprpriority = 2

[State 闪光]
type = EnvColor
value = 0,0,0
trigger1 = AnimElem = 2
ignorehitpause = 1
persistent = 0
time = 35
under = 1



[State 1000]
type = Explod
trigger1 = AnimElem = 2
anim = 6010
sprpriority = -100
postype = p1
pos = -5,-90
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 2
anim = 6011
sprpriority = 10
postype = p1
pos = -5,-90
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 震动]
type = EnvShake
trigger1 = AnimElem = 2
ignorehitpause = 1
persistent = 0
time = 20
ampl = 20
freq = 100
phase = 90

[State 191, 3];
type = PlaySnd
trigger1 = animelem = 2
value = 5,1
ignorehitpause = 1

[State 191, 3];
type = PlaySnd
trigger1 = animelem = 3
value = 1800,1
ignorehitpause = 1


[State 191, 3];
type = PlaySnd
trigger1 = animelem = 3
value = 5,8
ignorehitpause = 1

[State 2000]
type = SuperPause
trigger1 = AnimElem = 2
time =149
movetime = 149
anim = -1

;from a back-dash.
[State -3, Landing Sound]
type = PlaySnd
;triggerall = gametime % 150 = 0
trigger1 = AnimElem =3
value = 5,15
removetime = 114


[State 1000, Explod]
type = Explod
triggerall = numexplod(7021) = 0
trigger1 = AnimElem =3
anim = 7022
ID = 7022
pos = 0,10
scale = .8,.8
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = 114
sprpriority = 111
removeongethit = 1
supermove = 1
pausemove = 1


[State 705, 2]
type = Explod
triggerall = numexplod(900)= 0
trigger1 = AnimElem =3
anim = 2405
;scale = .5,.4
scale = .9,.7
ID = 900
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
removetime = 114
supermove = 1
removeongethit = 1

[State 1900, dust]
type = explod
triggerall = numexplod(914)= 0
trigger1 = AnimElem =3
anim = 914
scale = .8,.8
sprpriority = 2
bindtime = -1
ownpal = 1
removetime = 114
supermove = 1
removeongethit = 1
ignorehitpause = 1
id = 914
facing = -1

[State 震动]
type = EnvShake
trigger1 =  AnimElem = 3
ignorehitpause = 1
supermove = 1
persistent = 0
time = 139
ampl = 5
freq = 100
phase = 90


[State 810, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 2401

;★★超*龟派气功★★-发射
[StateDef 2401]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 2401
poweradd = -1000
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 3
value = S2000,0
ignorehitpause = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 4
anim = 16005
sprpriority = 10
postype = p1
pos = 30,0
scale = .5,.5
bindtime = -1
supermove = 1
under = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S3,7
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 1
value = S5,1
ignorehitpause = 1

[State 2000]
type = PosAdd
trigger1 = time > 36
X = -10

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 2
anim = 2004
sprpriority = 2
postype = p1
removetime = 30
pos = -58,-60
scale = .6,.6
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 4
anim = 2005
sprpriority = 3
postype = p1
removetime = 4
pos = -46,-54
scale = .6,.6
bindtime = 1
supermove = 1
under = 0
ownpal = 1


[State 闪光]
type = EnvColor
value = 0,0,0
trigger1 = AnimElem = 1
ignorehitpause = 1
persistent = 0
time = 35
under = 1

[State 2000]
type = SuperPause
trigger1 = AnimElem = 1
time =36
movetime = 36
anim = -1

[State 1000]
type = Explod
trigger1 = AnimElem = 1
anim = 6010
sprpriority = -100
postype = p1
pos = -30,-45
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 1
anim = 6011
sprpriority = 10
postype = p1
pos = -30,-45
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 震动]
type = EnvShake
trigger1 = AnimElem = 1
ignorehitpause = 1
persistent = 0
time = 20
ampl = 20
freq = 100
phase = 90



[State 1000, 5]
type = Explod
trigger1 = AnimElem = 5
anim = 2002
sprpriority = 10
postype = p1
pos = 95,-60
scale = .7,.7
bindtime = -1
supermove = 1
under = 0
ownpal = 1


[State 1000, 5]
type = Explod
trigger1 = AnimElem = 5
anim = 2003
sprpriority = 10
postype = p1
pos = 35,-60
scale = 1.7,1.7
bindtime = -1
supermove = 1
under = 0
ownpal = 1



[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 50
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 2
under = 1

[State 4016, Helper]
type = Helper;type = Helper
triggerall = !numhelper(2402)
trigger1 =  AnimElem = 4
ID = 2402
pos = 50,-78
stateno = 2402
facing = 1
size.xscale = .7
size.yscale = .7
helpertype = player
name = "光束"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1
ignorehitpause = 1


[State 4016, Helper]
type = Helper;type = Helper
triggerall = !numhelper(2403)
trigger1 =  AnimElem = 4
ID = 2402
pos = 50,-78
stateno = 2403
facing = 1
size.xscale = .7
size.yscale = .7
helpertype = player
name = "光束"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;★★超*龟派气功★★-波动
[Statedef 2402]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 5
ctrl = 0
anim = 2403
sprpriority = 3

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 50
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1



[State 0, Turn]
type = Turn
trigger1 = facing != root,facing

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 50,-80

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State ]
type = DestroySelf
trigger1 = root,stateno !=2401
trigger2 = root,time =80

[State 0, HitAdd]
type = HitAdd
trigger1 = gametime%2 = 0
value = 1

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = movehit=1
value = -40
kill = 1
absolute = 1
ignorehitpause = 1





[State 640, 3]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 6
trigger4 = animelem = 8
trigger5 =  animelem = 10
trigger6 =  animelem = 12
attr = S,SP
numhits = 0
hitsound   = s0,10
guardflag = M
hitflag = MAFLPD
givepower = 0,0
getpower = 0,0
animtype = Hard
priority = 4,Hit
damage = 0,10
pausetime = 1,15
sparkno = s7002
guard.ctrltime = 10
guard.sparkno = s7012
sparkxy = (500-random)/0,0+(500-random)/17
guardsound = S120,1
ground.type = High
air.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5
guard.velocity = -10
air.velocity = -3.5,-6
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5



[State 640, 3]
type = HitDef
trigger1 = animelem = 14
attr = S, SP
damage   = 100,100
givepower = 0,0
getpower = 0,0
sparkno = s7002
guard.sparkno = s7012
sparkxy = (500-random)/0,0+(500-random)/17
animtype = heavy
guardflag = MA
hitflag = MAFDLP
pausetime = 0,10
hitsound   = s0,10
guardsound = S120,1
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6.5
guard.cornerpush.veloff = -5
air.velocity = -6,-6.8
fall = 1
fall.recover = 0
EnvShake.time = 20
EnvShake.freq = 100
EnvShake.ampl = -10

;★★超*龟派气功★★-波动2
[Statedef 2403]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 5
ctrl = 0
anim = 2404
sprpriority = 3

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 50
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1



[State 0, Turn]
type = Turn
trigger1 = facing != root,facing

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 30,-55


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State ]
type = DestroySelf
trigger1 = root,stateno !=2401
trigger2 = root,time =80

[State 0, HitAdd]
type = HitAdd
trigger1 = gametime%2 = 0
value = 1

[State 0, TargetLifeAdd]
type = null;TargetLifeAdd
trigger1 = gametime%1 = 0
value = -20
kill = 1
ignorehitpause = 1



[State 640, 3]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 6
trigger4 = animelem = 8
trigger5 =  animelem = 10
trigger6 =  animelem = 12
attr = S,SP
numhits = 0
hitsound   = s0,10
guardflag = M
hitflag = MAFD
givepower = 0,0
getpower = 0,0
animtype = Hard
priority = 4,Hit
damage = 5,10
pausetime = 1,15
sparkno = s7002
guard.ctrltime = 10
guard.sparkno = s7012
sparkxy = (500-random)/0,0+(500-random)/17
guardsound = S120,1
ground.type = High
air.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5
guard.velocity = -10
air.velocity = -3.5,-6
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5


[State 640, 3]
type = HitDef
trigger1 = animelem = 14
attr = S, SP
damage   = 50,100
givepower = 0,0
getpower = 0,0
sparkno = s7002
guard.sparkno = s7012
sparkxy = (500-random)/0,0+(500-random)/17
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 0,10
hitsound   = s0,10
guardsound = S120,1
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6.5
guard.cornerpush.veloff = -5
air.velocity = -6,-6.8
fall = 1
fall.recover = 0
EnvShake.time = 20
EnvShake.freq = 100
EnvShake.ampl = -10

;★★等离子带花奶油蛋糕★★
[StateDef 2500]
type = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
anim = 2500
sprpriority = 1


[State x]
type = ReversalDef
Trigger1 = time = 0
reversal.attr = SCA,NA,SA,HA,NP,HP,NT,HT
sparkno = s70020
p1stateno = 2501
p2stateno = 1520
ignorehitpause = 1



[State 1000, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;★★等离子带花奶油蛋糕★★-行动
[StateDef 2501]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 2501
poweradd = -2000
sprpriority = 2


[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 2
value = S2500,0
ignorehitpause = 1


[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 2
value = S5,1
ignorehitpause = 1


[State 闪光]
type = EnvColor
value = 0,0,0
trigger1 = AnimElem = 2
ignorehitpause = 1
persistent = 0
time = 35
under = 1

[State 2000]
type = SuperPause
trigger1 = AnimElem = 2
time =41
movetime = 41
anim = -1

[State 1000]
type = Explod
trigger1 = AnimElem = 2
anim = 9001
sprpriority = 100
postype = p1
pos = 20,-75
;scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000]
type = Explod
trigger1 = AnimElem = 2
anim = 6010
sprpriority = -100
postype = p1
pos = -10,-45
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 2
anim = 6011
sprpriority = 10
postype = p1
pos = -10,-45
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 震动]
type = EnvShake
trigger1 = AnimElem = 2
ignorehitpause = 1
persistent = 0
time = 20
ampl = 20
freq = 100
phase = 90





[State 4016, Helper]
type = Helper;type = Helper
triggerall = !numhelper(2502)
trigger1 =  AnimElem = 3
ID = 2502
postype=p2
pos = 0,-300
stateno = 2502
facing = 1
;size.xscale = .7
;size.yscale = .7
helpertype = player
name = "光束"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 0, ChangeState]
type = ChangeState
Trigger1 = AnimTime = 0
value = 710
;ctrl = 1

;★★等离子带花奶油蛋糕★★-蛋糕
[Statedef 2502]
type = A
movetype = H
physics = S
anim = 2502
poweradd = 0
sprpriority = 10
velset = 0,25
ctrl = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 =1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT




[State 0, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 1
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =  1

[State 1350, 1]
type = HitDef
Trigger1 = time = 0
attr = S, ST
hitflag = MAFDLP
sparkno = s70111
;numhits = 1
P2STATENO = 2550


[State ]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -5
value=2503

;★★等离子带花奶油蛋糕★★-蛋糕待机
[Statedef 2503]
type = A
movetype = H
physics = S
anim = 2503
poweradd = 0
sprpriority = 1000
velset = 0
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  time=0
value = S6,7
ignorehitpause = 1

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 = time=0
ignorehitpause = 1
persistent = 0
time = 3
under = 1

[State 震动]
type = EnvShake
trigger1 = time=0
ignorehitpause = 0
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90

[State 1000, 5]
type = Explod
trigger1 = time=0
anim = 10045
sprpriority = -1
postype = p1
pos = 0,-20
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 100
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =  1

[State 0, PosSet]
type = PosSet
trigger1 =1
;x = 0
y = 0
ignorehitpause =1

[State ]
type = null;hitoverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1854
ignorehitpause = 1

[State ]
type = changestate
trigger1 =  AnimTime = 0
value=2504

;★★等离子带花奶油蛋糕★★-蛋糕爆炸
[Statedef 2504]
type = A
movetype = H
physics = S
anim = 1855
poweradd = 0
sprpriority = 100
velset = 0,0
ctrl = 0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 70
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 = time=0
ignorehitpause = 1
persistent = 0
time = 3
under = 1

[State 震动]
type = EnvShake
trigger1 = time=0
ignorehitpause = 0
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90


[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =  1


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S0,12

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 7750
ID = 7750
scale=.5,.5
pos = 0,20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
sprpriority = 2

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = movehit=1
value = -enemy,lifemax*0.35
kill = 1
absolute = 1
ignorehitpause = 1



[State 640, 3]
type = HitDef
trigger1 = time=0
attr = S, SP
damage   = 0,10
sparkno = s8018
guard.sparkno = s8018
sparkxy = -15,-20
animtype = heavy
hitflag = MAFDLP
pausetime = 0,10
hitsound   = s0,105
guardsound = S0,17
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6
guard.cornerpush.veloff = -5
air.velocity = 6,-6
fall = 1
fall.recover = 0
palfx.time = 30
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 1
palfx.invertall = 1
EnvShake.time = 20
EnvShake.freq = 100
EnvShake.ampl = -10

[State ]
type = DestroySelf
trigger1 = AnimTime = 0

;★★等离子带花奶油蛋糕★★-P2代入状态(躺地)
[Statedef 2550]
type    = L
movetype= H
physics = N
sprpriority = -1
velset = 0,0


[State 0, NotHitBy]
type = NotHitBy
trigger1 = time=0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 90
ignorehitpause =1


[State 0, Turn]
type = Turn
trigger1 = facing = enemy,facing
ignorehitpause = 1


[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = 1
value = 0
ignorehitpause = 1


[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2550

[State 0, SelfState]
type = SelfState
trigger1 = time = 400
value = 5110
ignorehitpause = 1

;★★激突布欧布欧排球攻击★★-连续超级炸面圈
[StateDef 2600]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 2600
poweradd = -2000

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 68
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1


[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 2
value = S5,1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 1
value = S2600,0
ignorehitpause = 1



[State 闪光]
type = EnvColor
value = 0,0,0
trigger1 = AnimElem = 2
ignorehitpause = 1
persistent = 0
time = 35
under = 1

[State 2000]
type = SuperPause
trigger1 = AnimElem = 2
time =41
movetime = 41
anim = -1

[State 1000]
type = Explod
trigger1 = AnimElem = 2
anim = 6010
sprpriority = -100
postype = p1
pos = -5,-45
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 2
anim = 6011
sprpriority = 10
postype = p1
pos = -5,-45
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 震动]
type = EnvShake
trigger1 = AnimElem = 2
ignorehitpause = 1
persistent = 0
time = 20
ampl = 20
freq = 100
phase = 90


[State 1000, 5]
type = Explod
trigger1 =  p2stateno = 2650 &&enemy,time = 1
anim = 8025
sprpriority = 100
postype = p1
pos = 0,0
bindtime = 1
supermove = 1
under = 0
ownpal = 1


[State 0, PosSet]
type = PosSet
triggerall =  facing = -1
trigger1 =  p2stateno = 2650 &&enemy,time = 1
x = 200
y = 0
ignorehitpause =  1

[State 0, PosSet]
type = PosSet
triggerall =  facing = 1
trigger1 =  p2stateno = 2650 &&enemy,time = 1
x = -200
y = 0
ignorehitpause =  1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 4,
ID = 2601
pos = 35,-50
stateno = 2601
facing = 1
;size.xscale = .5
;size.yscale = .5
helpertype = normal
name = "波动"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1


[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 4,=3
ID = 2601
pos = 35,-50
stateno = 2601
facing = 1
;size.xscale = .5
;size.yscale = .5
helpertype = normal
name = "波动"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 4,=6
ID = 2601
pos = 35,-50
stateno = 2601
facing = 1
;size.xscale = .5
;size.yscale = .5
helpertype = normal
name = "波动"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 4,=9
ID = 2601
pos = 35,-50
stateno = 2601
facing = 1
;size.xscale = .5
;size.yscale = .5
helpertype = normal
name = "波动"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 4,=12
ID = 2601
pos = 35,-50
stateno = 2601
facing = 1
;size.xscale = .5
;size.yscale = .5
helpertype = normal
name = "波动"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 4,=15
ID = 2601
pos = 35,-50
stateno = 2601
facing = 1
;size.xscale = .5
;size.yscale = .5
helpertype = normal
name = "波动"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 4,=18
ID = 2601
pos = 35,-50
stateno = 2601
facing = 1
;size.xscale = .5
;size.yscale = .5
helpertype = normal
name = "波动"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 4,=21
ID = 2601
pos = 35,-50
stateno = 2601
facing = 1
;size.xscale = .5
;size.yscale = .5
helpertype = normal
name = "波动"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 4,=24
ID = 2601
pos = 35,-50
stateno = 2601
facing = 1
;size.xscale = .5
;size.yscale = .5
helpertype = normal
name = "波动"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 4,=24
trigger1=enemy,stateno=2650
ID = 2610
pos = 270,0
postype=p1
stateno = 2610
facing = 1
size.xscale = .85
size.yscale = .85
helpertype = player;normal
name = "波动"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 = AnimElem = 4,=24
trigger1=enemy,stateno=2650
ID = 2651
pos = 0,0
postype=P2
stateno = 2651
facing = 1
size.xscale = .15
size.yscale = .15
helpertype = player
name = "波动"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 1000, end]
type = ChangeState
trigger1 = enemy,stateno=2650
trigger1 = AnimTime = 0
value = 2602

[State 1000, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl=1


;★★激突布欧布欧排球攻击★★-连续超级炸面圈-圈
[Statedef 2601]
type = S
movetype = H
physics = S
anim = 2601
poweradd = 0
sprpriority = 2
velset = 0,0
ctrl = 0

[State 0, Explod]
type = Explod
trigger1 = movehit
anim = 2114
ID = 2115
;scale=.5,.5
;pos = (500-random)/10,-40+(500-random)/7
POS=0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
sprpriority = 200



[State 0, AssertSpecial]
type = AssertSpecial
trigger1 =1
ignorehitpause = 1
flag = noshadow


[State 1505]
type = Veladd
trigger1 = 1
;y = .3
x = 4

[State 1350, 1]
type = HitDef
Trigger1 = time = 0
attr = S, HT
hitsound   = s800,1
hitflag = MAFDLP
sparkno = s70111
;numhits = 1
P2STATENO = 2650


[State ]
type = DestroySelf
trigger1 = movehit
trigger2 = AnimTime = 0
trigger3 =ENEMY,STATENO=2650
trigger3 =ROOT,STATENO!=2600

;★★激突布欧布欧排球攻击★★-推
[StateDef 2602]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
sprpriority = 2
ctrl = 0
anim = 2602
poweradd = 0




[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 =AnimElem = 4
ignorehitpause = 1
persistent = 0
time = 3
under = 1

[State 震动]
type = EnvShake
trigger1 =AnimElem = 4
ignorehitpause = 0
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90


[State 0, PlaySnd]
type = PlaySnd
trigger1 =AnimElem = 4
value = S1,6
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 =AnimElem = 4
anim = 7001
pos = 30,-85
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
;scale = 0.5,0.5
sprpriority = 123
ownpal = 1
ignorehitpause = 1


[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 112
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1

[State 1350, 1]
type = HitDef
Trigger1 = time = 0
attr = S, ST
hitflag = MAFDLP
sparkno = s70111
;numhits = 1
P2STATENO = 2650

[State 1000, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 2603
;ctrl = 1

;★★激突布欧布欧排球攻击★★-扣杀
[StateDef 2603]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
sprpriority = 2
anim = 2603
poweradd = 0


[State 0, PlaySnd]
type = PlaySnd
trigger1 =  time=0
value = S2600,1
ignorehitpause = 1

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 =AnimElem = 5
ignorehitpause = 1
persistent = 0
time = 3
under = 1

[State 震动]
type = EnvShake
trigger1 =AnimElem = 5
ignorehitpause = 0
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90

[State 0, PlaySnd]
type = PlaySnd
trigger1 =AnimElem = 5
value = S1,7

[State 0, Explod]
type = Explod
trigger1 =AnimElem = 5
anim = 2114
pos = 50,-40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 123
ownpal = 1
ignorehitpause = 1


[State 0, Explod]
type = Explod
trigger1 =AnimElem = 5
anim = 7001
pos = 40,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
;scale = 0.5,0.5
sprpriority = 123
ownpal = 1
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 140
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = TIME =[7,27]
y = -5
ignorehitpause =1



[State 1000, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 2604
;ctrl = 1

;★★激突布欧布欧排球攻击★★-扣杀下落
[Statedef 2604]
type    = A
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 1305
poweradd = 100
sprpriority = 2


[State 0, PosAdd]
type = velAdd
trigger1 = 1
y = .7
ignorehitpause =  1


[State 400, 4]
type = ChangeState
trigger1 = pos y >= -10
value = 2605

;★★激突布欧布欧排球攻击★★-装逼
[Statedef 2605]
type    = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
anim = 2605
poweradd = 100
sprpriority = 2

[State 0, PosSet]
type = PosSet
trigger1 =1
y = 0
ignorehitpause =1


[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;★★激突布欧布欧排球攻击★★-比克
[StateDef 2610]
type = S
movetype= A
physics = S
juggle  = 1
sprpriority = 2
velset = 0,0
ctrl = 0
anim = 2610
poweradd = 0

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 =AnimElem = 4
ignorehitpause = 1
persistent = 0
time = 3
under = 1

[State 震动]
type = EnvShake
trigger1 =AnimElem = 4
ignorehitpause = 0
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90

[State 0, PlaySnd]
type = PlaySnd
trigger1 =AnimElem = 4
value = S1,6
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =AnimElem = 8
value = S1,10
ignorehitpause = 1


[State 0, Explod]
type = Explod
trigger1 =AnimElem = 4
anim = 7001
pos = -30,-115
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
;scale = 0.5,0.5
sprpriority = 123
ownpal = 1
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
ignorehitpause =  1


;★★激突布欧布欧排球攻击★★-P2状态
[Statedef 2650]
type    = S
movetype= H
physics = N
velset = 0,0



[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1= TIME=0
x = 0
y = 0
ignorehitpause =  1

[State 0, PosSet]
type = PosSet
trigger1= ENEMY,STATENO = 2602
x = 0
y = 0
ignorehitpause =  1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = ENEMY,STATENO = 2603
trigger2 = ENEMY,STATENO = 2602
value = SCA
ignorehitpause =  1

[State 0, PosSet]
type = PosSet
triggerall =  facing = 1
trigger1 = ENEMY,STATENO = 2603
x = 100
y = -65
ignorehitpause =  1

[State 0, PosSet]
type = PosSet
triggerall =  facing = -1
trigger1 = ENEMY,STATENO = 2603
x = -100
y = -65
ignorehitpause =  1


[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2650

[State 0, ChangeState]
type = ChangeState
trigger1 = ENEMY,STATENO = 2603 &&ENEMY,TIME = 35
value = 2653
;ctrl = 1



;★★激突布欧布欧排球攻击★★-球
[StateDef 2651]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 2203
poweradd = 0
sprpriority = 100

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = -50
ignorehitpause = 1



[State 0, AssertSpecial]
type = AssertSpecial
trigger1 =  1
flag = noshadow


[State 0, ChangeState]
type = ChangeState
trigger1 = time=100
value = 2652
ctrl = 0



;★★激突布欧布欧排球攻击★★-球运动
[StateDef 2652]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 2203
poweradd = 0
sprpriority = 100

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root,STATENO = 2603 && root,TIME = 35
ignorehitpause =  1


[State 0, ScreenBound]
type = ScreenBound
trigger1 =  1
value = 1
movecamera = 0,0
ignorehitpause =  1


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 =  1
flag = noshadow

[State 0, PosAdd]
type = PosAdd
trigger1 =time=[0,5]
x = 24
y = 0
ignorehitpause =  1

[State 0, PosSet]
type = PosSet
trigger1 = time = 5
y = -80
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 =time =[6,15]
x = -15
y = -10
ignorehitpause =  1

[State 0, PosAdd]
type = PosAdd
trigger1 =time =[16,21]
x = -14
y = 9
ignorehitpause =  1

[State 0, PosAdd]
type = PosAdd
trigger1 =time =[22,30]
x = 10
y = -5
ignorehitpause =  1

[State 0, PosAdd]
type = PosAdd
trigger1 =time =[31,34]
x = 19
y = 5
ignorehitpause =  1


;★★激突布欧布欧排球攻击★★-P2急速下落
[Statedef 2653]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0

[State 1028, Turn]
type = Turn
trigger1 = facing = enemy,facing

[State 1505]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1320

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =1

[State 1505]
type = Veladd
trigger1 = 1
y = 3
x = -3

[State 1505, ChangeState]
type = ChangeState
trigger1 = pos y >= -10
value = 2654

;★★激突布欧布欧排球攻击★★-P2撞地
[Statedef 2654]
type     = A
movetype = H
physics  = N

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -350
kill = 1
absolute = 1


[State 0, PalFX]
type = PalFX
trigger1 =time=1
time = 50
add = 30,-40,-140
sinadd = 60,60,50,10
color = 1
invertall = 1
ignorehitpause = 1



[State 0, Pause]
type = Pause
trigger1 = time = [0,30]
time = 1
movetime = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =1

[State 震动]
type = EnvShake
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
time = 10
ampl = 20
freq = 100
phase = 90

[State 1028, Velset]
type = VelSet
trigger1 = Time = 0
x = -2

[State 1028, Turn]
type = Turn
trigger1= (Time = 0) && (BackEdgeDist < 30)

[State 1028, VelAdd]
type = VelAdd
trigger1 = 1
y = .4


[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1000, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 1
under = 1

[State 1028, SelfState]
type = changeState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 35

;★★双重星辰爆破★★
[StateDef 2700]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
sprpriority = 2
ctrl = 0
anim = 2700
poweradd =-2000

[State 0]
type = Explod
trigger1 = movehit=1
anim = 9100
ID=9100
postype = back
pos = 0,0
removetime = 657
scale = 0.5,0.5
sprpriority = -999
supermovetime = -1
bindtime = -1
ownpal = 1
persistent = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 1
value = S5,1
ignorehitpause = 1

[State 闪光]
type = EnvColor
value = 0,0,0
trigger1 = AnimElem = 1
ignorehitpause = 1
persistent = 0
time = 35
under = 1

[State 2000]
type = SuperPause
trigger1 = AnimElem = 1
time =35
movetime = 35
anim = -1

[State 1000]
type = Explod
trigger1 = AnimElem = 1
anim = 6010
sprpriority = -100
postype = p1
pos = 20,-55
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 1
anim = 6011
sprpriority = 10
postype = p1
pos = 29,-55
scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 震动]
type = EnvShake
trigger1 = AnimElem = 1
ignorehitpause = 1
persistent = 0
time = 20
ampl = 20
freq = 100
phase = 90


[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = S,HA
guardflag = M
hitflag=MAFDLP
givepower = 21,21
animtype = back
damage = 30
pausetime = 10,23
sparkno = s7001
guard.sparkno = s7011
sparkxy = -15,-70
hitsound = s0,8
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 5
ground.hittime = 18
ground.velocity = -5
guard.velocity = -10
air.type = Low
air.velocity = -5,15
air.hittime = 12
air.fall = 1
p2stateno=2751
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5
EnvShake.time = 15
EnvShake.freq = 100
EnvShake.ampl = -8

[State 810, 1]
type = ChangeState
trigger1 = AnimTime = 0
trigger1= movehit
value = 2701

[State 810, 1]
type = ChangeState
trigger1!= movehit
trigger1 = AnimTime = 0
value = 0
ctrl=1


;★★双重星辰爆破★★-连击
[Statedef 2701]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 2701
sprpriority = 4


[State 0, Explod]
type = Explod
trigger1 = movehit
trigger1 = enemy,time = 0
anim = 7001
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
random=30,50
removetime = -2
scale = 0.5,0.5
sprpriority = 123
ownpal = 1
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1100,0


[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,12

[State 640, 3]
type = HitDef
trigger1 =AnimElem = 2
trigger2 =AnimElem = 3
trigger3 =AnimElem = 4
trigger4 =AnimElem = 5
trigger5 =AnimElem = 6
trigger6 =AnimElem = 7
trigger7 =AnimElem = 8
trigger8 =AnimElem = 9
trigger9 =AnimElem = 10
trigger10 =AnimElem = 11
trigger11 =AnimElem = 12
trigger12 =AnimElem = 13
trigger13 =AnimElem = 14
trigger14 =AnimElem = 15
trigger15 =AnimElem = 16
trigger16 =AnimElem = 17
trigger17 =AnimElem = 18
trigger18 =AnimElem = 19
attr = S,NA
guardflag = M
givepower = 21,21
animtype = back
damage = 5
pausetime = 5,23
sparkno = s70002
guard.sparkno = s7010
sparkxy = -15,-60
hitsound = s0,9
guardsound = s120,1
face=1
p2stateno=1110
EnvShake.time = 15
EnvShake.freq = 5
EnvShake.ampl = -8

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 2702


;★★双重星辰爆破★★-后踢
[Statedef 2702]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 2702
sprpriority = 4



[State 0, VelAdd]
type = VelAdd
trigger1 = animelem >= 5
x = -5
ignorehitpause = 1


[State 1000, 5]
type = Explod
trigger1 =  p2stateno = 2752 &&enemy,time = 1
anim = 8025
sprpriority = 100
postype = p1
pos = 0,0
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 =  movehit=1
anim = 7001
sprpriority = 100
postype = p2
pos = 20,-40
bindtime = 1
supermove = 1
under = 0
ownpal = 1


[State 0, PosSet]
type = PosSet
triggerall =  facing = -1
trigger1 =  p2stateno = 2752 &&enemy,time = 1
x = 200
y = 0
ignorehitpause =  1

[State 0, PosSet]
type = PosSet
triggerall =  facing = 1
trigger1 =  p2stateno = 2752 &&enemy,time = 1
x = -200
y = 0
ignorehitpause =  1

[State 1350, 1]
type = HitDef
Trigger1 = time = 0
attr = S, ST
hitsound=s0,10
hitflag = MAFDLP
sparkno = s70001
;numhits = 1
P2STATENO = 2752

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 2703
;ctrl = 1

;★★双重星辰爆破★★-悟天克斯-星辰爆破-未完成
[Statedef 2703]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 2703
sprpriority = 4



[State 4016, Helper]
type = Helper;type = Helper
trigger1=numhelper(2710)=0
trigger1=enemy,stateno=2752
ID = 2710
pos = 270,0
postype=p1
stateno = 2710
facing = 1
size.xscale = .85
size.yscale = .85
helpertype = player;normal
name = "波动"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 0, Explod]
type = Explod
trigger1 =AnimElem = 2
anim = 12705
pos = -32,-125
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 100
scale = 0.5,0.5
sprpriority = 50
ownpal = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 =AnimElem = 3
anim = 12702
pos = 30,-100
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
;scale = 0.3,0.3
sprpriority = 50
ownpal = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 =AnimElem = 4
anim = 12703
pos = 20,-60
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
;scale = 0.3,0.3
sprpriority = 50
ownpal = 1
ignorehitpause = 1


[State 0, Explod]
type = Explod
trigger1 =AnimElem = 5
anim = 12704
pos = 0,-60
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
;scale = 0.3,0.3
sprpriority = 50
ownpal = 1
ignorehitpause = 1

[State 4016, Helper]
type = Helper;type = Helper
trigger1 =AnimElem = 4
pos = 0,0
postype=p2
stateno = 2711
facing = 1
;size.xscale = .85
;size.yscale = .85
helpertype = player;normal
name = "波动"
keyctrl = 0
ownpal = 1
shadow = 0,0,0
supermovetime = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =AnimElem = 2
value = S2700,1
ignorehitpause = 1


[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;★★双重星辰爆破★★-悟吉塔-星辰爆破
[StateDef 2710]
type = S
movetype= A
physics = S
juggle  = 1
sprpriority = 2
velset = 0,0
ctrl = 0
anim = 2710
poweradd = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 =AnimElem = 2
value = S2700,0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 =AnimElem = 2
anim = 12705
pos = -65,-170
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 100
scale = 0.8,0.8
sprpriority = 50
ownpal = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 =AnimElem = 3
anim = 12702
pos = 20,-70
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
;scale = 0.3,0.3
sprpriority = 50
ownpal = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 =AnimElem = 4
anim = 12703
pos = 0,-40
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
;scale = 0.3,0.3
sprpriority = 50
ownpal = 1
ignorehitpause = 1


[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
ignorehitpause =  1

;★★双重星辰爆破★★-光环爆炸
[Statedef 2711]
type = S
movetype = H
physics = S
anim = 2113
poweradd = 0
sprpriority = 100
velset = 0,0
ctrl = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause =  1

[State 震动]
type = EnvShake
trigger1 = time=0
ignorehitpause = 0
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 2711
;scale=.5,.5
pos = 0,70
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
sprpriority = 200

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S0,15

[State 0, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = movehit=1
value = -1000
ID = -1
ignorehitpause = 1

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 =movehit=1
value =-250
kill = 1
absolute = 1
ignorehitpause = 1


[State 640, 3]
type = HitDef
trigger1 = time=0
attr = S, SP
damage   = 0,10
sparkno = s8018
guard.sparkno = s8018
sparkxy = -15,-20
animtype = heavy
hitflag = MAFDLP
pausetime = 0,10
hitsound   = s0,105
guardsound = S0,17
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6
guard.cornerpush.veloff = -5
air.velocity = -6,-6
fall = 1
fall.recover = 0
palfx.time = 70
palfx.sinadd = 92,92,92,12
palfx.add = 0,40,130
palfx.color = 0
palfx.invertall = 1
EnvShake.time = 20
EnvShake.freq = 100
EnvShake.ampl = -10

[State ]
type = DestroySelf
trigger1 = AnimTime = 0

;★★双重星辰爆破★★-P2定位
[Statedef 2750]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 =1
ignorehitpause = 1


[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1630

;★★双重星辰爆破★★-P2状态
[Statedef 2751]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause =  1

[State 0, Turn]
type = Turn
trigger1 = facing = enemy,facing

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = ifelse(Random <= 500,5001,5011)

[State 0, ChangeState]
type = SelfState
Trigger1 = Time = 40
value = 5100
ctrl = 1

;★★双重星辰爆破★★-P2再次定位
[Statedef 2752]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1= TIME=0
x = 0
y = 0
ignorehitpause =  1

[State 0, PosSet]
type = PosSet
trigger1= 1
x = 0
y = 0
ignorehitpause =  1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = ENEMY,STATENO = 2702
value = SCA
ignorehitpause =  1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 =1
ignorehitpause = 1


[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1630


;★★界限突破★★
[StateDef 2800]
type = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
anim = 2800
poweradd = ifelse(var(13)>0,-1000,-2000)
sprpriority = 2

[State 2000]
type = SuperPause
trigger1 = AnimElem = 1
time =66
movetime = 66
anim = -1


[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 1
value = S2800,0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 3
value = S2800,1
ignorehitpause = 1

[State 0, Varadd]
type = Varadd
trigger1 = AnimElem = 3
v = 13
value = 1

[State 0, VarSet]
type = VarSet
triggerall=palno=6&&(1000*Life/LifeMax) <= 400
trigger1 = AnimElem = 3
v = 14
value = 900


[State 705, 2]
type = Explod
triggerall = numexplod(12800)= 0
trigger1 =  AnimElem = 3
anim = 12800
scale = .5,.5
ID = 12800
sprpriority = 3
postype = p1
pos = -5,20
bindtime = -1
supermove = 1
ownpal = 1
removeongethit = 1


[State 震动]
type = EnvShake
trigger1 =  AnimElem = 3
ignorehitpause = 1
persistent = 0
time = 20
ampl = 10
freq = 100
phase = 90

[State 0, ChangeState]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl=1

;★★三倍龟派气功★★-准备
[StateDef 2900]
type = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
anim = 2900
poweradd = -1000
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1=time=0
v = 13
value = 0

[State 0, VarSet]
type = VarSet
trigger1=time=0
v = 14
value = 0


[State 2000]
type = SuperPause
trigger1 = AnimElem = 3
time =287
movetime = 287
anim = -1


[State 1000, Explod]
type = Explod
triggerall = numexplod(7021) = 0
trigger1 = AnimElem =3
anim = 7022
ID = 7022
pos = 0,10
scale = 1.5,1.5
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = 237
sprpriority = 111
removeongethit = 1
supermove = 1
pausemove = 1

;from a back-dash.
[State -3, Landing Sound]
type = PlaySnd
trigger1 = AnimElem =3
value = 5,15
channel = 4
loop = -1

[State 705, 2]
type = Explod
triggerall = numexplod(12900)= 0
trigger1 = AnimElem = 3
anim = 900
scale = .8,.6
ID = 12900
sprpriority = 3
postype = p1
pos = -5,0
bindtime = -1
removetime = 237
removeongethit = 1
ignorehitpause = 1
supermove=1

[State 705, 2]
type = Explod
triggerall = numexplod(12901)= 0
trigger1 = AnimElem = 3
anim = 900
scale = .8,.6
ID = 12901
sprpriority = 3
postype = p1
pos = -5,0
bindtime = -1
removetime = 225
removeongethit = 1
ignorehitpause = 1
supermove=1

[State 705, 2]
type = Explod
triggerall = numexplod(122405)= 0
trigger1 = AnimElem =82
anim = 2405
;scale = .5,.4
scale = 1.5,1.2
ID = 2406
sprpriority = 3
postype = p1
pos = -5,10
bindtime = -1
removetime = 50
supermove = 1
removeongethit = 1

[State 1900, dust]
type = explod
triggerall = numexplod(12915)= 0
trigger1 = AnimElem =82
anim = 914
;scale = .8,.8
sprpriority = 2
bindtime = -1
ownpal = 1
supermove = 1
removetime = 50
removeongethit = 1
ignorehitpause = 1
id = 914
facing = -1

[State 1900, dust]
type = explod
triggerall = numexplod(12914)= 0
trigger1 = AnimElem = 3
trigger1 = stateno = 2900
anim = 914
;scale = .8,.8
sprpriority = 2
bindtime = -1
removetime = 237
ownpal = 1
removeongethit = 1
ignorehitpause = 1
id = 12914
facing = -1
supermove=1


[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 82
value = S1800,1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 3
value = S2900,1
channel = 3
loop = 1
pan = 1
volume = 25
ignorehitpause = 1


[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 2
value = S14,3
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 82
value = S4,0
ignorehitpause = 1


[State 震动]
type = EnvShake
trigger1 =  AnimElem = 3
ignorehitpause = 1
persistent = 0
time = 287
ampl = 10
freq = 100
phase = 90

[State 0, ChangeState]
type = ChangeState
Trigger1 = AnimTime = 0
value = 2901

;★★三倍龟派气功★★-发射
[StateDef 2901]
type = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
anim = 2901
poweradd = -2000
sprpriority = 2

[State 1000, 5]
type = Explod
trigger1 = time=345
anim = 8025
sprpriority = 100
postype = p1
pos = 0,0
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S3,7
ignorehitpause = 1

[State 705, 2]
type = Explod
trigger1 = animelem = 2
trigger1 = numexplod(193)=0
anim = 193
id = 193
;scale = .5,.5
sprpriority = -1
postype = p1
pos = -35,-45
bindtime = -1
removetime=100
supermove = 1
ignorehitpause = 1
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 2
value = S2700,1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 4
value = S2900,2
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 1
value = S5,2
ignorehitpause = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 4
anim = 16005
sprpriority = 10
postype = p1
pos = 30,0
scale = .5,.5
bindtime = -1
supermove = 1
under = 0
ownpal = 1

[State 2000]
type = PosAdd
trigger1 = time > 113
X = -10

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 2
anim = 2004
sprpriority = 2
postype = p1
removetime =100
pos = -58,-60
scale = .6,.6
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 闪光]
type = EnvColor
value = 0,0,0
trigger1 = AnimElem = 1
ignorehitpause = 1
persistent = 0
time = 35
under = 1

[State 2000]
type = SuperPause
trigger1 = AnimElem = 1
time =114
movetime = 114
anim = -1

[State 1000]
type = Explod
trigger1 = AnimElem = 1
anim = 6020
sprpriority = -100
postype = p1
pos = -30,-45
;scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = AnimElem = 1
anim = 6021
sprpriority = 10
postype = p1
pos = -30,-45
;scale = .5,.5
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 震动]
type = EnvShake
trigger1 = AnimElem = 1
ignorehitpause = 1
persistent = 0
time = 20
ampl = 20
freq = 100
phase = 90


[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 50
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,10
invertall = 0
;color = 20
ignorehitpause = 1

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 2
under = 1

[State 0, God Kamehameha]
type = Helper
trigger1 = AnimElem = 4
helpertype = normal
name = "光束"
ID = 2911
stateno = 2911
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 4
size.yscale = 4




[State 0, ChangeState]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;★★三倍龟派气功★★-光束
[StateDef 2911]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 12920
poweradd = 0
sprpriority = 2

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 4
statetype = S
movetype = A
physics = N

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 204
statetype = S
movetype = I
physics = N

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Unguardable

[State 0, BindToParent]
type = BindToroot
trigger1 = 1
pos = 670,40

[State x]
type = ReversalDef
Trigger1 = AnimElem = 1
reversal.attr = SCA,NA,SA,HA,NT,ST,HT,NP,SP,HP,AA,AT,AP
sparkno = s70020
p2stateno = 1520
ignorehitpause = 1


[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = movehit
trigger1 =time>=150
value = -9999999999999999999999999999999999999999999999999999999999999999999999 *3
kill = 1
ignorehitpause = 1

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = movehit=1
value = -10
kill = 0
ignorehitpause = 1



[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1,1
value = 22

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 5884-time*25,256

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 200, 1]
type = HitDef
trigger1 = 1
attr = S,HP
animtype  = heavy
damage    = 0,0
Hitflag = MAFDE
guardflag = MA
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -15,0
hitsound   = S5,9999
guardsound = Sifelse(time > 200,5,4),ifelse(time > 200,26,1)
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = ifelse(time > 200,-6,-2),ifelse(time > 200,-8,0)
air.velocity =ifelse(time > 200,-6,-2),ifelse(time > 200,-8,0)
Fall = ifelse(time > 200,1,0)
Fall.recover = 0
getpower = 0,0
sprpriority = 3


[State 0, EnvShake]
type = EnvShake
triggerall = time < 215
trigger1 = timemod = 5,0
time = 5
ampl = -12

[State 200, End]
type = Destroyself
trigger1 = time = 295
trigger2 = Root,stateno!=2901

;---------------------------------------------------------------------------



[StateDef -2]

;#ADD004BASIC PIEs#
;//==========================
;// add004 supplementary sctrls v1.103
;//==========================

;// partner jump-out ; ???????
[state 0]
	type=selfstate
	triggerall=!ishelper && numpartner && roundstate=2
	triggerall=(stateno!=[190190,190199]) && alive && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	triggerall=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(22)=4
	;;---// change ;(??)
	trigger1=sysfvar(4)<1 && movetype!=h && gethitvar(isbound)=0 && (pos y>=0) && (ctrl||(stateno<600&&time<2)) && (playerid(floor(sysfvar(0))),var(48)=11)
	;;---// as partner-asist ;(??)
	trigger2=sysfvar(4)>0 && (movetype!=h||(stateno=[120,149])) && (ctrl||stateno<600)
	;;---// player priority ;(??)
	trigger3=sysfvar(4)<1 && playerid(floor(sysfvar(0))),var(15)!=id
	value=190190
	ignorehitpause=1

;// edited life & power bar ; ?????
[state 0]
	type=helper
	triggerall=!ishelper && !numhelper(90900)
	trigger1=numpartner
	trigger1=id<(partner,id) && partner,numhelper(90900)=0
	trigger2=!numpartner
	id=90900
	stateno=90900
	helpertype=normal
	ownpal=1
	size.air.front=1602150 ;; <<-version
	size.height=0 ;; 1;; <<-powerbar off mode
	ignorehitpause=1
	supermovetime=88888
	pausemovetime=88888
	pos=0,88888

;// input players id ; ID??
[state 0]
	type=varset
	trigger1=!ishelper && numhelper(90900)
	trigger1=(helper(90900),var(0)=90900) && (sysfvar(0)!=helper(90900),id)
	sysfvar(0)=(helper(90900),id)
[state 0]
	type=varset
	trigger1=!ishelper && numpartner
	trigger1=!numhelper(90900) && (partner,numhelper(90900)) && (sysfvar(0)!=(partner,sysfvar(0)))
	sysfvar(0)=(partner,sysfvar(0))

;// bk/jd system ; ?????/????D
[state 0]
	type=hitoverride
	trigger1=(numprojid(195502)||numprojid(195503)) && !ishelper && roundstate=2 && alive && (ctrl || stateno=52)
	attr=sca,na,sa,ha,np,sp,hp
	stateno=195500
	time=1
	ignorehitpause=1

;//==========================
;;>>@Config.Face>>
;; face / portrait (?)
[state 0]
	type=explod
	trigger1=!ishelper && roundstate=2 && alive && !numexplod(490600) && selfanimexist(909002)
	trigger1=sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),numexplod(490600)
	id=490600
	anim=909002
	space=screen
	postype=left
	facing=ifelse(teamside=1,1,-1)
	scale=0,0 ;; <- default
	ownpal=1
	bindtime=-1
	removetime=-1
	ignorehitpause=1
	supermovetime=-1
	pausemovetime=-1

[state 0] ;; player is NOT in a custom state 
	type=modifyexplod
	trigger1=numexplod(490600) && sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900
	trigger1=movetype!=h || (stateno=[120,159]) || (stateno=[5000,5199]) || (stateno=[190190,190196])
	id=490600
	scale=playerid(floor(sysfvar(0))),fvar(32-(id=playerid(floor(sysfvar(0))),var(15))*10), playerid(floor(sysfvar(0))),fvar(33-(id=playerid(floor(sysfvar(0))),var(15))*10)
	ignorehitpause=1

[state 0]
	type=modifyexplod
	trigger1=numexplod(490600) && sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900
	id=490600
	space=screen
	postype=left
	pos=floor(const240p(playerid(floor(sysfvar(0))),fvar(30-(id=playerid(floor(sysfvar(0))),var(15))*10))), floor(const240p(playerid(floor(sysfvar(0))),fvar(31-(id=playerid(floor(sysfvar(0))),var(15))*10) -(roundstate!=2||(!alive&&stateno=5150))*88888))
;;(* if the player has been placed in a custom state, the result of "scale" is affected" by the different player's local coordinate space
	sprpriority=floor(playerid(floor(sysfvar(0))),fvar(36-(id=playerid(floor(sysfvar(0))),var(15))*10))
	trans=addalpha
	alpha=floor(playerid(floor(sysfvar(0))),fvar(34-(id=playerid(floor(sysfvar(0))),var(15))*10)), floor(playerid(floor(sysfvar(0))),fvar(35-(id=playerid(floor(sysfvar(0))),var(15))*10))
	ignorehitpause=1

;//==========================
;;>>@Config.Camera>>
;; change camera / ????
[state 0]
	type=screenbound
	trigger1=!ishelper && sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && numpartner && (sysfvar(4)>0 || stateno=5150)
	value=0
	movecamera=0,0
	ignorehitpause=1
[state 0]
	type=playerpush
	trigger1=!ishelper && sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && numpartner && (sysfvar(4)>0 || stateno=5150)
	value=0
	ignorehitpause=1
[state 0]
	type=screenbound
	trigger1=!ishelper && sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && (playerid(floor(sysfvar(0))),var(7)&65536) ;; system_switch
	value= ((numpartner && sysfvar(4)<1) || !numpartner) ;; [def=0]
	movecamera=0,0 ;; [x,y]
	ignorehitpause=1

;//==========================
;; optional settings
;//==========================
;;--- guard crush ; ????????
[state 0]
	type=palfx
	trigger1=(stateno=150 || stateno=152) && alive && !ishelper && (gametime%5=0) && sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=(playerid(floor(sysfvar(0))),var(0)=90900) && (playerid(floor(sysfvar(0))),var(36)>=40)
	time=2
	add=200,0,0
[state 0]
	type=changestate
	trigger1=(stateno=150 || stateno=152) && alive && !ishelper && sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=(playerid(floor(sysfvar(0))),var(0)=90900) && (playerid(floor(sysfvar(0))),var(36)>=50)
	value=190010
	ignorehitpause=1
;;--- dizzy
[state 0]
	type=changestate
	trigger1=stateno=5120 && (animtime=0) && !ishelper && numhelper(403000) ;;<-dizzy birds
	value=190116 ;;<- goto dizzy/stun state
;;--- fadeout when KOed ; KO????
[state 0]
	type=varset
	trigger1=stateno=5150 && time=1 && alive=0 && !ishelper && numpartner
	sysvar(1)=(roundstate<=2)
[state 0]
	type=assertspecial
	trigger1=stateno=5150 && alive=0 && !ishelper && numpartner && sysvar(1) && (((time=[80,150]) && time%10<5) || time>150)
	flag=invisible
	flag2=noshadow
[state 0]
	type=posset
	trigger1=stateno=5150 && time>=80 && alive=0 && !ishelper && numpartner && sysvar(1)
	y=(800-partner,pos y) *(((time=[80,150]) && time%10<5) || time>150)

;;--- pos reset debug (for mugen only) ---
[state 0]
	type=turn
	trigger1=roundstate=1 && time=1 && !ishelper && numpartner>1
	trigger1=sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && id>playerid(floor(sysfvar(0))),sysvar(0)+1
	trigger1=facing=ifelse(teamside=1,-1,1) && cond(teamside=1, screenpos x>playerid(id-2),screenpos x, screenpos x<playerid(id-2),screenpos x)
	persistent=0
[state 0]
	type=posset
	trigger1=roundstate=1 && time=1 && !ishelper && numpartner>1
	trigger1=sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && id>playerid(floor(sysfvar(0))),sysvar(0)+1
	trigger1=cond(teamside=1, screenpos x>playerid(id-2),screenpos x, screenpos x<playerid(id-2),screenpos x)
	x= playerid(id-1),pos x+const240p(20) *ifelse(teamside=1,-1,1)
	persistent=0
;//==========================
;//==========================


[State -2, 幽灵额外增加数量开关]
type = VarSet
trigger1 = 1
var(31) = 0  ; 0-5分别对应1-6个

[State -2, 幽灵额外增加攻击力开关]
type = VarSet
trigger1 = 1
var(32) = 10 ; 伤害数值比例为*10【也就是说，你写10额外增加100伤害】
             ; 推荐领域10-100
             ; 幽灵如果是1个，推荐15
             ; 幽灵如果是6个，推荐5
             ; 理论上你999999都可以的~~~r(st)q
             
[State -2, BUFF强化]
type = VarSet
trigger1 = 1
var(15) = 0 ; 0为不强化仅回气
            ; 1为强化回血
            ; 2为强化攻击力
            ; 3为回血的同时强化攻击力
            
[State x]
type = DefenceMulSet
Triggerall = var(13)>= 1
trigger1 = 1
value = 1-(1-((life+0.0)/lifemax+0.0))
ignorehitpause = 1

[State x]
type = AttackMulSet
Triggerall = var(13)>=1
trigger1 =   var(15) = 2||var(15) = 3
trigger1 = 1
value = 1+(1-((life+0.0)/lifemax+0.0))
ignorehitpause = 1




[State 多重残像拳]
type = hitoverride
trigger1 = var(14)>0
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = Ifelse(random<=500,700,710)
ignorehitpause = 1


[State -2, ]
type = varadd
trigger1 = var(14) > 0
v = 14
value = -1

[State -2, ]
type = VarSet
trigger1 = var(14) < 0
trigger2 = RoundState = [0,1]
v = 14
value = 0

[state -2,lifeadd]
type = lifeadd
Trigger1 = GameTime%10 = 0
trigger1 =   var(15) = 1||var(15) = 3
Triggerall = var(13)>= 1
value = var(13)*2

[state -2,poweradd]
type = poweradd
Trigger1 = GameTime%10 = 0
Triggerall = var(13)>= 1
value = var(13)*10

[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "V41=%d,V42=%d"
params = var(41),var(42)
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = movetype = A
trigger1 = p2movetype = A
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;time = 1
ignorehitpause = 1


[State AI_helper]
type  = HELPER
trigger1 = NUMHELPER(40000) = 0
name = "Learing_S"
ID = 40000
pos = 0,-100
postype = P1
stateno = 40000
keyctrl = 0
ignorehitpause = 1
pausemovetime = 10000000
supermovetime = 10000000

[State AI_helper]
type  = HELPER
trigger1 = NUMHELPER(41000) = 0
name = "Learing_C"
ID = 41000
pos = 0,-100
postype = P1
stateno = 41000
keyctrl = 0
ignorehitpause = 1
pausemovetime = 10000000
supermovetime = 10000000

[State AI_helper]
type  = HELPER
trigger1 = NUMHELPER(50000) = 0
name = "Learing_RD"
ID = 50000
pos = 0,-100
postype = P1
stateno = 50000
keyctrl = 0
ignorehitpause = 1
pausemovetime = 10000000
supermovetime = 10000000

[State AI_helper]
type  = HELPER
trigger1 = NUMHELPER(60000) = 0
name = "Learing_RD_C"
ID = 60000
pos = 0,-100
postype = P1
stateno = 60000
keyctrl = 0
ignorehitpause = 1
pausemovetime = 10000000
supermovetime = 10000000

[State 1100, 1]
type = RemoveExplod
trigger1 = Anim != [2700,2703]
ID = 9100

[State 0, Explod]
type = Explod
trigger1 = enemy,stateno=2654&&enemy,time=1
anim = 10045
scale=.5,.5
pos = 0,20
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
sprpriority = -1

[State 0, Explod]
type = Explod
trigger1 = enemy,stateno=2654&&enemy,time=1
anim = 7750
scale=.5,.5
pos = 0,20
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
sprpriority = 22222

[State 0, PlaySnd]
type = PlaySnd
trigger1 = enemy,stateno=2654&&enemy,time=1
value = S0,12

[State 闪光]
type = EnvColor
value = 255,255,255
trigger1 = enemy,stateno=2654&&enemy,time=1
ignorehitpause = 1
persistent = 0
time = 3
under = 1

[State 震动]
type = EnvShake
trigger1 = enemy,stateno=2654&&enemy,time=1
ignorehitpause = 0
persistent = 0
time = 20
ampl = -20
freq = 100
phase = 90



[State 1100, 1]
type = RemoveExplod
trigger1 = Anim != 911&&Anim != 2400
ID = 900

[State -2,弹墙特效]
type = Helper
trigger1 = !numhelper(1404)
trigger1 = p2stateno = 1011 && enemy,time = 1
trigger1 = P2movetype =H
helpertype = normal
ID =  1404
stateno = 1404
pos = -10,-70
postype = P2
facing = -1
keyctrl = 0
ownpal = 0
supermovetime = 1
pausemovetime = 1
name = "弹墙特效"
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1

[State -2,弹墙特效]
type = Helper
trigger1 = !numhelper(1705)
trigger1 = enemy,stateno = 1711 && time = 1
helpertype = normal
ID =  1705
stateno = 1705
pos = 10,-20
postype = P2
facing = -1
keyctrl = 0
ownpal = 0
supermovetime = 1
pausemovetime = 1
name = "弹墙特效"
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1


[State -2,弹墙特效]
type = Helper
trigger1 = !numhelper(1403)
trigger1 = stateno = 1402 && time = 1
trigger1 =statetype =A
helpertype = normal
ID =  1403
stateno = 1403
pos = 10,-70
postype = P1
facing = -1
keyctrl = 0
ownpal = 0
supermovetime = 1
pausemovetime = 1
name = "弹墙特效"
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1

;from a back-dash.
[State -3, Landing Sound]
type = PlaySnd
triggerall = gametime % 150 = 0
trigger1 = stateno = 0
trigger2 = stateno = 911
value = 5,15
volumescale =20



;站立光环
[State 1000, Explod]
type = Explod
triggerall = numexplod(7021) = 0
trigger1 = stateno = 0
trigger2 = stateno = 911
anim = 7021
ID = 7021
pos = 0,0
scale = .5,.5
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
sprpriority = 1
removeongethit = 1
supermove = 1
pausemove = 1

[State 1100, 1]
type = RemoveExplod
trigger1 = stateno != 0&&stateno != 911
ID = 7021

[Statedef -3]

;==============================================================================
;AIガ`ド切り替え
;==============================================================================
[State -3, 防御する必要がない状r] ;不需要防守的时候，敌人死了，或者是不在guarddist内
Type = VarSet
TriggerAll = !IsHelper
Trigger1 = NumEnemy = 0
Trigger2 = !InGuardDist
var(48) = 0
IgnoreHitPause = 1

[State -3, 立ち] ;站防，用var(48) = 2来代替
Type = VarSet
TriggerAll = var(59) = 1
TriggerAll =!IsHelper
TriggerAll = NumEnemy
TriggerAll = NumHelper(31000+ID)
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateNo != 0
Trigger1 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(10)
Trigger2 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(11)
Trigger3 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(12)
Trigger4 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(13)
Trigger5 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(14)
var(48) = 2
IgnoreHitPause = 1

[State -3, しゃがみ] ;蹲防，用var(48) = 1来代替
Type = VarSet
TriggerAll = var(59) = 1
TriggerAll =!IsHelper
TriggerAll = NumEnemy
TriggerAll = NumHelper(31000+ID)
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateNo != 0
Trigger1 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(20)
Trigger2 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(21)
Trigger3 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(22)
Trigger4 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(23)
Trigger5 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(24)
var(48) = 1
IgnoreHitPause = 1

[State -3, 立ち]
Type = VarSet
TriggerAll = var(59) = 1
TriggerAll =!IsHelper
TriggerAll = NumEnemy
TriggerAll = NumHelper(31000+ID)
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(20) ;不能是被破防的招式
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(21)
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(22)
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(23)
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(24)
Trigger1 = var(57) = [1,4]
Trigger1 = EnemyNear(var(58)),StateType = A
Trigger1 = Random <= ((var(57) * 12.5) * var(56))
Trigger1 = Random <= 250
Trigger2 = var(57) > 4
Trigger2 = EnemyNear(var(58)),StateType = A
Trigger3 = var(57) > 4
Trigger3 = EnemyNear(var(58)),StateType = S
Trigger3 = EnemyNear(var(58)),Time >= 20 || EnemyNear(var(58)),StateNo >= 1000
Trigger3 =!EnemyNear(var(58)),NumProj
var(48) = 2
IgnoreHitPause = 1

[State -3, しゃがみ]
Type = VarSet
TriggerAll = var(59) = 1
TriggerAll =!IsHelper
TriggerAll = NumEnemy
TriggerAll = NumHelper(31000+ID)
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(10)
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(11)
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(12)
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(13)
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(14)
Trigger1 = var(57) = [1,4]
Trigger1 = EnemyNear(var(58)),StateType != A
Trigger1 = Random <= ((var(57) * 12.5) * var(56))
Trigger1 = Random <= 250
Trigger2 = var(57) > 4
Trigger2 = EnemyNear(var(58)),StateType = C
Trigger3 = var(57) > 4
Trigger3 = EnemyNear(var(58)),StateType = S
Trigger3 = EnemyNear(var(58)),Time < 20 && EnemyNear(var(58)),StateNo < 1000
Trigger3 =!EnemyNear(var(58)),NumProj
Trigger4 = var(57) > 4
Trigger4 = EnemyNear(var(58)),StateType = S
Trigger4 = EnemyNear(var(58)),NumProj
var(48) = 1
IgnoreHitPause = 1

[State -3, 立ち]
Type = VarSet
TriggerAll = var(59) = 1
TriggerAll =!IsHelper
TriggerAll = NumEnemy
TriggerAll = NumHelper(31000+ID)
TriggerAll = StateType != A
TriggerAll = MoveType != H
Trigger1 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(10) ;破防以后换一个段位记忆招式
Trigger2 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(11)
Trigger3 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(12)
Trigger4 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(13)
Trigger5 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(14)
var(48) = 2
IgnoreHitPause = 1

[State -3, しゃがみ]
Type = VarSet
TriggerAll = var(59) = 1
TriggerAll =!IsHelper
TriggerAll = NumEnemy
TriggerAll = NumHelper(31000+ID)
TriggerAll = StateType != A
TriggerAll = MoveType != H
Trigger1 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(20)
Trigger2 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(21)
Trigger3 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(22)
Trigger4 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(23)
Trigger5 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(24)
var(48) = 1
IgnoreHitPause = 1

;---------------------------------------------------------------------------
; 画面端食謦廿毳雪`
;---------------------------------------------------------------------------
[State -3, 画面端食謦廿毳雪`]
Type = Helper
Trigger1 =!NumHelper(20000+ID)
Trigger1 =!IsHelper
HelperType = Normal
Name = "Edge of Stage Right"
PosType = P1
StateNo = 20000
ID = 20000+ID
PauseMoveTime = 0
Persistent = 0
IgnoreHitPause = 1
KeyCtrl = 0
Ownpal = 1

[State -3, 画面端食謦廿毳雪`]
Type = Helper
Trigger1 =!NumHelper(20001+ID)
Trigger1 =!IsHelper
HelperType = Normal
Name = "Edge of Stage Left"
PosType = P1
StateNo = 20001
ID = 20001+ID
PauseMoveTime = 0
Persistent = 0
IgnoreHitPause = 1
KeyCtrl = 0
Ownpal = 1

[State -3, ガ`ドチェックヘルパ`]
Type = Helper
TriggerAll = var(59)
TriggerAll = RoundState = 2
Trigger1 =!NumHelper(31000+ID)
Trigger1 =!IsHelper
HelperType = Normal
Name = "Guard"
PosType = left
StateNo = 31000
ID = 31000+ID
Pos = 0,9999
KeyCtrl = 0
Ownpal = 1
Persistent = 0
IgnoreHitPause = 1
PauseMoveTime = 2147483647
SuperMoveTime = 2147483647

[State -3, vSoいステ`トに行かないように]
Type = ChangeState
Trigger1 = IsHelper
Trigger1 = IsHelper(31000+Root,ID)
Trigger1 = StateNo != 31000
Value = 31000
;---------------------------------------------------------------------------
; vSoいステ`トに行かないように
;---------------------------------------------------------------------------
[State -3, vSoいステ`トに行かないように]
Type = ChangeState
Trigger1 = IsHelper
Trigger1 = IsHelper(20000+Root,ID)
Trigger1 = StateNo != 20000
Value = 20000

[State -3, vSoいステ`トに行かないように]
Type = ChangeState
Trigger1 = IsHelper
Trigger1 = IsHelper(20001+Root,ID)
Trigger1 = StateNo != 20001
Value = 20001
;-----------------------------------------------------------------------------
; ステ`ジ前後方端までの距x
;-----------------------------------------------------------------------------
[State -3, ステ`ジ前方端までの距x]
Type = VarSet
Trigger1 =(NumHelper(20000+ID) && NumHelper(20001+ID))
Trigger1 = TeamSide = 1
var(41) = floor(Abs(ifelse(Facing = 1,Helper(20000+ID),RootDist X,Helper(20001+ID),RootDist X)))
IgnoreHitPause = 1

[State -3, ステ`ジ前方端までの距x]
Type = VarSet
Trigger1 =(NumHelper(20000+ID) && NumHelper(20001+ID))
Trigger1 = TeamSide = 2
var(41) = floor(Abs(ifelse(Facing = 1,Helper(20001+ID),RootDist X,Helper(20000+ID),RootDist X)))
IgnoreHitPause = 1

[State -3, ステ`ジ後方端までの距x]
Type = VarSet
Trigger1 =(NumHelper(20000+ID) && NumHelper(20001+ID))
Trigger1 = TeamSide = 1
var(42) = floor(Abs(ifelse(Facing = 1,Helper(20001+ID),RootDist X,Helper(20000+ID),RootDist X)))
IgnoreHitPause = 1

[State -3, ステ`ジ後方端までの距x]
Type = VarSet
Trigger1 =(NumHelper(20000+ID) && NumHelper(20001+ID))
Trigger1 = TeamSide = 2
var(42) = floor(Abs(ifelse(Facing = 1,Helper(20000+ID),RootDist X,Helper(20001+ID),RootDist X)))
IgnoreHitPause = 1


[State AI_helper]
Type = Helper
TriggerAll =!var(59)
Trigger1 =!NumHelper(30000)
Trigger1 =!IsHelper
Trigger1 = RoundState <= 2 && Alive
Trigger1 =!Ctrl && StateNo = 0
helperType = Normal
Name = "AI"
StateNo = 30000
ID = 30000
Pos = 0,-100
keyCtrl = 1
PauseMoveTime = 9999999
SuperMoveTime = 9999999
Persistent = 0

[State 0, StopSnd]
type = StopSnd
trigger1 =anim=2900&&time=237
channel = 3
ignorehitpause =1

[State 0, StopSnd]
type = StopSnd
trigger1 =anim=2900&&time=237
channel = 4
ignorehitpause =1

;from a back-dash.
[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
value = 2,2

;受击人声设定----
[State -2,PlaySnd]
type =PlaySnd
triggerall = Alive && Random%2 = 0
triggerall = Time = 1
triggerall = (StateNo = 5000 || StateNo = 5010 || StateNo = 5020)
trigger1 = GethitVar(animtype)=[0,2]
value = 5000,ifelse((GethitVar(animtype)=[1,2]),3||3,2)
channel = 10

[State -2,PlaySnd]
type =PlaySnd
triggerall = Alive && Random%2 = 0
triggerall = Time = 1
triggerall = (StateNo = 5000 || StateNo = 5010 || StateNo = 5020)
trigger1 = GethitVar(animtype)=[0,2]
value = 5000,ifelse((GethitVar(animtype)=[2,3]),2,1)
channel = 10

[State -2,PlaySnd]
type =PlaySnd
triggerall = Alive && Random%2 = 0
triggerall = Time = 1
triggerall = (StateNo = 5000 || StateNo = 5010 || StateNo = 5020)
trigger1 = GethitVar(animtype)=[0,2]
value = 5000,ifelse((GethitVar(airtype)=[2,3]),2||2,3)
channel = 10

[State -2,PlaySnd]
type =PlaySnd
triggerall = Alive && Random%2 = 0
triggerall = Time = 1
triggerall = (StateNo = 5000 || StateNo = 5010 || StateNo = 5020)
trigger1 = GethitVar(animtype)=[0,4]
value = 5000,ifelse((GethitVar(airtype)=[2,3]),3,1)
channel = 10


;==============================================================================
; {C:\Users\User\Desktop\proyectodbz\chars\Super Gotenks\AI_helper.txt}
;==============================================================================


;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;AIヘルパ`
;AI版边真实距离检测用1-------------------------------------------------------------------------------------
[Statedef 20000]
type = A
movetype = I
physics = N
anim = ifelse(facing=-1,2,1)
velset = 10,0
ctrl = 0
sprpriority = 1

[State 20000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2 = invisible

[State 20000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20000, g`いで本体が来たら立ちへ移行]
type = SelfState
trigger1 =!ishelper
value = 0

[State 20000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 20000, Projectile]
type = Projectile
trigger1 = time = 0
velocity = 10,0
projID = 20000
projanim = 9999
offset = 0,100000
projstagebound = 0
projedgebound = 100000
projremovetime = -1

[State 20000, VelSet]
type = VelSet
trigger1 = Root,NumProjID(20000) = 0
trigger1 = time > 0
x = 0
y = 0

;AI版边真实距离检测用2-------------------------------------------------------------------------------------
[Statedef 20001]
type = A
movetype = I
physics = N
anim = ifelse(facing=-1,2,1)
velset = -10,0
ctrl = 0
sprpriority = 1

[State 20000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2 = invisible

[State 20000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20000, g`いで本体が来たら立ちへ移行]
type = SelfState
trigger1 =!ishelper
value = 0

[State 20000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 20000, Projectile]
type = Projectile
trigger1 = time = 0
velocity = -10,0
projID = 20001
projanim = 9999
offset = 0,100000
projstagebound = 0
projedgebound = 100000
projremovetime = -1

[State 20000, VelSet]
type = VelSet
trigger1 = Root,NumProjID(20001) = 0
trigger1 = time > 0
x = 0
y = 0


;AI起动用------------------------------------------------------------------------------
[Statedef 30000]
anim = ifelse(facing=-1,2,1)
ctrl = 0

[State 30000, AssertSpecial]
type = AssertSpecial ;这里让玩家无法看见helper
Trigger1 = 1
flag = NoShadow ;无影子
flag2 = invisible ;不可视

[State 30000, NotHitBy]
type = NotHitBy ;为了保证helper在战斗中不受某些类似AOE的影响,给helper写上无敌作为保险项
Trigger1 = 1
value = SCA

[State 30000, g`いで本体が来たら立ちへ移行]
type = SelfState ;当这个statedef不是helper时转到0
trigger1 =!ishelper
value = 0

[State 30000, プレイヤ`判定]
type = VarSet ;当玩家按到如下按键时,helper也检测到则关闭AI
trigger1 = command = "up" && root,command = "up"
trigger2 = command = "down" && root,command = "down"
trigger3 = command = "back" && root,command = "back"
trigger4 = command = "fwd" && root,command = "fwd"
trigger5 = command = "a" && root,command = "a"
trigger6 = command = "b" && root,command = "b"
trigger7 = command = "c" && root,command = "c"
trigger8 = command = "x" && root,command = "x"
trigger9 = command = "y" && root,command = "y"
trigger10 = command = "z" && root,command = "z"
trigger11 = command = "start" && root,command = "start"
var(59) = -1

[State 30000, 立ったら消失]
Type = DestroySelf ;关闭AI后立即消去HELPER,给玩家手操
triggerall = isHelper
trigger1 = root,var(59) || var(59) = -1
trigger2 = command = "up" && root,command = "up"
trigger3 = command = "down" && root,command = "down"
trigger4 = command = "back" && root,command = "back"
trigger5 = command = "fwd" && root,command = "fwd"
trigger6 = command = "a" && root,command ="a"
trigger7 = command = "b" && root,command ="b"
trigger8 = command = "c" && root,command ="c"
trigger9 = command = "x" && root,command = "x"
trigger10 = command = "y" && root,command = "y"
trigger11 = command = "z" && root,command = "z"
trigger12 = command = "start" && root,command = "start"

[State 30000, フラグON]
type = VarSet ;AI未启动时如果检测到下列按钮,则触发AI
triggerall = var(59) != -1
trigger1 = root,command = "up"
trigger2 = root,command = "down"
trigger3 = root,command = "back"
trigger4 = root,command = "fwd"
trigger5 = root,command = "a"
trigger6 = root,command = "b"
trigger7 = root,command = "c"
trigger8 = root,command = "x"
trigger9 = root,command = "y"
trigger10 = root,command = "z"
trigger11 = root,command = "start"
var(59) = 1


;AI破防记录------------------------------------------------------------------------------
[Statedef 31000]
type = A
movetype = I
physics = N
anim = 0
velset = 0,0
sprpriority = 1
ctrl = 0

[State 31000, AssertSpecial]
type = AssertSpecial
Trigger1 = 1
flag = NoShadow
flag2 = invisible

[State 31000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 31000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 31000, g`いで本体が来たら立ちへ移行]
type = SelfState
trigger1 =!ishelper
value = 0

[State -3, 目の前の长一番近い相手である]
type = VarSet
triggerall = roundstate = 2
trigger1 = numenemy <= 1
trigger2 = numenemy >= 2
trigger2 = enemy(0),life <= 0 || enemy(1),life <= 0
trigger2 = enemynear(0),life > 0
trigger3 = numenemy >= 2
trigger3 = enemy(0),life > 0 && enemy(1),life > 0
trigger3 = abs(root,pos x - enemynear(0),pos x) <= abs(root,pos x - enemynear(1),pos x)
var(1) = 0
IgnoreHitPause = 1

[State -3, 目の前の长一番近い相手ではない]
type = VarSet
triggerall = roundstate = 2
triggerall = numenemy >= 2
trigger1 = enemynear(0),life <= 0
trigger2 = numenemy >= 2
trigger2 = enemy(0),life <= 0 || enemy(1),life <= 0
trigger2 = enemynear(0),life <= 0
trigger3 = enemy(0),life > 0 && enemy(1),life > 0
trigger3 = abs(root,pos x - enemynear(0),pos x) > abs(root,pos x - enemynear(1),pos x)
var(1) = 1
IgnoreHitPause = 1

;自分の後ろにO置　DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD
[State 31000, Turn]
type = Turn
trigger1 = facing*ifelse((enemynear(var(1)),pos x-pos x)>=0,1,-1) < 0
IgnoreHitPause = 1
supermovetime = 9999
pausemovetime = 9999

[State 31000, VarSet]
type = VarSet
trigger1 = enemynear(var(1)),facing*ifelse((enemynear(var(1)),pos x-root,pos x)>=0,1,-1)<=0
trigger2 = !enemynear(var(1)),hitdefattr = A,NA,SA,HA
var(2) = 0
IgnoreHitPause = 1
supermovetime = 9999
pausemovetime = 9999

[State 31000, VarSet]
type = VarSet
trigger1 = enemynear(var(1)),facing*ifelse((EnemyNear(var(1)),pos x-root,pos x)>=0,1,-1)>0
trigger1 = enemynear(var(1)),hitdefattr = A,NA,SA,HA
var(2) = 1
IgnoreHitPause = 1
supermovetime = 9999
pausemovetime = 9999

[State 31000, PosSet]
type = PosSet
trigger1 = 1
x = root,pos x+ifelse((enemynear(var(1)),pos y<0&&var(2)=1),(enemynear(var(1)),const(size.attack.dist)),(enemynear(var(1)),const(size.proj.attack.dist)))*(enemynear(var(1)),facing)
IgnoreHitPause = 1
supermovetime = 9999
pausemovetime = 9999

;---------------------------------------------------------------------------
[State 31000, リセット]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,StateNo != [120,155]
Trigger1 = Root,MoveType!= H
Trigger1 = Root,Ctrl = 1 && var(50) > 0
Trigger2 = Root,MoveType = H
Trigger2 = Root,Time > 1 && var(50) > 0
var(50) = 0
IgnoreHitPause = 1

;分别记下来防御中站立，蹲下，空中（可有可无）情况

[State 31000, 立ちガ`ドr学用]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,StateNo = [120,155]
Trigger1 = Root,StateType = S
var(50) = 1
IgnoreHitPause = 1

[State 31000, 下段ガ`ドr学用]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,StateNo = [120,155]
Trigger1 = Root,StateType = C
var(50) = 2
IgnoreHitPause = 1

[State 31000, 空中ガ`ドr学用]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,StateNo = [120,155]
Trigger1 = Root,StateType = A
var(50) = 3
IgnoreHitPause = 1

;---------------------------------------------------------------------------
[State 31000, リセット]
Type = VarSet
Trigger1 = 1
var(51) = 0
IgnoreHitPause = 1

[State 31000, 特殊状B] ;重点在这里，记录下本体被打并且不是站立也不是蹲下的情况
Type = VarSet
TriggerAll = Root,var(59) = 1
Trigger1 = Root,MoveType = H && Root,StateType != S && Root,StateType != C && (Root,StateNo != [120,155])
var(51) = 1
IgnoreHitPause = 1

;---------------------------------------------------------------------------
;ガ`ド学
;---------------------------------------------------------------------------
[State 31000, 中段]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1 ;这里记录下特殊情况，下面也是一样
TriggerAll = EnemyNear(Root,var(58)),StateType != A && (Root,StateType = C || var(50) = 2)
Trigger1 = var(10) = 0
V = 10
Value = (EnemyNear(Root,var(58)),StateNo)
IgnoreHitPause = 1

[State 31000, 中段]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != A && (Root,StateType = C || var(50) = 2)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(10)
Trigger1 = var(10) > 0
Trigger1 = var(11) = 0
V = 11
Value = (EnemyNear(Root,var(58)),StateNo)
IgnoreHitPause = 1

[State 31000, 中段]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != A && (Root,StateType = C || var(50) = 2)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(10)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(11)
Trigger1 = var(11) > 0
Trigger1 = var(12) = 0
V = 12
Value = (EnemyNear(Root,var(58)),StateNo)
IgnoreHitPause = 1

[State 31000, 中段]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != A && (Root,StateType = C || var(50) = 2)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(10)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(11)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(12)
Trigger1 = var(12) > 0
Trigger1 = var(13) = 0
V = 13
Value = (EnemyNear(Root,var(58)),StateNo)
IgnoreHitPause = 1

[State 31000, 中段]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != A && (Root,StateType = C || var(50) = 2)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(10)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(11)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(12)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(13)
Trigger1 = var(13) > 0
Trigger1 = var(14) = 0
V = 14
Value = (EnemyNear(Root,var(58)),StateNo)
IgnoreHitPause = 1

;---------------------------------------------------------------------------
[State 31000, 下段]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != C && (Root,StateType = S || var(50) = 1)
Trigger1 = var(20) = 0
V = 20
Value = (EnemyNear(Root,var(58)),StateNo)
IgnoreHitPause = 1

[State 31000, 下段]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != C && (Root,StateType = S || var(50) = 1)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(20)
Trigger1 = var(20) > 0
Trigger1 = var(21) = 0
V = 21
Value = (EnemyNear(Root,var(58)),StateNo)
IgnoreHitPause = 1

[State 31000, 下段]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != C && (Root,StateType = S || var(50) = 1)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(20)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(21)
Trigger1 = var(21) > 0
Trigger1 = var(22) = 0
V = 22
Value = (EnemyNear(Root,var(58)),StateNo)
IgnoreHitPause = 1

[State 31000, 下段]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != C && (Root,StateType = S || var(50) = 1)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(20)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(21)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(22)
Trigger1 = var(22) > 0
Trigger1 = var(23) = 0
V = 23
Value = (EnemyNear(Root,var(58)),StateNo)
IgnoreHitPause = 1

[State 31000, 下段]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != C && (Root,StateType = S || var(50) = 1)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(20)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(21)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(22)
TriggerAll = EnemyNear(Root,var(58)),StateNo != var(23)
Trigger1 = var(23) > 0
Trigger1 = var(24) = 0
V = 24
Value = (EnemyNear(Root,var(58)),StateNo)
IgnoreHitPause = 1

;---------------------------------------------------------------------------
[State 31000, 中段削除]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != A && (Root,StateType = S || var(50) = 1)
TriggerAll = EnemyNear(Root,var(58)),StateNo = var(10)
Trigger1 = var(10) > 0
V = 10
Value = 0
IgnoreHitPause = 1

[State 31000, 中段削除]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != A && (Root,StateType = S || var(50) = 1)
TriggerAll = EnemyNear(Root,var(58)),StateNo = var(11)
Trigger1 = var(11) > 0
V = 11
Value = 0
IgnoreHitPause = 1

[State 31000, 中段削除]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != A && (Root,StateType = S || var(50) = 1)
TriggerAll = EnemyNear(Root,var(58)),StateNo = var(12)
Trigger1 = var(12) > 0
V = 12
Value = 0
IgnoreHitPause = 1

[State 31000, 中段削除]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != A && (Root,StateType = S || var(50) = 1)
TriggerAll = EnemyNear(Root,var(58)),StateNo = var(13)
Trigger1 = var(13) > 0
V = 13
Value = 0
IgnoreHitPause = 1

[State 31000, 中段削除]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != A && (Root,StateType = S || var(50) = 1)
TriggerAll = EnemyNear(Root,var(58)),StateNo = var(14)
Trigger1 = var(14) > 0
V = 14
Value = 0
IgnoreHitPause = 1

;---------------------------------------------------------------------------
[State 31000, 下段削除]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != C && (Root,StateType = C || var(50) = 2)
TriggerAll = EnemyNear(Root,var(58)),StateNo = var(20)
Trigger1 = var(20) > 0
V = 20
Value = 0
IgnoreHitPause = 1

[State 31000, 下段削除]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != C && (Root,StateType = C || var(50) = 2)
TriggerAll = EnemyNear(Root,var(58)),StateNo = var(21)
Trigger1 = var(21) > 0
V = 21
Value = 0
IgnoreHitPause = 1

[State 31000, 下段削除]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != C && (Root,StateType = C || var(50) = 2)
TriggerAll = EnemyNear(Root,var(58)),StateNo = var(22)
Trigger1 = var(22) > 0
V = 22
Value = 0
IgnoreHitPause = 1

[State 31000, 下段削除]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != C && (Root,StateType = C || var(50) = 2)
TriggerAll = EnemyNear(Root,var(58)),StateNo = var(23)
Trigger1 = var(23) > 0
V = 23
Value = 0
IgnoreHitPause = 1

[State 31000, 下段削除]
Type = VarSet
TriggerAll = Root,var(59) = 1
TriggerAll = Root,MoveType = H && Root,Time <= 1
TriggerAll =(Root,StateNo != [120,155]) && (Root,PrevStateNo = [120,155]) || Root,StateNo >= 200 && var(51) = 1
TriggerAll = EnemyNear(Root,var(58)),StateType != C && (Root,StateType = C || var(50) = 2)
TriggerAll = EnemyNear(Root,var(58)),StateNo = var(24)
Trigger1 = var(24) > 0
V = 24
Value = 0
IgnoreHitPause = 1

;---------------------------------------------------------------------------
[State 31000, DisplayToClipBoard]
Type = DisplayToClipBoard
trigger1 = IsHelper
Text = "var(10)=%d,var(11)=%d,var(12)=%d,var(13)=%d,var(14)=%d"
Params = var(10),var(11),var(12),var(13),var(14)
IgnoreHitPause = 1

[State 31000, AppendToClipboard]
type = AppendToClipboard
trigger1 = IsHelper
text = "\nvar(20)=%d,var(21)=%d,var(22)=%d,var(23)=%d,var(24)=%d"
params = var(20),var(21),var(22),var(23),var(24)
IgnoreHitPause = 1

;---------------------------------------------------------------------------
[State 31000, DestroySelf]
type = DestroySelf
triggerall = ishelper
triggerall = roundstate >= 3
trigger1 = root,stateno != [120,159]
trigger2 = roundstate >= 4

;AI记忆用-打康-站立-----------------------------------------------------------------------------
[Statedef 40000]
anim = ifelse(facing=-1,2,1)
ctrl = 0

[STATE 设置初始值]
TYPE                          = VARRANGESET
;TRIGGERALL                    = ROOT,VAR(59)
TRIGGER1                      = TIME = 0
FIRST                         = 1
LAST                          = 50
VALUE                         = -1

[State 30000, AssertSpecial]
type = AssertSpecial ;这里让玩家无法看见helper
Trigger1 = 1
flag = NoShadow ;无影子
flag2 = invisible ;不可视

[State 30000, NotHitBy]
type = NotHitBy ;为了保证helper在战斗中不受某些类似AOE的影响,给helper写上无敌作为保险项
Trigger1 = 1
value = SCA

[State 30000, g`いで本体が来たら立ちへ移行]
type = SelfState ;当这个statedef不是helper时转到0
trigger1 =!ishelper
value = 0

[State 0, 普攻号码记录1]
type = VarSet
triggerall=var(1)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S&&enemynear,statetype=S
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 1
value =enemynear,stateno

[State 0, 普攻时间记录1]
type = VarSet
triggerall=var(2)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(1)  ;对方的状态已经记忆
v = 2
value =enemynear,time

[State 0, 普攻号码记录2]
type = VarSet
triggerall=var(3)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 3
value =enemynear,stateno

[State 0, 普攻时间记录2]
type = VarSet
triggerall=var(4)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(3)  ;对方的状态已经记忆
v = 4
value =enemynear,time

[State 0, 普攻号码记录3]
type = VarSet
triggerall=var(5)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 5
value =enemynear,stateno

[State 0, 普攻时间记录3]
type = VarSet
triggerall=var(6)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(5)  ;对方的状态已经记忆
v = 6
value =enemynear,time

[State 0, 普攻号码记录4]
type = VarSet
triggerall=var(7)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 7
value =enemynear,stateno

[State 0, 普攻时间记录4]
type = VarSet
triggerall=var(8)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(7)  ;对方的状态已经记忆
v = 8
value =enemynear,time


[State 0, 普攻号码记录5]
type = VarSet
triggerall=var(9)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 9
value =enemynear,stateno

[State 0, 普攻时间记录5]
type = VarSet
triggerall=var(10)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(9)  ;对方的状态已经记忆
v = 10
value =enemynear,time

[State 0, 普攻号码记录6]
type = VarSet
triggerall=var(11)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(9)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 11
value =enemynear,stateno

[State 0, 普攻时间记录6]
type = VarSet
triggerall=var(12)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(11)  ;对方的状态已经记忆
v = 12
value =enemynear,time

[State 0, 普攻号码记录7]
type = VarSet
triggerall=var(13)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(9)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(11)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 13
value =enemynear,stateno

[State 0, 普攻时间记录7]
type = VarSet
triggerall=var(14)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(13)  ;对方的状态已经记忆
v = 14
value =enemynear,time

[State 0, 普攻号码记录8]
type = VarSet
triggerall=var(15)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(9)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(11)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(13)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 15
value =enemynear,stateno

[State 0, 普攻时间记录8]
type = VarSet
triggerall=var(16)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(15)  ;对方的状态已经记忆
v = 16
value =enemynear,time

[State 0, 普攻号码记录9]
type = VarSet
triggerall=var(17)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(9)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(11)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(13)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(15)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 17
value =enemynear,stateno

[State 0, 普攻时间记录9]
type = VarSet
triggerall=var(18)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(17)  ;对方的状态已经记忆
v = 18
value =enemynear,time


[State 0, 普攻号码记录10]
type = VarSet
triggerall=var(19)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(9)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(11)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(13)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(15)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(17)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 19
value =enemynear,stateno

[State 0, 普攻时间记录10]
type = VarSet
triggerall=var(20)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(19)  ;对方的状态已经记忆
v = 20
value =enemynear,time

[State 0, 必杀号码记录1]
type = VarSet
triggerall=var(21)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 21
value =enemynear,stateno

[State 0, 必杀时间记录1]
type = VarSet
triggerall=var(22)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(21)  ;对方的状态已经记忆
v = 22
value =enemynear,time

[State 0, 必杀号码记录2]
type = VarSet
triggerall=var(23)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 23
value =enemynear,stateno

[State 0, 必杀时间记录2]
type = VarSet
triggerall=var(24)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(23)  ;对方的状态已经记忆
v = 24
value =enemynear,time

[State 0, 必杀号码记录3]
type = VarSet
triggerall=var(25)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 25
value =enemynear,stateno

[State 0, 必杀时间记录3]
type = VarSet
triggerall=var(26)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(25)  ;对方的状态已经记忆
v = 26
value =enemynear,time

[State 0, 必杀号码记录4]
type = VarSet
triggerall=var(27)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 27
value =enemynear,stateno

[State 0, 必杀时间记录4]
type = VarSet
triggerall=var(28)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(27)  ;对方的状态已经记忆
v = 28
value =enemynear,time

[State 0, 必杀号码记录5]
type = VarSet
triggerall=var(29)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 29
value =enemynear,stateno

[State 0, 必杀时间记录5]
type = VarSet
triggerall=var(30)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(29)  ;对方的状态已经记忆
v = 30
value =enemynear,time

[State 0, 必杀号码记录6]
type = VarSet
triggerall=var(31)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(29)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 31
value =enemynear,stateno

[State 0, 必杀时间记录6]
type = VarSet
triggerall=var(32)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(31)  ;对方的状态已经记忆
v = 32
value =enemynear,time

[State 0, 必杀号码记录7]
type = VarSet
triggerall=var(33)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(29)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(31)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 33
value =enemynear,stateno

[State 0, 必杀时间记录7]
type = VarSet
triggerall=var(34)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(33)  ;对方的状态已经记忆
v = 34
value =enemynear,time

[State 0, 必杀号码记录8]
type = VarSet
triggerall=var(35)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(29)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(31)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(33)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 35
value =enemynear,stateno

[State 0, 必杀时间记录8]
type = VarSet
triggerall=var(36)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(35)  ;对方的状态已经记忆
v = 36
value =enemynear,time

[State 0, 必杀号码记录9]
type = VarSet
triggerall=var(37)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(29)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(31)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(33)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(35)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 37
value =enemynear,stateno

[State 0, 必杀时间记录9]
type = VarSet
triggerall=var(38)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(37)  ;对方的状态已经记忆
v = 38
value =enemynear,time

[State 0, 必杀号码记录10]
type = VarSet
triggerall=var(39)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(29)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(31)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(33)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(35)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(37)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 39
value =enemynear,stateno

[State 0, 必杀时间记录10]
type = VarSet
triggerall=var(40)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(39)  ;对方的状态已经记忆
v = 40
value =enemynear,time


[State 0, 超杀号码记录1]
type = VarSet
triggerall=var(41)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,hitdefattr = SCA,HA ;超杀攻击检测
v = 41
value =enemynear,stateno

[State 0, 超杀时间记录1]
type = VarSet
triggerall=var(42)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,stateno=var(41)  ;对方的状态已经记忆
v = 42
value =enemynear,time

[State 0, 超杀号码记录2]
type = VarSet
triggerall=var(43)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,hitdefattr = SCA,HA ;超杀攻击检测
v = 43
value =enemynear,stateno

[State 0, 超杀时间记录2]
type = VarSet
triggerall=var(44)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(41)  ;确保号码不是之前记忆的号码
trigger1=enemynear,stateno=var(43)  ;对方的状态已经记忆
v = 44
value =enemynear,time

[State 0, 超杀号码记录3]
type = VarSet
triggerall=var(45)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,hitdefattr = SCA,HA ;超杀攻击检测
v = 45
value =enemynear,stateno

[State 0, 超杀时间记录3]
type = VarSet
triggerall=var(46)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(41)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(43)  ;确保号码不是之前记忆的号码
trigger1=enemynear,stateno=var(45)  ;对方的状态已经记忆
v = 46
value =enemynear,time

[State 0, 超杀号码记录4]
type = VarSet
triggerall=var(47)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,hitdefattr = SCA,HA ;超杀攻击检测
v = 47
value =enemynear,stateno

[State 0, 超杀时间记录4]
type = VarSet
triggerall=var(48)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(41)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(43)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(45)  ;确保号码不是之前记忆的号码
trigger1=enemynear,stateno=var(47)  ;对方的状态已经记忆
v = 48
value =enemynear,time

[State 0, 超杀号码记录5]
type = VarSet
triggerall=var(49)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
trigger1=enemynear,hitdefattr = SCA,HA ;超杀攻击检测
v = 49
value =enemynear,stateno

[State 0, 超杀时间记录5]
type = VarSet
triggerall=var(50)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=S
triggerall=enemynear,stateno!=var(41)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(43)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(45)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(47)  ;确保号码不是之前记忆的号码
trigger1=enemynear,stateno=var(48)  ;对方的状态已经记忆
v = 50
value =enemynear,time

;AI记忆用-打康-蹲下-----------------------------------------------------------------------------
[Statedef 41000]
anim = ifelse(facing=-1,2,1)
ctrl = 0

[STATE 设置初始值]
TYPE                          = VARRANGESET
;TRIGGERALL                    = ROOT,VAR(59)
TRIGGER1                      = TIME = 0
FIRST                         = 1
LAST                          = 50
VALUE                         = -1

[State 30000, AssertSpecial]
type = AssertSpecial ;这里让玩家无法看见helper
Trigger1 = 1
flag = NoShadow ;无影子
flag2 = invisible ;不可视

[State 30000, NotHitBy]
type = NotHitBy ;为了保证helper在战斗中不受某些类似AOE的影响,给helper写上无敌作为保险项
Trigger1 = 1
value = SCA

[State 30000, g`いで本体が来たら立ちへ移行]
type = SelfState ;当这个statedef不是helper时转到0
trigger1 =!ishelper
value = 0

[State 0, 普攻号码记录1]
type = VarSet
triggerall=var(1)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 1
value =enemynear,stateno

[State 0, 普攻时间记录1]
type = VarSet
triggerall=var(2)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(1)  ;对方的状态已经记忆
v = 2
value =enemynear,time

[State 0, 普攻号码记录2]
type = VarSet
triggerall=var(3)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 3
value =enemynear,stateno

[State 0, 普攻时间记录2]
type = VarSet
triggerall=var(4)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(3)  ;对方的状态已经记忆
v = 4
value =enemynear,time

[State 0, 普攻号码记录3]
type = VarSet
triggerall=var(5)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 5
value =enemynear,stateno

[State 0, 普攻时间记录3]
type = VarSet
triggerall=var(6)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(5)  ;对方的状态已经记忆
v = 6
value =enemynear,time

[State 0, 普攻号码记录4]
type = VarSet
triggerall=var(7)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 7
value =enemynear,stateno

[State 0, 普攻时间记录4]
type = VarSet
triggerall=var(8)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(7)  ;对方的状态已经记忆
v = 8
value =enemynear,time


[State 0, 普攻号码记录5]
type = VarSet
triggerall=var(9)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 9
value =enemynear,stateno

[State 0, 普攻时间记录5]
type = VarSet
triggerall=var(10)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(9)  ;对方的状态已经记忆
v = 10
value =enemynear,time

[State 0, 普攻号码记录6]
type = VarSet
triggerall=var(11)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(9)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 11
value =enemynear,stateno

[State 0, 普攻时间记录6]
type = VarSet
triggerall=var(12)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(11)  ;对方的状态已经记忆
v = 12
value =enemynear,time

[State 0, 普攻号码记录7]
type = VarSet
triggerall=var(13)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(9)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(11)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 13
value =enemynear,stateno

[State 0, 普攻时间记录7]
type = VarSet
triggerall=var(14)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(13)  ;对方的状态已经记忆
v = 14
value =enemynear,time

[State 0, 普攻号码记录8]
type = VarSet
triggerall=var(15)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(9)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(11)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(13)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 15
value =enemynear,stateno

[State 0, 普攻时间记录8]
type = VarSet
triggerall=var(16)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(15)  ;对方的状态已经记忆
v = 16
value =enemynear,time

[State 0, 普攻号码记录9]
type = VarSet
triggerall=var(17)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(9)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(11)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(13)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(15)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 17
value =enemynear,stateno

[State 0, 普攻时间记录9]
type = VarSet
triggerall=var(18)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(17)  ;对方的状态已经记忆
v = 18
value =enemynear,time


[State 0, 普攻号码记录10]
type = VarSet
triggerall=var(19)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(9)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(11)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(13)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(15)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(17)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 19
value =enemynear,stateno

[State 0, 普攻时间记录10]
type = VarSet
triggerall=var(20)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(19)  ;对方的状态已经记忆
v = 20
value =enemynear,time

[State 0, 必杀号码记录1]
type = VarSet
triggerall=var(21)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 21
value =enemynear,stateno

[State 0, 必杀时间记录1]
type = VarSet
triggerall=var(22)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(21)  ;对方的状态已经记忆
v = 22
value =enemynear,time

[State 0, 必杀号码记录2]
type = VarSet
triggerall=var(23)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 23
value =enemynear,stateno

[State 0, 必杀时间记录2]
type = VarSet
triggerall=var(24)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(23)  ;对方的状态已经记忆
v = 24
value =enemynear,time

[State 0, 必杀号码记录3]
type = VarSet
triggerall=var(25)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 25
value =enemynear,stateno

[State 0, 必杀时间记录3]
type = VarSet
triggerall=var(26)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(25)  ;对方的状态已经记忆
v = 26
value =enemynear,time

[State 0, 必杀号码记录4]
type = VarSet
triggerall=var(27)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 27
value =enemynear,stateno

[State 0, 必杀时间记录4]
type = VarSet
triggerall=var(28)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(27)  ;对方的状态已经记忆
v = 28
value =enemynear,time

[State 0, 必杀号码记录5]
type = VarSet
triggerall=var(29)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 29
value =enemynear,stateno

[State 0, 必杀时间记录5]
type = VarSet
triggerall=var(30)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(29)  ;对方的状态已经记忆
v = 30
value =enemynear,time

[State 0, 必杀号码记录6]
type = VarSet
triggerall=var(31)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(29)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 31
value =enemynear,stateno

[State 0, 必杀时间记录6]
type = VarSet
triggerall=var(32)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(31)  ;对方的状态已经记忆
v = 32
value =enemynear,time

[State 0, 必杀号码记录7]
type = VarSet
triggerall=var(33)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(29)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(31)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 33
value =enemynear,stateno

[State 0, 必杀时间记录7]
type = VarSet
triggerall=var(34)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(33)  ;对方的状态已经记忆
v = 34
value =enemynear,time

[State 0, 必杀号码记录8]
type = VarSet
triggerall=var(35)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(29)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(31)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(33)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 35
value =enemynear,stateno

[State 0, 必杀时间记录8]
type = VarSet
triggerall=var(36)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(35)  ;对方的状态已经记忆
v = 36
value =enemynear,time

[State 0, 必杀号码记录9]
type = VarSet
triggerall=var(37)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(29)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(31)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(33)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(35)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 37
value =enemynear,stateno

[State 0, 必杀时间记录9]
type = VarSet
triggerall=var(38)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(37)  ;对方的状态已经记忆
v = 38
value =enemynear,time

[State 0, 必杀号码记录10]
type = VarSet
triggerall=var(39)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(29)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(31)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(33)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(35)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(37)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,SA ;必杀攻击检测
v = 39
value =enemynear,stateno

[State 0, 必杀时间记录10]
type = VarSet
triggerall=var(40)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(39)  ;对方的状态已经记忆
v = 40
value =enemynear,time


[State 0, 超杀号码记录1]
type = VarSet
triggerall=var(41)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,hitdefattr = SCA,HA ;超杀攻击检测
v = 41
value =enemynear,stateno

[State 0, 超杀时间记录1]
type = VarSet
triggerall=var(42)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,stateno=var(41)  ;对方的状态已经记忆
v = 42
value =enemynear,time

[State 0, 超杀号码记录2]
type = VarSet
triggerall=var(43)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,hitdefattr = SCA,HA ;超杀攻击检测
v = 43
value =enemynear,stateno

[State 0, 超杀时间记录2]
type = VarSet
triggerall=var(44)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(41)  ;确保号码不是之前记忆的号码
trigger1=enemynear,stateno=var(43)  ;对方的状态已经记忆
v = 44
value =enemynear,time

[State 0, 超杀号码记录3]
type = VarSet
triggerall=var(45)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,hitdefattr = SCA,HA ;超杀攻击检测
v = 45
value =enemynear,stateno

[State 0, 超杀时间记录3]
type = VarSet
triggerall=var(46)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(41)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(43)  ;确保号码不是之前记忆的号码
trigger1=enemynear,stateno=var(45)  ;对方的状态已经记忆
v = 46
value =enemynear,time

[State 0, 超杀号码记录4]
type = VarSet
triggerall=var(47)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,hitdefattr = SCA,HA ;超杀攻击检测
v = 47
value =enemynear,stateno

[State 0, 超杀时间记录4]
type = VarSet
triggerall=var(48)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(41)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(43)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(45)  ;确保号码不是之前记忆的号码
trigger1=enemynear,stateno=var(47)  ;对方的状态已经记忆
v = 48
value =enemynear,time

[State 0, 超杀号码记录5]
type = VarSet
triggerall=var(49)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
trigger1=enemynear,hitdefattr = SCA,HA ;超杀攻击检测
v = 49
value =enemynear,stateno

[State 0, 超杀时间记录5]
type = VarSet
triggerall=var(50)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A&&enemynear,statetype=C
triggerall=enemynear,stateno!=var(41)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(43)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(45)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(47)  ;确保号码不是之前记忆的号码
trigger1=enemynear,stateno=var(48)  ;对方的状态已经记忆
v = 50
value =enemynear,time

;AI记忆用-对方的当身-----------------------------------------------------------------------------
[Statedef 50000]
anim =  ifelse(facing=-1,2,1)
ctrl = 0


[STATE 设置初始值]
TYPE                          = VARRANGESET
;TRIGGERALL                    = ROOT,VAR(59)
TRIGGER1                      = TIME = 0
FIRST                         = 1
LAST                          = 50
VALUE                         = -1


[State 30000, AssertSpecial]
type = AssertSpecial ;这里让玩家无法看见helper
Trigger1 = 1
flag = NoShadow ;无影子
flag2 = invisible ;不可视

[State 30000, NotHitBy]
type = NotHitBy ;为了保证helper在战斗中不受某些类似AOE的影响,给helper写上无敌作为保险项
Trigger1 = 1
value = SCA

[State 30000, g`いで本体が来たら立ちへ移行]
type = SelfState ;当这个statedef不是helper时转到0
trigger1 =!ishelper
value = 0

[State 0, 当身记忆对方当前状态1]
type = VarSet
triggerall=var(1)=-1 ;确保变量未使用
triggerall = enemy,stateno!=[0,11]
trigger1 = Root,MoveReversed    ;确认吃了当身
v = 1
value = enemynear,stateno

[State 0, 当身记忆对方上一个状态1]
type = VarSet
triggerall=var(2)=-1 ;确保变量未使用
triggerall = enemy,stateno!=[0,11]
trigger1=var(1)=enemynear,stateno ;确认吃了当身并记忆
v = 2
value = enemynear,prevstateno

[State 0, 当身记忆对方当前状态2]
type = VarSet
triggerall=var(3)=-1 ;确保变量未使用
triggerall = enemy,stateno!=[0,11]
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
trigger1 = Root,MoveReversed     ;确认吃了当身
v = 3
value = enemynear,stateno

[State 0, 当身记忆对方上一个状态2]
type = VarSet
triggerall=var(4)=-1 ;确保变量未使用
triggerall = enemy,stateno!=[0,11]
triggerall=enemynear,prevstateno!=var(2)  ;确保号码不是之前记忆的号码
trigger1=var(3)=enemynear,stateno ;确认吃了当身并记忆
v = 4
value = enemynear,prevstateno

[State 0, 当身记忆对方当前状态3]
type = VarSet
triggerall=var(5)=-1 ;确保变量未使用
triggerall = enemy,stateno!=[0,11]
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
trigger1 = Root,MoveReversed     ;确认吃了当身
v = 5
value = enemynear,stateno

[State 0, 当身记忆对方上一个状态3]
type = VarSet
triggerall=var(6)=-1 ;确保变量未使用
triggerall = enemy,stateno!=[0,11]
triggerall=enemynear,prevstateno!=var(2)  ;确保号码不是之前记忆的号码
triggerall=enemynear,prevstateno!=var(4)  ;确保号码不是之前记忆的号码
trigger1=var(5)=enemynear,stateno ;确认吃了当身并记忆
v = 6
value = enemynear,prevstateno

[State 0, 当身记忆对方当前状态4]
type = VarSet
triggerall=var(7)=-1 ;确保变量未使用
triggerall = enemy,stateno!=[0,11]
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
trigger1 = Root,MoveReversed     ;确认吃了当身
v = 7
value = enemynear,stateno

[State 0, 当身记忆对方上一个状态4]
type = VarSet
triggerall=var(8)=-1 ;确保变量未使用
triggerall = enemy,stateno!=[0,11]
triggerall=enemynear,prevstateno!=var(2)  ;确保号码不是之前记忆的号码
triggerall=enemynear,prevstateno!=var(4)  ;确保号码不是之前记忆的号码
triggerall=enemynear,prevstateno!=var(6)  ;确保号码不是之前记忆的号码
trigger1=var(7)=enemynear,stateno ;确认吃了当身并记忆
v = 8
value = enemynear,prevstateno

[State 0, 当身记忆对方当前状态5]
type = VarSet
triggerall=var(9)=-1 ;确保变量未使用
triggerall = enemy,stateno!=[0,11]
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
trigger1 = Root,MoveReversed     ;确认吃了当身
v = 9
value = enemynear,stateno

[State 0, 当身记忆对方上一个状态5]
type = VarSet
triggerall=var(10)=-1 ;确保变量未使用
triggerall = enemy,stateno!=[0,11]
triggerall=enemynear,prevstateno!=var(2)  ;确保号码不是之前记忆的号码
triggerall=enemynear,prevstateno!=var(4)  ;确保号码不是之前记忆的号码
triggerall=enemynear,prevstateno!=var(6)  ;确保号码不是之前记忆的号码
triggerall=enemynear,prevstateno!=var(8)  ;确保号码不是之前记忆的号码
trigger1=var(9)=enemynear,stateno ;确认吃了当身并记忆
v = 10
value = enemynear,prevstateno


;AI记忆用-投-----------------------------------------------------------------------------
[Statedef 60000]
anim = ifelse(facing=-1,2,1)
ctrl = 0

[STATE 设置初始值]
TYPE                          = VARRANGESET
;TRIGGERALL                    = ROOT,VAR(59)
TRIGGER1                      = TIME = 0
FIRST                         = 1
LAST                          = 50
VALUE                         = -1

[State 30000, AssertSpecial]
type = AssertSpecial ;这里让玩家无法看见helper
Trigger1 = 1
flag = NoShadow ;无影子
flag2 = invisible ;不可视

[State 30000, NotHitBy]
type = NotHitBy ;为了保证helper在战斗中不受某些类似AOE的影响,给helper写上无敌作为保险项
Trigger1 = 1
value = SCA

[State 30000, g`いで本体が来たら立ちへ移行]
type = SelfState ;当这个statedef不是helper时转到0
trigger1 =!ishelper
value = 0

[State 0, 普攻号码记录1]
type = VarSet
triggerall=var(1)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 1
value =enemynear,stateno

[State 0, 普攻时间记录1]
type = VarSet
triggerall=var(2)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(1)  ;对方的状态已经记忆
v = 2
value =enemynear,time

[State 0, 普攻号码记录2]
type = VarSet
triggerall=var(3)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 3
value =enemynear,stateno

[State 0, 普攻时间记录2]
type = VarSet
triggerall=var(4)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(3)  ;对方的状态已经记忆
v = 4
value =enemynear,time

[State 0, 普攻号码记录3]
type = VarSet
triggerall=var(5)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 5
value =enemynear,stateno

[State 0, 普攻时间记录3]
type = VarSet
triggerall=var(6)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(5)  ;对方的状态已经记忆
v = 6
value =enemynear,time

[State 0, 普攻号码记录4]
type = VarSet
triggerall=var(7)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 7
value =enemynear,stateno

[State 0, 普攻时间记录4]
type = VarSet
triggerall=var(8)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(7)  ;对方的状态已经记忆
v = 8
value =enemynear,time


[State 0, 普攻号码记录5]
type = VarSet
triggerall=var(9)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 9
value =enemynear,stateno

[State 0, 普攻时间记录5]
type = VarSet
triggerall=var(10)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(9)  ;对方的状态已经记忆
v = 10
value =enemynear,time

[State 0, 普攻号码记录6]
type = VarSet
triggerall=var(11)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(9)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 11
value =enemynear,stateno

[State 0, 普攻时间记录6]
type = VarSet
triggerall=var(12)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(11)  ;对方的状态已经记忆
v = 12
value =enemynear,time

[State 0, 普攻号码记录7]
type = VarSet
triggerall=var(13)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(9)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(11)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 13
value =enemynear,stateno

[State 0, 普攻时间记录7]
type = VarSet
triggerall=var(14)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(13)  ;对方的状态已经记忆
v = 14
value =enemynear,time

[State 0, 普攻号码记录8]
type = VarSet
triggerall=var(15)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(9)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(11)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(13)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 15
value =enemynear,stateno

[State 0, 普攻时间记录8]
type = VarSet
triggerall=var(16)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(15)  ;对方的状态已经记忆
v = 16
value =enemynear,time

[State 0, 普攻号码记录9]
type = VarSet
triggerall=var(17)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(9)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(11)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(13)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(15)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 17
value =enemynear,stateno

[State 0, 普攻时间记录9]
type = VarSet
triggerall=var(18)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(17)  ;对方的状态已经记忆
v = 18
value =enemynear,time


[State 0, 普攻号码记录10]
type = VarSet
triggerall=var(19)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(1)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(3)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(5)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(7)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(9)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(11)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(13)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(15)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(17)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,NT ;普通攻击检测
v = 19
value =enemynear,stateno

[State 0, 普攻时间记录10]
type = VarSet
triggerall=var(20)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(19)  ;对方的状态已经记忆
v = 20
value =enemynear,time

[State 0, 必杀号码记录1]
type = VarSet
triggerall=var(21)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,hitdefattr = SCA,ST ;必杀攻击检测
v = 21
value =enemynear,stateno

[State 0, 必杀时间记录1]
type = VarSet
triggerall=var(22)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(21)  ;对方的状态已经记忆
v = 22
value =enemynear,time

[State 0, 必杀号码记录2]
type = VarSet
triggerall=var(23)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,ST ;必杀攻击检测
v = 23
value =enemynear,stateno

[State 0, 必杀时间记录2]
type = VarSet
triggerall=var(24)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(23)  ;对方的状态已经记忆
v = 24
value =enemynear,time

[State 0, 必杀号码记录3]
type = VarSet
triggerall=var(25)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,ST ;必杀攻击检测
v = 25
value =enemynear,stateno

[State 0, 必杀时间记录3]
type = VarSet
triggerall=var(26)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(25)  ;对方的状态已经记忆
v = 26
value =enemynear,time

[State 0, 必杀号码记录4]
type = VarSet
triggerall=var(27)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,ST ;必杀攻击检测
v = 27
value =enemynear,stateno

[State 0, 必杀时间记录4]
type = VarSet
triggerall=var(28)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(27)  ;对方的状态已经记忆
v = 28
value =enemynear,time

[State 0, 必杀号码记录5]
type = VarSet
triggerall=var(29)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,ST ;必杀攻击检测
v = 29
value =enemynear,stateno

[State 0, 必杀时间记录5]
type = VarSet
triggerall=var(30)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(29)  ;对方的状态已经记忆
v = 30
value =enemynear,time

[State 0, 必杀号码记录6]
type = VarSet
triggerall=var(31)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(29)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,ST ;必杀攻击检测
v = 31
value =enemynear,stateno

[State 0, 必杀时间记录6]
type = VarSet
triggerall=var(32)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(31)  ;对方的状态已经记忆
v = 32
value =enemynear,time

[State 0, 必杀号码记录7]
type = VarSet
triggerall=var(33)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(29)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(31)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,ST ;必杀攻击检测
v = 33
value =enemynear,stateno

[State 0, 必杀时间记录7]
type = VarSet
triggerall=var(34)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(33)  ;对方的状态已经记忆
v = 34
value =enemynear,time

[State 0, 必杀号码记录8]
type = VarSet
triggerall=var(35)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(29)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(31)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(33)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,ST ;必杀攻击检测
v = 35
value =enemynear,stateno

[State 0, 必杀时间记录8]
type = VarSet
triggerall=var(36)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(35)  ;对方的状态已经记忆
v = 36
value =enemynear,time

[State 0, 必杀号码记录9]
type = VarSet
triggerall=var(37)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(29)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(31)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(33)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(35)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,ST ;必杀攻击检测
v = 37
value =enemynear,stateno

[State 0, 必杀时间记录9]
type = VarSet
triggerall=var(38)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(37)  ;对方的状态已经记忆
v = 38
value =enemynear,time

[State 0, 必杀号码记录10]
type = VarSet
triggerall=var(39)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(21)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(23)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(25)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(27)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(29)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(31)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(33)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(35)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(37)  ;确保号码不是之前记忆的号码
trigger1=enemynear,hitdefattr = SCA,ST ;必杀攻击检测
v = 39
value =enemynear,stateno

[State 0, 必杀时间记录10]
type = VarSet
triggerall=var(40)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(39)  ;对方的状态已经记忆
v = 40
value =enemynear,time


[State 0, 超杀号码记录1]
type = VarSet
triggerall=var(41)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,hitdefattr = SCA,HT ;超杀攻击检测
v = 41
value =enemynear,stateno

[State 0, 超杀时间记录1]
type = VarSet
triggerall=var(42)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,stateno=var(41)  ;对方的状态已经记忆
v = 42
value =enemynear,time

[State 0, 超杀号码记录2]
type = VarSet
triggerall=var(43)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,hitdefattr = SCA,HT ;超杀攻击检测
v = 43
value =enemynear,stateno

[State 0, 超杀时间记录2]
type = VarSet
triggerall=var(44)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(41)  ;确保号码不是之前记忆的号码
trigger1=enemynear,stateno=var(43)  ;对方的状态已经记忆
v = 44
value =enemynear,time

[State 0, 超杀号码记录3]
type = VarSet
triggerall=var(45)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,hitdefattr = SCA,HT ;超杀攻击检测
v = 45
value =enemynear,stateno

[State 0, 超杀时间记录3]
type = VarSet
triggerall=var(46)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(41)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(43)  ;确保号码不是之前记忆的号码
trigger1=enemynear,stateno=var(45)  ;对方的状态已经记忆
v = 46
value =enemynear,time

[State 0, 超杀号码记录4]
type = VarSet
triggerall=var(47)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,hitdefattr = SCA,HT ;超杀攻击检测
v = 47
value =enemynear,stateno

[State 0, 超杀时间记录4]
type = VarSet
triggerall=var(48)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(41)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(43)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(45)  ;确保号码不是之前记忆的号码
trigger1=enemynear,stateno=var(47)  ;对方的状态已经记忆
v = 48
value =enemynear,time

[State 0, 超杀号码记录5]
type = VarSet
triggerall=var(49)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
trigger1=enemynear,hitdefattr = SCA,HT ;超杀攻击检测
v = 49
value =enemynear,stateno

[State 0, 超杀时间记录5]
type = VarSet
triggerall=var(50)=-1 ;确保变量未使用
triggerall = enemynear,movetype = A
triggerall=enemynear,stateno!=var(41)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(43)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(45)  ;确保号码不是之前记忆的号码
triggerall=enemynear,stateno!=var(47)  ;确保号码不是之前记忆的号码
trigger1=enemynear,stateno=var(48)  ;对方的状态已经记忆
v = 50
value =enemynear,time




;==============================================================================
; {C:\Users\User\Desktop\proyectodbz\chars\Super Gotenks\add004basic.scom1}
;==============================================================================

; Common state file for M.U.G.E.N beta 2002.04.14
;
; System variables usage
; ----------------------
; Var name    Type   Purpose
; --------    ----   -------
; sysvar(0)   Temp   Set by state 5081 (HITL_SLIDE) to 1 to prevent
;                    showing ground hit frame in state 5110 (HIT_LIEDOWN).
;                    Used by guarding states.
; sysvar(1)   Temp   Used by state 40 (Jump Start) amd 45 (Air Jump Start)
;                    to keep track of which way to jump.
;                    Used by state 5100 and 5110 to remember downward
;                    velocity of player just before hitting the ground.
;                    Used in state 5080 for storing the anim # to display.

; The following states have special handling within MUGEN, and should be
; overridden with caution:
; Jump Start (40): airjumping bookkeeping at time = 0
; All guard states (120-155): guard handling throughout state
; Hit_trip, shaking (5070): defence increases at time = 0
; Hit_bounce (5100): defence increases at time = 0, player becomes
;                    invincible if within 10 ticks of getting up
; Hit_liedown (5110): player changes to get-up state (5120) when ready
; Hit_getup (5120): player's defence is restored to normal at time = 0
; Hitfall_recover (5200): player's defence is restored at time = 0
; Hitfall_airrecover (5210): player's defence is restored at time = 0

;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
anim = 10

[State 10, 1]
type = VelMul
trigger1 = Time = 0
x = .75

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11
sprpriority = 0

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = S
anim = 12

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0


;---------------------------------------------------------------------------
;走位18(AI)
[Statedef 18]
type    = S
physics = N
sprpriority = 0
;ctrl = 0
Anim = 21
velset = 0,0

[State 20, 1]
type = VelSet
trigger1 = time = 0
x = -2



;走位19(AI)
[Statedef 19]
type    = S
physics = N
sprpriority = 0
;ctrl = 0
Anim = 20
velset = 0,0

[State 20, 1]
type = VelSet
trigger1 = time = 0
x = 2

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21



;---------------------------------------------------------------------------
;前进(AI)
[Statedef 21]
type    = S
physics = N
sprpriority = 0
ctrl = 1
velset = 0,0

[State 20, 1]
type = VelSet
trigger1 = time = 0
trigger2 = P2bodydist x <= 150
trigger3 = Frontedgebodydist != [50,0]
x = ifelse(Random >= 700,const(velocity.walk.back.x),const(velocity.walk.fwd.x))

[State 20, 2]
type = VelSet
triggerall = time = 0
trigger1 = P2bodydist x > 150
trigger2 = NumTarget
trigger3 = Frontedgebodydist >= 50
x = const(velocity.walk.fwd.x)


[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21
value = 21

[State 20, 4]
type = changestate
trigger1 = anim = 20
trigger1 = time > 12
trigger1 = P2bodydist x <= 40
trigger1 = !NumTarget
trigger2 = anim = 21
trigger2 = time > 18
trigger2 = P2bodydist x >= 140
trigger3 = frontedgebodydist <= 10
trigger4 = roundstate != 2
trigger5 = p2bodydist X < 55
trigger5 = p2MoveType = H
trigger5 = p2statetype = A
trigger5 = enemynear,Vel X = 0
trigger5 = enemynear,Vel Y < 0
trigger5 = NumTarget
trigger6 = Frontedgebodydist <= 50      ; qbg
value = 0
ctrl = 1

;【扫地确认】
[Statedef 34]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 5
velset = 0,0
anim = 34
sprpriority = 1
ctrl = 0


[State 20, 1]
type = VelSet
trigger1 = time = [0,16]
x = -3

[State 20, 1]
type = VelSet
trigger1 = time = [17,36]
x = 3

[State 1350, 1]
type = HitDef
Trigger1 = time = 0
attr = S,ST
hitflag = MADF
hitsound = -1
sparkno = -1
numhits = 0
sparkxy = -20,-50
p2facing = 1
p2stateno = 35


[State 400, 4]
type = ChangeState
trigger1 = p2stateno = 35
value =  430


[State 回复]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = p2statetype !=L
trigger3 = P2movetype = A
trigger4 = P2STATENO = 5120
value = 105
ctrl = 1

;【P2躺地】
[Statedef 35]
type    = L
movetype= H
physics = N
velset = 0,0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = 1
value = 0
ignorehitpause = 1


[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 35

[State 0, SelfState]
type = SelfState
trigger1 = time = 40
value = 5110
ignorehitpause = 1


;扫地专用
[Statedef 36]
type    = S
physics = S
movetype = A
anim = 41
ctrl = 0
sprpriority = 1



[State 106, 1]
type = PlaySnd
trigger1 = time = 0
value = s2,0


[State 40, 4]
type = VelSet
trigger1 = Time >= 0
x = -10
y = -5


[State 40, 6]
type = ChangeState
trigger1 = Time = 10
value = IfElse(random%2,1400,IfElse(random%2,1420,1450))
ctrl = 0

;AI连击用小跳跃
[Statedef 38]
type    = S
physics = S
movetype = A
anim = 38
ctrl = 0
sprpriority = 1


[State 110, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 2
value = A

[State 110, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 8.2;8
y = -4;-4

[State 110, VelAdd]
type = VelAdd
trigger1 = animelemtime(2) > 0
y = .45

[State 110, VelMul]
type = VelMul
trigger1 = animelemtime(2) > 0
x = .96

[State 0]
type = PlaySnd
trigger1 = time = 0
value = s2,1

[State 110, Xe[gX]
type = ChangeState
trigger1 = AnimElemtime(2) >= 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 56



; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; AirJump Start
[Statedef 45]
type    = A
physics = N
ctrl = 0
velset = 0,0

[State 45, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(44)
value = 44

[State 45, 2]
type = ChangeAnim
trigger1 = !SelfAnimExist(44)
value = 41

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 45, 4]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 45, 5]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 45, 6]
type = VelSet
trigger1 = Time = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.airjump.fwd.x), const(velocity.airjump.back.x)))
y = const(velocity.airjump.y)

[State 45, 7]
type = ChangeState
trigger1 = Time = 2
value = 50
ctrl = 1



; AI用残血大跳跃
[Statedef 37]
type    = S
physics = S
anim = 37
ctrl = 0
sprpriority = 1

[State 191, 3]
type = PlaySnd
trigger1 = animelem = 1
value = 2,0

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = 6
y = -10

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 0


;AI跳跃
[Statedef 39]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = var(5) = 1
trigger1 = Time >= 0
time = 2

[State 0, AfterImageTime]
type = AfterImage
trigger1 = var(5) = 1
trigger1 = Time = 0
time = 1
trans = add1
palcontrast = 0,0,0


[State 0]
type = PlaySnd
trigger1 = time = 0
value = s2,1

[State 0]
type = VarSet
trigger1 = 1
sysvar(1) = 1


[State 0]
type = VelSet
trigger1 = AnimTime = 0
x = -4
y = -8.5


[State 0]
type = ChangeState
trigger1 = AnimTime = 0
value = 54
ctrl = 1


;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
; Jump Down (empty state for compatibility)
[Statedef 51]
type    = A
physics = A

[State 51, 1]
type = Null
trigger1 = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;空A（开始）
[Statedef 53]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 0]
type = ChangeState
trigger1 = Time = 14
value = 600
ctrl = 0



[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;普通（跳打）
[Statedef 54]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0


[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3


;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command != "holdfwd"
value = 0

;---------------------------------------------------------------------------
; RUN_BACK
[Statedef 104]
type    = A
physics = A
ctrl = 0
anim = 105
sprpriority = 1

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 2]
type = CtrlSet
trigger1 = Time = 2
value = 1

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; RUN_BACK
[Statedef 105]
type    = A
physics = A
ctrl = 0
anim = 105
sprpriority = 1

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 2]
type = CtrlSet
trigger1 = Time = 2
value = 1

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; RUN_BACK2 (land)
[Statedef 106]
type    = S
physics = S
ctrl = 0
anim = 47

[State 106, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 3]
type = MakeDust
trigger1 = Time = 2
pos = -5,-2
spacing = 1

[State 106, 4]
type = ChangeState
trigger1 = Time = 7
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;跑位前
[Statedef 108]
type    = S
physics = S
sprpriority = 1

[state 102, 0]
type=changeanim
trigger1=anim!=100&&!time
value=100

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S3,0
channel = 8


[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk


[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State ]
type = Ctrlset
trigger1 = var(59)
value = 0

[State 100, 4]
type = ChangeState
;trigger1 = !var(59) && command != "holdfwd"
trigger1 = time > 14
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; RUN_UP
[Statedef 110]
type    = S
physics = N

[State 110, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 110, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 110

[State 110, 2]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 30

[State 110, 3]
type = VelSet
trigger1 = Time = 0
x = 0
z = -7

[State 110, 4]
type = VelMul
trigger1 = 1
z = 0.8

[State 110, 5]
type = VelSet
trigger1 = AnimTime = -8
z = 0

[State 110, 7]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 110, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; RUN_DOWN
[Statedef 115]
type    = S
physics = N

[State 115, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 115, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 110

[State 115, 2]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 30

[State 115, 3]
type = VelSet
trigger1 = Time = 0
x = 0
z = 7

[State 115, 4]
type = VelMul
trigger1 = 1
z = 0.8

[State 115, 5]
type = VelSet
trigger1 = AnimTime = -8
z = 0

[State 115, 7]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 115, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
triggerall = statetype = S
trigger1 = var(59) != 1
trigger1 = command = "holddown"
trigger2 = var(59) = 1
trigger2 = var(48) = 1 ;var(48) = 1为蹲防，2为站防，下面有一样的就不多讲了
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
triggerall = statetype = C
trigger1 = var(59) != 1
trigger1 = command != "holddown"
trigger2 = var(59) = 1
trigger2 = var(48) = 2
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
trigger1 = var(59) != 1
trigger1 = command = "holddown"
trigger2 = var(59) = 1
trigger2 = var(48) = 1
value = 131

[State 130, Stop Guarding]
type = ChangeState
triggerall = var(59) != 1
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

[State 130, Stop Guarding]
type = ChangeState
triggerall = var(59) = 1
triggerall = !inguarddist
trigger1 = enemynear(var(58)),movetype != A ;不处于攻击状态并且背对自己
trigger1 = p2bodydist x < 0
trigger2 = p2bodydist x >= 0
trigger2 = numhelper(31000+ID)
trigger2 = !helper(31000+ID),inguarddist ;确认helper不在guarddist内撤销防御
value = 140
ignorehitpause = 1

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
trigger1 = var(59) != 1
trigger1 = command != "holddown"
trigger2 = var(59) = 1
trigger2 = var(48) = 2
value = 130

[State 131, Stop Guarding]
type = ChangeState
triggerall = var(59) != 1
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

[State 131, Stop Guarding]
type = ChangeState
triggerall = var(59) = 1
triggerall = !inguarddist
trigger1 = enemynear(var(58)),movetype != A
trigger1 = p2bodydist x < 0
trigger2 = p2bodydist x >= 0
trigger2 = numhelper(31000+ID)
trigger2 = !helper(31000+ID),inguarddist
value = 140
ignorehitpause = 1

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
triggerall = sysvar(0)
triggerall = inguarddist
trigger1 = var(59) != 1
trigger1 = command = "holdback"
trigger2 = var(59) = 1
value = 130


[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
triggerall = var(59) != 1
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

[State 132, Stop Guarding]
type = ChangeState
triggerall = var(59) = 1
triggerall = !inguarddist
trigger1 = enemynear(var(58)),movetype != A
trigger1 = p2bodydist x < 0
trigger2 = p2bodydist x >= 0
trigger2 = numhelper(31000+ID)
trigger2 = !helper(31000+ID),inguarddist
value = 140
ignorehitpause = 1

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
triggerall = statetype = S
trigger1 = var(59) != 1
trigger1 = command = "holddown"
trigger2 = var(59) = 1
trigger2 = var(48) = 1
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
triggerall = statetype = C
trigger1 = var(59) != 1
trigger1 = command != "holddown"
trigger2 = var(59) = 1
trigger2 = var(48) = 2
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, Hi to Lo]
type = StateTypeSet
triggerall = statetype = S
trigger1 = var(59) != 1
trigger1 = command = "holddown"
trigger2 = var(59) = 1
trigger2 = var(48) = 1
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
triggerall = statetype = C
trigger1 = var(59) != 1
trigger1 = command != "holddown"
trigger2 = var(59) = 1
trigger2 = var(48) = 2
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
triggerall = statetype = S
trigger1 = var(59) != 1
trigger1 = command = "holddown"
trigger2 = var(59) = 1
trigger2 = var(48) = 1
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
triggerall = statetype = C
trigger1 = var(59) != 1
trigger1 = command != "holddown"
trigger2 = var(59) = 1
trigger2 = var(48) = 2
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")


[State 152, Hi to Lo]
type = StateTypeSet
triggerall = statetype = S
trigger1 = var(59) != 1
trigger1 = command = "holddown"
trigger2 = var(59) = 1
trigger2 = var(48) = 1
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
triggerall = statetype = C
trigger1 = var(59) != 1
trigger1 = command != "holddown"
trigger2 = var(59) = 1
trigger2 = var(48) = 2
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
triggerall = statetype = S
trigger1 = var(59) != 1
trigger1 = command = "holddown"
trigger2 = var(59) = 1
trigger2 = var(48) = 1
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
triggerall = statetype = C
trigger1 = var(59) != 1
trigger1 = command != "holddown"
trigger2 = var(59) = 1
trigger2 = var(48) = 2
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
triggerall = sysvar(0)
triggerall = inguarddist
trigger1 = var(59) != 1
trigger1 = command = "holdback"
trigger2 = var(59) = 1
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52
;---------------------------------------------------------------------------
; LOSE (Time over)
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; DRAWGAME (Time over)
[Statedef 175]
type = S
ctrl = 0
velset = 0,0

[State 175, 1] ; If no anim, use go to lose state.
type = ChangeState
trigger1 = Time = 0
trigger1 = !SelfAnimExist(175)
value = 170

[State 175, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 175

[State 175, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(190)
value = 190

[State 190, 2] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0
value = 191

;---------------------------------------------------------------------------
; INTRO (override this state to give character an intro)
[Statedef 191]
type = S
ctrl = 0

[State 191, 1]
type = ChangeState
trigger1 = Time = 0
value = 0

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5001]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
triggerall = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5011 ;HITC_SLIDE

[State 5010, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 5011]
type    = C
movetype= H
physics = C

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type = ChangeState
trigger1 = HitOver
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 5035]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype= H
physics = N

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State 5040, 3]
type = CtrlSet
trigger1 = HitOver
value = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_TRIP (shaking)
[Statedef 5070]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5070, 1]
type = ChangeAnim
trigger1 = 1
value = 5070

[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 5071

[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 5080]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5081 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 5030 ;HITA_UP

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 5081]
type    = L
movetype= H
physics = C

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 5110 ;HIT_LIEDOWN

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HIT_GETUP
[Statedef 5120]
type    = L
movetype= I
physics = N

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State 5120, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (still falling)
[Statedef 5200]
type    = A
movetype= H
physics = N

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035
trigger1 = AnimTime = 0
value = 5050

[State 5200, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5200, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = A
movetype= H
physics = A
anim = 5200

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
x = -.15
y = -3.5

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5201, 6]
type = GameMakeAnim
trigger1 = Time = 1
value = 60
pos = 0, 0
under = 1

;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 1]
type = VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -4.5

[State 5210, 1]
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdup"
y = -2

[State 5210, 2] ;Go down
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holddown"
y = 1.5

[State 5210, 2] ;Go fwd
type = VelMul
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = 1

[State 5210, 2] ;Go back
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = -1

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time >= 4
y = .35

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1


;---------------------------------------------------------------------------
; Continue?
[Statedef 5500]
type = S
ctrl = 0
anim = 5300
velset = 0,0

[State 5500, 1] ;Use continue animation if available
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(5500)
value = 5500

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Intro for round 1
type = ChangeState
trigger1 = roundno >= 2
value = 197


[State 5900, 3] ;Intro for round 1
type = ChangeState
triggerall = roundno = 1
trigger1 = (p2name = "Majin Buu" | p4name = "Majin Buu")
value = 198
ctrl=0


[State 196]
type = ChangeState
triggerall = roundno = 1
trigger1 = (p2name = "Super Vegetto" | p4name = "Super Vegetto")
trigger2 = (p2name = "Vegetto" | p4name = "Vegetto")
trigger3 = (p2name = "Goku " | p4name = "Goku")
trigger4 = (p2name = "vegeta " | p4name = "vegeta")
trigger5 = (p2name = "Son Goku" | p4name = "Son Goku")
trigger6 = (p2name = "Piccolo" | p4name = "Piccolo")
trigger7 = (p2name = "Broli" | p4name = "Broli")
trigger8 = (p2name = "Broly" | p4name = "Broly")
value = 194
ctrl = 0



[State 5900, 3] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
value = IfElse(random%2,190,IfElse(random%2,191,192))




